var currentPoolTypeIndex=0;var currentPoolTypeId=0;var currentRaceId=0;var lastSelectPoolTypeWasParlay=false;var currentIndexParlay=0;var hadSendBetToCart=false;var arrayChars=new Array();var isFromToggle=false;function applyEventAction(){switch(_registerEvents){case EventAction.ShowWager:CallSendBet();break;case EventAction.SumitWager:CallPlaceBet();break;case EventAction.Continue:var lnkContinue=returnObjById("hlnkContinue");if(lnkContinue!==null){eval(lnkContinue.href);}
break;default:break;}}
function setWagerInformation(checkParlay,controlElement){if(_isLocked){return false;}
if(checkParlay===undefined){checkParlay=true;}
var _TemporarilyInactiveValue=returnObjById("_TemporarilyInactiveValue");var _PlayerStatus=returnObjById("_PlayerStatus");if((_TemporarilyInactiveValue)&&(_PlayerStatus)&&(_PlayerStatus.value==_TemporarilyInactiveValue.value)){alert(messages._1010);return false;}
_isLocked=true;var poolType=0,poolCode=0;var _RaceId,_RaceCollection,_PoolType,_RunnersCollection,_PoolCode,_PostTime;var raceId=0,raceCollection="",runnersCollection="";try{if(_WagerInfo===null||_WagerInfo.Races===null||_WagerInfo.Races[currentRaceIndex]===null||_WagerInfo.Races[_WagerInfo.Races[_WagerInfo.GetRaceIndex()].RaceId]===null){_isLocked=false;alert(messages.SetWagerInformation+messages._1006);ShowWaitDialog(false);return false;}
if(_WagerInfo.Races[_WagerInfo.Races[currentRaceIndex].RaceId].Pools.length<1){_isLocked=false;alert(messages._1009);ShowWaitDialog(false);return false;}
_RaceId=returnObjById("_RaceIdOnClient");_RaceCollection=returnObjById("_RaceCollectionOnClient");_PoolType=returnObjById("_PoolTypeOnClient");_PoolCode=returnObjById("_PoolCodeOnClient");_RunnersCollection=returnObjById("_RunnersCollectionOnClient");_PostTime=returnObjById("_RacePostTime");if(_RaceId===null||_PoolType===null||_PoolCode===null||_RunnersCollection===null||_PostTime===null){_isLocked=false;alert(messages.SetWagerInformation+messages._1006);ShowWaitDialog(false);return false;}
poolType=_WagerInfo.PoolType();poolCode=_WagerInfo.PoolCode();runnersCollection=GetHorseCollection(controlElement);if(runnersCollection!==''){if(typeof shoppingCartEdit==="undefined"){if(poolType>=1000&&checkParlay){if(!controlTicket.GetTicketInformation().IsValid()){_isLocked=false;ShowWaitDialog(false);alert(messages.lblErrorAddBetParlay);return false;}}}
raceId=_WagerInfo.RaceId();raceCollection=GetRaceCollection();if(runnersCollection.length===0){_isLocked=false;ShowWaitDialog(false);return false;}
_RaceId.value=raceId;_RaceCollection.value=raceCollection;_PoolType.value=poolType;_PoolCode.value=poolCode;_RunnersCollection.value=runnersCollection;_PostTime.value=_WagerInfo.RacePostTime();_isLocked=false;return true;}
else{if(poolType>=1000&&checkParlay){_isLocked=false;ShowWaitDialog(false);if(!controlTicket.GetTicketInformation().IsValid()){alert(messages.lblErrorAddBetParlay);return false;}
else{return true;}}
else{_isLocked=false;ShowWaitDialog(false);}}
return false;}
catch(er){_isLocked=false;alert("setWagerInformation :: "+er.name+"\n"+er.message);ShowWaitDialog(false);return false;}}
function GetRaceCollection(){var i=0;var raceCollection="";switch(_WagerInfo.PoolType()){case PoolType.Straight:case PoolType.Quinella:case PoolType.Exacta:case PoolType.Trifecta:case PoolType.Superfecta:case PoolType.DailyDouble:case PoolType.PickN:raceCollection=parseInt(_WagerInfo.RaceId(),10)-_incremetRaceIdIn;break;case PoolType.Parlay:for(i=0;i<_parlayEntries.length;i++){if(_parlayEntries[i].HorseList.length>0){raceCollection+=_parlayEntries[i].RaceId-_incremetRaceIdIn;if((i+1<_parlayEntries.length)&&(_parlayEntries[i+1].HorseList.length>0)){raceCollection+=" / ";}}}
break;default:break;}
if(raceCollection.length===0){alert(messages.NotWager);return "";}
return raceCollection;}
function GetHorseCollection(controlElement){var i=0,j=0,pos=-1,poolObj=null,currentSize=0;var ctrlCheckBox,_ckbBox,ctrlName="",programNumber=0;var runnersCollection="",strmessage;var userSelection;var wagerAmount=0;var strAmount="";var _BetAmount;var ctrlWin,ctrlPlace,ctrlShow;var isWin=false,isPlace=false,isShow=false,isOk=true;var winAmount=0,placeAmount=0,showAmount=0;var haveMoreThanTwoEntries=false;var raceCondition=_WagerInfo.Races[$('#_RaceIdOnClient').val()].Condition;_BetAmount=returnObjById("betAmount");if(_BetAmount===null){alert(messages.GetHorseCollection+messages._1006);return "";}
_BetAmount.className="TextboxNumeric";strAmount=TrimNumber(_BetAmount.value);try{wagerAmount=parseFloat(strAmount);if(isNaN(wagerAmount)){wagerAmount=0;_BetAmount.className="TextBoxAmountError";_BetAmount.value="";alert(buildWrongNumberMessage(strAmount));return "";}
if(wagerAmount===0){_BetAmount.value="";}}
catch(er){alert("GetHorseCollection :: "+buildWrongNumberMessage(strAmount));wagerAmount=0;_BetAmount.className="TextBoxAmountError";_BetAmount.value="";return "";}
_ckbBox=returnObjById("ckbBox");poolObj=_WagerInfo.PoolSelected();if(poolObj===null){alert(messages._1009);return "";}
if((poolObj.Type!=PoolType.Straight)&&(poolObj.Type!=PoolType.Parlay)){strmessage=buildLimitMessage(poolObj.Code,wagerAmount,_WagerInfo.ValidatePoolTypeIsLimitEnable(_WagerInfo.RaceSelected().LimitPayOutEnable,_WagerInfo.PoolCode(),_WagerInfo.PoolSize()));if(strmessage.length>0){alert(strmessage);_BetAmount.className="TextBoxAmountError";return "";}}
switch(poolObj.Type){case PoolType.Straight:for(i=0;i<ArrayBoxOptions.length;i++){ctrlName=ArrayBoxOptions[i][0];ctrlWin=returnObjById(ctrlName);ctrlPlace=returnObjById(ArrayBoxOptions[i][1]);ctrlShow=returnObjById(ArrayBoxOptions[i][2]);if((ctrlWin===null&&poolLimits.GetLimitInformation(PoolType.Win,raceCondition)!=undefined&&poolObj.AvailableWin)||(ctrlPlace===null&&poolLimits.GetLimitInformation(PoolType.Place,raceCondition)!=undefined&&poolObj.AvailablePlace)||(ctrlShow===null&&poolLimits.GetLimitInformation(PoolType.Show,raceCondition)!=undefined&&poolObj.AvailableShow)){alert(messages.GetHorseCollection+messages._1006);return "";}
if(ctrlWin!==null&&poolObj.AvailableWin){ctrlWin.className="TextboxRaceStraights";try{strAmount=TrimNumber(ctrlWin.value);winAmount=(strAmount.length>0)?parseFloat(strAmount):0;if(isNaN(winAmount)){winAmount=0;ctrlWin.className="TextboxRaceStraights TextBoxAmountError";isOk=false;ctrlWin.value="";alert(buildWrongNumberMessage(strAmount));}
if(winAmount===0){ctrlWin.value="";}}
catch(er){alert("GetHorseCollection :: "+buildWrongNumberMessage(strAmount));winAmount=0;ctrlWin.className="TextboxRaceStraights TextBoxAmountError";ctrlWin.value="";isOk=false;}}
if(!isOk){return "";}
if(ctrlPlace!==null&&poolObj.AvailablePlace){ctrlPlace.className="TextboxRaceStraights";try{strAmount=TrimNumber(ctrlPlace.value);placeAmount=(strAmount.length>0)?parseFloat(strAmount):0;if(isNaN(placeAmount)){placeAmount=0;ctrlPlace.className="TextboxRaceStraights TextBoxAmountError";setFocus(ctrlPlace);isOk=false;ctrlPlace.value="";alert("GetHorseCollection :: "+buildWrongNumberMessage(strAmount));}
if(placeAmount===0){ctrlPlace.value="";}}
catch(er){alert("GetHorseCollection :: "+buildWrongNumberMessage(strAmount));placeAmount=0;ctrlPlace.className="TextBoxAmountError";ctrlPlace.value="";isOk=false;}}
if(!isOk){return "";}
if(ctrlShow!==null&&poolObj.AvailableShow){ctrlShow.className="TextboxRaceStraights";try{strAmount=TrimNumber(ctrlShow.value);showAmount=(strAmount.length>0)?parseFloat(strAmount):0;if(isNaN(showAmount)){showAmount=0;ctrlShow.className="TextboxRaceStraights TextBoxAmountError";setFocus(ctrlShow);isOk=false;ctrlShow.value="";alert("GetHorseCollection :: "+buildWrongNumberMessage(strAmount));}
if(showAmount===0){ctrlShow.value="";}}
catch(er){alert("GetHorseCollection :: "+buildWrongNumberMessage(strAmount));showAmount=0;ctrlShow.className="TextboxRaceStraights TextBoxAmountError";ctrlShow.value="";isOk=false;}}
if(!isOk){return "";}
if(isOk){if(winAmount>0){isWin=true;strmessage=buildLimitMessage(PoolType.Win,winAmount,_WagerInfo.ValidatePoolTypeIsLimitEnable(_WagerInfo.RaceSelected().LimitPayOutEnable,_WagerInfo.PoolCode(),_WagerInfo.PoolSize()));if(strmessage.length>0){alert(strmessage);ctrlWin.className="TextboxRaceStraights TextBoxAmountError";runnersCollection="";return runnersCollection;}}
if(placeAmount>0){isPlace=true;strmessage=buildLimitMessage(PoolType.Place,placeAmount,_WagerInfo.ValidatePoolTypeIsLimitEnable(_WagerInfo.RaceSelected().LimitPayOutEnable,_WagerInfo.PoolCode(),_WagerInfo.PoolSize()));if(strmessage.length>0){alert(strmessage);ctrlPlace.className="TextboxRaceStraights TextBoxAmountError";runnersCollection="";return runnersCollection;}}
if(showAmount>0){isShow=true;strmessage=buildLimitMessage(PoolType.Show,showAmount,_WagerInfo.ValidatePoolTypeIsLimitEnable(_WagerInfo.RaceSelected().LimitPayOutEnable,_WagerInfo.PoolCode(),_WagerInfo.PoolSize()));if(strmessage.length>0){alert(strmessage);ctrlShow.className="TextboxRaceStraights TextBoxAmountError";runnersCollection="";return runnersCollection;}}
if(isWin||isPlace||isShow){pos=ctrlName.indexOf("__");if(pos>-1){programNumber=ctrlName.substring(pos+2,ctrlName.length);if(runnersCollection.length>0){runnersCollection+=" , ";}
runnersCollection+=programNumber+": ";if(isWin){runnersCollection+=winAmount+"/";}
else{runnersCollection+="X/";}
if(isPlace){runnersCollection+=placeAmount+"/";}
else{runnersCollection+="X/";}
if(isShow){runnersCollection+=showAmount;}
else{runnersCollection+="X";}}}}}
if(!isOk){runnersCollection="";}
raceCollection=_WagerInfo.RaceId();break;case PoolType.Quinella:case PoolType.Exacta:case PoolType.Trifecta:case PoolType.Superfecta:if(ArrayBoxOptions.length>0){userSelection=new Array();for(i=0;i<ArrayBoxOptions[0].length;i++){userSelection[i]=new Array();}}
for(i=0;i<ArrayBoxOptions.length;i++){for(j=0;j<ArrayBoxOptions[i].length;j++){ctrlName=ArrayBoxOptions[i][j];ctrlCheckBox=returnObjById(ctrlName);if((ctrlCheckBox!==null)&&(ctrlCheckBox.checked)){pos=ctrlName.indexOf("__");if(pos>-1){programNumber=ctrlName.substring(pos+2,ctrlName.length);userSelection[j][userSelection[j].length]=programNumber;}}}}
runnersCollection="";for(i=0;i<userSelection.length;i++){for(j=0;j<userSelection[i].length;j++){runnersCollection+=userSelection[i][j];if(j+1<userSelection[i].length){runnersCollection+=", ";}}
if((i+1<userSelection.length)&&(userSelection[i+1].length>0)){runnersCollection+=" / ";currentSize++;}
else{if(userSelection[i].length>0){currentSize++;}}}
if(_ckbBox.checked){if(userSelection[0].length<poolObj.Size){runnersCollection="";}}
else{if(poolObj.Size!=currentSize){runnersCollection="";}}
break;case PoolType.DailyDouble:case PoolType.PickN:if(ArrayBoxOptions.length>0){userSelection=new Array();for(i=0;i<poolObj.Size;i++){userSelection[i]=new Array();}}
var place=0;for(i=0;i<ArrayBoxOptions.length;i++){if(ArrayBoxOptions[i]==strSeparator){place++;}
else{ctrlName=ArrayBoxOptions[i];ctrlCheckBox=returnObjById(ctrlName);if((ctrlCheckBox!==null)&&(ctrlCheckBox.checked)){pos=ctrlName.indexOf("__");if(pos>-1){programNumber=ctrlName.substring(pos+2,ctrlName.length);userSelection[place][userSelection[place].length]=programNumber;}}}}
runnersCollection="";for(i=0;i<userSelection.length;i++){for(j=0;j<userSelection[i].length;j++){runnersCollection+=userSelection[i][j];if(j+1<userSelection[i].length){runnersCollection+=", ";}}
if((i+1<userSelection.length)&&(userSelection[i].length>0)&&(userSelection[i+1].length>0)){runnersCollection+=" / ";currentSize++;}
else{if(userSelection[i].length>0){currentSize++;}}}
if(currentSize!=poolObj.Size){runnersCollection="";}
break;case PoolType.Parlay:var wpsValues="";GetHorseParlayCollection();runnersCollection="";switch(_parlayType){case ParlayType.MultiTrackNormal:case ParlayType.MultiTrackCombined:if((_parlayEntries.length>0)&&(_parlayEntries[0].HorseList.length>0)){var countHorseWin=0;var countHorsePlace=0;var countHorseShow=0;for(i=0;i<_parlayEntries.length;i++){if(_parlayEntries[i].HorseList.length>0){for(j=0;j<_parlayEntries[i].HorseList.length;j++){wpsValues=(_parlayEntries[i].HorseList[j].Win==true)?"W":"";wpsValues+=(_parlayEntries[i].HorseList[j].Place==true)?"P":"";wpsValues+=(_parlayEntries[i].HorseList[j].Show==true)?"S":"";let poolType=PoolType.Parlay;if(_parlayEntries[i].HorseList[j].Win){countHorseWin+=1;poolType=PoolType.WinParlay;}
if(_parlayEntries[i].HorseList[j].Place){countHorsePlace+=1;poolType=PoolType.PlaceParlay;}
if(_parlayEntries[i].HorseList[j].Show){countHorseShow+=1;poolType=PoolType.ShowParlay;}
if(wagerAmount>0){strmessage=buildLimitMessage(poolType,wagerAmount,_WagerInfo.ValidatePoolTypeIsLimitEnable(_WagerInfo.RaceSelected().LimitPayOutEnable,_WagerInfo.PoolCode(),_WagerInfo.PoolSize()));if(strmessage.length>0){alert(strmessage);_BetAmount.className="TextboxRaceStraights TextBoxAmountError";runnersCollection="";if(controlElement!==undefined){unCheckCheckbox(controlElement,true);}
return runnersCollection;}}
runnersCollection+=_parlayEntries[i].HorseList[j].ProgramNumber+wpsValues;if(j+1<_parlayEntries[i].HorseList.length){runnersCollection+="/pa/ ";}
if(countHorseWin>1||countHorsePlace>1||countHorseShow>1){haveMoreThanTwoEntries=true;}}
if((i+1<_parlayEntries.length)&&(_parlayEntries[i+1].HorseList.length>0)){runnersCollection+=" / ";currentSize++;}}}
if(currentSize>0)
currentSize++;if(haveMoreThanTwoEntries)
runnersCollection="";}
break;default:if((_parlayEntries.length>0)&&(_parlayEntries[0].HorseList.length>0)){for(i=0;i<_parlayEntries[0].HorseList.length;i++){if(_parlayEntries[0].HorseList[i].Win){strmessage=buildLimitMessage(PoolType.WinParlay,winAmount);if(strmessage.length>0){alert(strmessage);runnersCollection="";ctrlWin.className="TextBoxAmountError";ctrlWin.select();return runnersCollection;}}
if(_parlayEntries[0].HorseList[i].Place){strmessage=buildLimitMessage(PoolType.PlaceParlay,placeAmount);if(strmessage.length>0){alert(strmessage);runnersCollection="";ctrlPlace.className="TextBoxAmountError";ctrlPlace.select();return runnersCollection;}}
if(_parlayEntries[0].HorseList[i].Show){strmessage=buildLimitMessage(PoolType.ShowParlay,showAmount);if(strmessage.length>0){alert(strmessage);runnersCollection="";ctrlShow.className="TextBoxAmountError";ctrlShow.select();return runnersCollection;}}}
for(i=0;i<_parlayEntries.length;i++){if(_parlayEntries[i].HorseList.length>0){for(j=0;j<_parlayEntries[i].HorseList.length;j++){wpsValues=(_parlayEntries[i].HorseList[j].Win==true)?"W":"";wpsValues+=(_parlayEntries[i].HorseList[j].Place==true)?"P":"";wpsValues+=(_parlayEntries[i].HorseList[j].Show==true)?"S":"";runnersCollection+=_parlayEntries[i].HorseList[j].ProgramNumber+wpsValues;if(j+1<_parlayEntries[i].HorseList.length){runnersCollection+=", ";}}
if((i+1<_parlayEntries.length)&&(_parlayEntries[i+1].HorseList.length>0)){runnersCollection+=" / ";currentSize++;}}}
if(currentSize>0){currentSize++;}
if(currentSize<2){runnersCollection="";}
break;}}
break;}
if(runnersCollection.length===0){var mesasageError=messages.NotWager;switch(poolObj.Type){case PoolType.Straight:mesasageError=messages.lblErrorAddBetStraight;break;case PoolType.Quinella:mesasageError=messages.lblErrorAddBetQuinella;break;case PoolType.Exacta:mesasageError=messages.lblErrorAddBetExacta;break;case PoolType.Trifecta:mesasageError=messages.lblErrorAddBetTrifecta;break;case PoolType.Superfecta:mesasageError=messages.lblErrorAddBetSuperfecta;break;case PoolType.DailyDouble:mesasageError=messages.lblErrorAddBetDailyDouble;break;case PoolType.PickN:mesasageError=messages.lblErrorAddBetPickN;mesasageError=mesasageError.replace("{0}",poolObj.Size);mesasageError=mesasageError.replace("{0}",poolObj.Size);break;case PoolType.Parlay:return "";}
alert(mesasageError);}
return runnersCollection;}
function enterKeyBet(event){if(event.which===13||event.keyCode===13){$('#aCallSendBetTopMobile').click();}}
function showRaceInformation(raceId,index){_betPlaced=false;closeAddBetSlipMessage('dvAddBetSlipMessageBox',true);ShowBettingMode();$('.bettingMode').removeClass('sHideElement');ResetActivityPlayer();if(raceId==-1){ShowWaitDialog(false);return;}
if((_WagerInfo===null)||(_WagerInfo.Races===null)){ShowWaitDialog(false);return;}
if(_WagerInfo.Races[raceId].Pools.length>0){currentRaceIndex=index;_WagerInfo.SetRaceIndex(index);if((_WagerInfo===null)||(_WagerInfo.Races===null)){ShowWaitDialog(false);return;}
var trackTypeName='';if(_WagerInfo.Races[raceId].TrackType=='THB'){trackTypeName=messages.MenuThoroughbredTracks;}
if(_WagerInfo.Races[raceId].TrackType=='HRN'){trackTypeName=messages.MenuHarnessTracks;}
if(_WagerInfo.Races[raceId].TrackType=='GYN'){trackTypeName=messages.MenuGreyhoundTracks;}
let raceType='';if(_WagerInfo.Races[raceId].HasStats){raceType+=' ';if(parseInt(_WagerInfo.Races[raceId].RaceClaimgPrice,10)>0){raceType+=_WagerInfo.Races[raceId].RaceType+parseInt(_WagerInfo.Races[raceId].RaceClaimgPrice,10)/1000+"K";}
else{raceType+=_WagerInfo.Races[raceId].RaceType;}
$('#dvMainInfoIcon .tooltip').show();}
else{$('#dvMainInfoIcon .tooltip').hide();}
returnObjById('Distance').innerHTML=_WagerInfo.Races[raceId].Distance;returnObjById('Surface').innerHTML=_WagerInfo.Races[raceId].Surface;returnObjById('Purse').innerHTML=_WagerInfo.Races[raceId].Purse;returnObjById('DistanceFull').innerHTML=_WagerInfo.Races[raceId].Distance;returnObjById('SurfaceFull').innerHTML=_WagerInfo.Races[raceId].Surface;returnObjById('PurseFull').innerHTML=_WagerInfo.Races[raceId].Purse;returnObjById('PostTime2').innerHTML=_WagerInfo.Races[raceId].PostTime;returnObjById('RaceLocation').innerHTML=_WagerInfo.Races[raceId].City==''?_WagerInfo.Races[raceId].CountryId:_WagerInfo.Races[raceId].City+' , '+_WagerInfo.Races[raceId].CountryId;returnObjById('RaceType').innerHTML=trackTypeName+raceType;returnObjById("_RaceIdOnClient").value=raceId;_BetAmount=returnObjById("betAmount");_BetAmount.className="TextboxNumeric";$(_BetAmount).off("input");$(_BetAmount).on("input",function(){checkInputValue(this);});showPools('dvPools',raceId);LoadExternalInformationBetSlipVideo(_WagerInfo.Races[raceId].VideoURL,false);if(showWagerInformation){showWagerInformation=false;}
if(_WagerInfo.Races[raceId].MaxLimitBetByRace!='0'){{$('#tdMaxLimitByRace').show();$('#lblMaxLimitByRace').text(_WagerInfo.Races[raceId].MaxLimitBetByRace);}}
else{$('#tdMaxLimitByRace').hide();}
_raceId=parseInt(raceId,10)-100;setInformationToRootMobile();setMobileMode();if(_WagerInfo.Races[raceId].HasStats&&$('#_modeBetting').val()==='1'){if($('#dvRaceDetailInformation').css('display')==='none'){$('#tdRaceViewDetailInformation > div > div').first().click();}}
if(controlTicket!==undefined){LoadRunnerFromControlTickets();}
else{if(typeof shoppingCartEditNewBet!=='undefined'&&shoppingCartEditNewBet.CountBetEnable!=0){shoppingCartEditNewBet.LoadInformationRunnerEdit(true);}
else{if(typeof shoppingCartEdit!=="undefined"&&shoppingCartEdit.IsEditMode()){shoppingCartEdit.LoadInformationRunnerEdit(false);}}
if(typeof shoppingCart!=="undefined"&&shoppingCart.IsEditMode()){shoppingCart.LoadInformationRunnerEdit(false);}}}
else{$('.bettingMode').addClass('sHideElement');}
RefreshMTP("MTP",messages.MTP_Reached,false);ShowWaitDialog(false);}
function showResultInformation(raceId,index){ShowResultMode();lblResulTitle=returnObjById("spResultsTitle");lblResulTitle.innerHTML=messages.lblResultsTitle.replace("{0}",raceId-100);_betPlaced=false;if(raceId==-1){ShowWaitDialog(false);return;}
if((_WagerInfo===null)||(_WagerInfo.Races===null)){ShowWaitDialog(false);return;}
var tlb=returnObjById('dtlRaces');var i=0,isValidRace=false;currentRaceIndex=index;_WagerInfo.SetRaceIndex(index);if((_WagerInfo===null)||(_WagerInfo.Races===null)){ShowWaitDialog(false);return;}
var trackTypeName='';if(_WagerInfo.Races[raceId].TrackType=='THB'){trackTypeName=messages.MenuThoroughbredTracks;}
if(_WagerInfo.Races[raceId].TrackType=='HRN'){trackTypeName=messages.MenuHarnessTracks;}
if(_WagerInfo.Races[raceId].TrackType=='GYN'){trackTypeName=messages.MenuGreyhoundTracks;}
returnObjById('Distance').innerHTML=_WagerInfo.Races[raceId].Distance;returnObjById('Surface').innerHTML=_WagerInfo.Races[raceId].Surface;returnObjById('Purse').innerHTML=_WagerInfo.Races[raceId].Purse;returnObjById('DistanceFull').innerHTML=_WagerInfo.Races[raceId].Distance;returnObjById('SurfaceFull').innerHTML=_WagerInfo.Races[raceId].Surface;returnObjById('PurseFull').innerHTML=_WagerInfo.Races[raceId].Purse;returnObjById('PostTime2').innerHTML=_WagerInfo.Races[raceId].PostTime;returnObjById('RaceLocation').innerHTML=_WagerInfo.Races[raceId].City==''?_WagerInfo.Races[raceId].CountryId:_WagerInfo.Races[raceId].City+' , '+_WagerInfo.Races[raceId].CountryId;returnObjById('RaceType').innerHTML=trackTypeName;returnObjById("_RaceIdOnClient").value=raceId;var addInformation=GetAddInformationBetSessionStorage();Racebook.ShowRaceResultInformation(_trackEvent,_trackCode,raceId,_sessionSSC,_token,addInformation,ShowRaceResult_CallBack);}
function ShowRaceResult_CallBack(response){if(response.error!==null){return;}
eval(response.value);_normalRaces.SetSelectedResult(currentRaceIndex);setInformationToRootMobile();setMobileMode();$('#divMTPInfo').show();ShowWaitDialog(false);}
function clearInformationRootMobileTrackName(){$('#lblTrackNameRoot').text('');$('#dvRootTrackName').removeClass('sLblRootSeparator');$('#dvRootTrackName').removeClass('sDvRootActive');}
function clearInformationRootMobileMetting(){$('#lblMeetingRoot').text('');$('#dvRootMeeting').removeClass('sDvRootActive');}
function clearInformationToRootMobileRace(){$('#lblRaceNumberRoot').text('');$('#dvRootRaceNumber').removeClass('sLblRootSeparator');$('#dvRootRaceNumber').removeClass('sDvRootActive');}
function setInformationRootMobileTrackName(value){if(value!=''){$('#lblTrackNameRoot').text(value);$('#dvRootTrackName').addClass('sLblRootSeparator');$('#dvRootTrackName').addClass('sDvRootActive');}
else{clearInformationRootMobileTrackName();}}
function setInformationRootMobileMetting(value){$('#lblMeetingRoot').text(value);$('#dvRootMeeting').addClass('sDvRootActive');}
function setInformationToRootMobile(){if(_raceId!=''){$('#lblRaceNumberRoot').text(' '+messages.lblRaceRoot+' '+_raceId);$('#dvRootRaceNumber').addClass('sLblRootSeparator');$('#dvRootRaceNumber').addClass('sDvRootActive');}
else{clearInformationToRootMobileRace();}}
function setFocusRootMobile(){$('#dvRootTrackList').removeClass('sDvRootFocus');$('#dvRootTrackName').removeClass('sDvRootFocus');$('#dvRootMeeting').removeClass('sDvRootFocus');$('#dvRootRaceNumber').removeClass('sDvRootFocus');if(_modePage!=0){if(_modePage==1){$('#dvRootRaceNumber').addClass('sDvRootFocus');}
if(_modePage==2){if(_sectionIsShowingModeMobile==0){$('#dvRootTrackList').addClass('sDvRootFocus');}
if(_sectionIsShowingModeMobile==1){$('#dvRootTrackName').addClass('sDvRootFocus');$('#dvRootMeeting').addClass('sDvRootFocus');}
if(_sectionIsShowingModeMobile==2){$('#dvRootRaceNumber').addClass('sDvRootFocus');}}}}
function ClearRunnersTable(){var _tlbRunnersInformation;var _raceLabel;var _br;for(var i=1;i<=maxPickN;i++){_tlbRunnersInformation=returnObjById('tlbRunners'+i);if(_tlbRunnersInformation){_tlbRunnersInformation.style.display="none";}
_raceLabel=returnObjById('race'+i);if(_raceLabel){_raceLabel.innerHTML="";}
_br=returnObjById('br'+i);if(_br){$(_br).addClass('sHideElement');}}}
function showPools(tableName,raceId){var poolType=0,poolCode=0,poolName="",poolSize=0,poolIndex=0;var cellStr="";var i=0,itemCount=0;var isFirst=true;var tlb=returnObjById(tableName);var aDivRow;let aDivTemp;if(tlb===null){return;}
$(tlb).html('');if(_WagerInfo.Races[raceId].Pools===null){ClearRunnersTable();return;}
if(_WagerInfo.Races[raceId].Pools.length<1){setPageLayout(BetZoneLayout.Error);ClearRunnersTable();alert("showPools :: "+messages._1009);return;}
aDivRow=document.createElement("div");tlb.appendChild(aDivRow);shoppingCart.EnableWinParlay=false;shoppingCart.EnablePlaceParlay=false;shoppingCart.EnableShowParlay=false;currentIndexParlay=-1;var aDivCell;var selPoolType=parseInt(returnObjById("_PoolTypeOnClient").value,10);for(i=0;i<_WagerInfo.Races[raceId].Pools.length;i++){aDivCell=document.createElement("div");poolType=_WagerInfo.Races[raceId].Pools[i].Type;poolCode=_WagerInfo.Races[raceId].Pools[i].Code;poolName=_WagerInfo.Races[raceId].Pools[i].Name;if(poolCode<=1000){if(poolCode==1000){currentIndexParlay=i;}
if(poolCode<1000||((poolCode==1000&&_parlayType==ParlayType.MultiTrackCombined))){cellStr="<input id='rblPools_"+i+"' type='radio' name='dvPools' ";cellStr+="value='"+poolCode+"' ";if(showWagerInformation){if((isFirst)&&(selPoolType==poolCode)){cellStr+="checked='checked' ";isFirst=false;poolIndex=i;_WagerInfo.SetPoolIndex(i);returnObjById("_PoolTypeOnClient").value=poolType;}}
else{if(isFirst){cellStr+="checked='checked' ";isFirst=false;poolIndex=i;_WagerInfo.SetPoolIndex(i);defaultControlName="rblPools_"+i;returnObjById("_PoolTypeOnClient").value=poolType;returnObjById("_PoolCodeOnClient").value=poolCode;}}
var tempInstruction="showRunners("+raceId+", "+i+");";cellStr+="/><label for='rblPools_"+i+"'>"+poolName+"</label>";$(aDivCell).attr('raceId',raceId);$(aDivCell).attr('indexPool',i);$(aDivCell).attr('id','dvPoolTypeId_'+i);$(aDivCell).attr('poolCode',poolCode);aDivCell.innerHTML="<div>"+cellStr+"</div>";aDivCell.onclick=function(){_poolCodeSelected=$(this).attr('poolCode');var checkChangePoolTypeParlay=false;if(controlTicket!==undefined&&controlTicket.GetTicketInformation()!==undefined&&controlTicket.GetTicketInformation().HasParlay()){checkChangePoolTypeParlay=true;}
if(checkChangePoolTypeParlay){var poolIndex=$(this).attr('indexPool');var raceId=$(this).attr('raceId');var idPoolType=$(this).attr('id');confirm(messages.lblConfirmCancelParlay,function(){CancelParlayAndRestartPoolType(poolIndex,raceId,idPoolType,false);});}
else{hadSendBetToCart=false;SelectPoolType($(this).attr('indexPool'),$(this).attr('raceId'),$(this).attr('id'),1);if(_poolCodeSelected=="1000"&&_parlayType==ParlayType.MultiTrackCombined){CreateControlTicket();if(controlTicket.GetTicketInformation()===undefined){controlTicket.AddNewTicket(0);controlTicket.GetTicketInformation().AddNewBet(_poolCodeSelected,parseFloat($('#betAmount').val()));}}}
if(typeof shoppingCartEditNewBet!=='undefined'&&shoppingCartEditNewBet.CountBetEnable!=0){setTimeout(function(){if(shoppingCartEditNewBet!==undefined){shoppingCartEditNewBet.LoadInformationRunnerEdit(true);}},100);}
else{if(typeof shoppingCartEdit!=='undefined'&&shoppingCartEdit.IsEditMode()){setTimeout(function(){if(shoppingCartEditNewBet!==undefined){shoppingCartEdit.LoadInformationRunnerEdit(false);}},100);}}
return false;};itemCount++;aDivRow.appendChild(aDivCell);if(poolCode>=1000){AddParlayOptions(aDivRow);}}
else{if(poolCode===1000&&_parlayType==ParlayType.MultiTrackNormal){var options=new Array();var countPositionParlay=0;var valueSelectDefault='';var nameForce=poolName;var codeForce=poolCode;var allowWin=false;var allowPlace=false;var allowShow=false;options[countPositionParlay]=new Array();if($('#_hdnParlayPoolTypeSelected').val()!='-1'){valueSelectDefault=$('#_hdnParlayPoolTypeSelected').val();nameForce=undefined;codeForce=undefined;options[countPositionParlay][0]='1001';options[countPositionParlay][1]=messages.lblWin;options[countPositionParlay][2]=messages.lblWin+' '+poolName;countPositionParlay++;options[countPositionParlay]=new Array();options[countPositionParlay][0]='1002';options[countPositionParlay][1]=messages.lblPlace;options[countPositionParlay][2]=messages.lblPlace+' '+poolName;countPositionParlay++;options[countPositionParlay]=new Array();options[countPositionParlay][0]='1003';options[countPositionParlay][1]=messages.lblShow;options[countPositionParlay][2]=messages.lblShow+' '+poolName;countPositionParlay++;options[countPositionParlay]=new Array();options[countPositionParlay][0]='1004';options[countPositionParlay][1]='W/P';options[countPositionParlay][2]='W/P '+poolName;countPositionParlay++;options[countPositionParlay]=new Array();options[countPositionParlay][0]='1005';options[countPositionParlay][1]='W/S';options[countPositionParlay][2]='W/S '+poolName;countPositionParlay++;options[countPositionParlay]=new Array();options[countPositionParlay][0]='1006';options[countPositionParlay][1]='P/S';options[countPositionParlay][2]='P/S '+poolName;countPositionParlay++;options[countPositionParlay]=new Array();options[countPositionParlay][0]='1007';options[countPositionParlay][1]='W/P/S';options[countPositionParlay][2]='W/P/S '+poolName;countPositionParlay++;}
else{valueSelectDefault=options[0][0];let poolObjCheck=_WagerInfo.PoolSelectedByPooltype(PoolType.WinParlay);if(poolObjCheck!==null){options[countPositionParlay]=new Array();options[countPositionParlay][0]='1001';options[countPositionParlay][1]=messages.lblWin;options[countPositionParlay][2]=messages.lblWin+' '+poolName;countPositionParlay++;allowWin=true;}
poolObjCheck=_WagerInfo.PoolSelectedByPooltype(PoolType.PlaceParlay);if(poolObjCheck!==null){options[countPositionParlay]=new Array();options[countPositionParlay][0]='1002';options[countPositionParlay][1]=messages.lblPlace;options[countPositionParlay][2]=messages.lblPlace+' '+poolName;countPositionParlay++;allowPlace=true;}
poolObjCheck=_WagerInfo.PoolSelectedByPooltype(PoolType.ShowParlay);if(poolObjCheck!==null){options[countPositionParlay]=new Array();options[countPositionParlay][0]='1003';options[countPositionParlay][1]=messages.lblShow;options[countPositionParlay][2]=messages.lblShow+' '+poolName;countPositionParlay++;allowShow=true;}
if(allowWin&&allowPlace){options[countPositionParlay]=new Array();options[countPositionParlay][0]='1004';options[countPositionParlay][1]='W/P';options[countPositionParlay][2]='W/P '+poolName;countPositionParlay++;}
if(allowWin&&allowShow){options[countPositionParlay]=new Array();options[countPositionParlay][0]='1005';options[countPositionParlay][1]='W/S';options[countPositionParlay][2]='W/S '+poolName;countPositionParlay++;}
if(allowPlace&&allowShow){options[countPositionParlay]=new Array();options[countPositionParlay][0]='1006';options[countPositionParlay][1]='P/S';options[countPositionParlay][2]='P/S '+poolName;countPositionParlay++;}
if(allowWin&&allowPlace&&allowShow){options[countPositionParlay]=new Array();options[countPositionParlay][0]='1007';options[countPositionParlay][1]='W/P/S';options[countPositionParlay][2]='W/P/S '+poolName;countPositionParlay++;}}
$(aDivCell).attr('raceId',raceId);$(aDivCell).attr('indexPool',i);$(aDivCell).attr('class','sDvPoolTypeParlay');var $newInput=$("<input id='rblPools_"+i+"' type='radio' name='dvPools' />");$(aDivCell).append($newInput);createDynamicDropDown('sDvDropDownParlayPoolType','dvPoolParlaySelect',options,valueSelectDefault,function(result,idPrincipal,elementSource){var addNewParlay=true;if($('#_modeBetting').val()==='0'){if(!_playerWindowsIsOpen&&!_isAuthenticated){addNewParlay=false;OpenDialogToSignInPlayer();if(_trackCode!=''&&_raceId!=''&&_trackEvent!=''){ShowTrackInformation(_trackCode,_raceId,_trackEvent,'false','');}}}
if(addNewParlay){_poolCodeSelected='1000';$('#_hdnParlayPoolTypeSelected').val(result);$(elementSource.parentElement.parentElement.parentElement.parentElement).find('input').prop("checked",true);CreateControlTicket();if(controlTicket.GetTicketInformation()===undefined){controlTicket.AddNewTicket(0);controlTicket.GetTicketInformation().AddNewBet(result,parseFloat($('#betAmount').val()));}
else{if(result!==controlTicket.GetTicketInformation().GetBetInformation().PoolTypeId){controlTicket.GetTicketInformation().GetBetInformation().ChangePoolType(result);}}
showRunners($(elementSource.parentElement.parentElement.parentElement.parentElement).attr('raceId'),$(elementSource.parentElement.parentElement.parentElement.parentElement).attr('indexPool'));if(controlTicket!==undefined){LoadRunnerFromControlTickets();}}},nameForce,codeForce,undefined,undefined,undefined,undefined,undefined,aDivCell);aDivRow.appendChild(aDivCell);}}}}
_betPlaced=false;if(lastSelectPoolTypeWasParlay){poolIndex=currentIndexParlay;if(document.getElementById('rblPools_'+poolIndex)===null){aDivCell=document.createElement("div");aDivCell.className="sDvParlayEmpty";cellStr="<input id='rblPools_"+_WagerInfo.Races[raceId].Pools.length+"' type='radio' name='dvPools' ";cellStr+="value='1000' ";cellStr+="/><label for='rblPools_"+_WagerInfo.Races[raceId].Pools.length+"'>"+messages.lblPoolTypeNameParlay+"</label>";aDivCell.innerHTML=cellStr;aDivRow.appendChild(aDivCell);$('#rblPools_'+_WagerInfo.Races[raceId].Pools.length).prop("checked",true);poolIndex=_WagerInfo.Races[raceId].Pools.length;_betPlaced=true;}
else{$('#rblPools_'+poolIndex).prop("checked",true);}}
showRunners(raceId,poolIndex);}
function CancelParlayAndRestartPoolType(indexPool,raceId,idPoolType,isEdit){$('#_hdnParlayPoolTypeSelected').val('-1');controlTicket=undefined;SelectPoolType(indexPool,raceId,idPoolType,2);}
function SelectPoolType(indexPool,raceId,poolTypeIdClicked,resultConfirmation){if(_WagerInfo.Races[raceId].Pools.length>0){var indexSelected=indexPool;if(_parlayType==ParlayType.MultiTrackNormal){if(!$('#dvDropDown_dvPoolParlaySelect .sDvChildDropDown').hasClass('sHideElement')){$('#dvDropDown_dvPoolParlaySelect .sDvElementSelected').click();}
$('#lbDropDownElemenSelected_dvPoolParlaySelect').text(messages.lblPoolTypeNameParlay);}
lastSelectPoolTypeWasParlay=false;$('#'+poolTypeIdClicked).find('input').prop("checked",true);if(resultConfirmation==1){showRunners(raceId,indexSelected);}
else{showPools('dvPools',raceId);}}}
function AddParlayOptions(aDivRow){var aDivCell;aDivCell=document.createElement("div");cellStr="<label for='rblParlayFinish'>"+messages.lblFinishParlay+"</label>";aDivCell.innerHTML=cellStr;if(!shoppingCart.IsEditMode()){aDivCell.className='sHideElement';}
if(typeof shoppingCartEdit!=="undefined"&&shoppingCartEdit.IsEditMode()){aDivCell.className='';}
aDivCell.id="dvParlayFinish";aDivCell.onclick=function(){if(!$(this).hasClass('sDvParlayOptionDisable')){if(typeof shoppingCartEdit!=="undefined"&&shoppingCartEdit.IsEditMode()){shoppingCartEdit.EditTicketFinish();}
else{shoppingCart.ParlayFinish();$('#rblPools_0').click();if(_modePage!=0&&$('.fancybox-wrap').css('overflow')!='visible'){$("#dvTblBetSplipCartMobile").click();}}}return false;};aDivRow.appendChild(aDivCell);aDivCell=document.createElement("div");cellStr="<label for='dvParlayCancel'>"+messages.lblCancelParlay+"</label>";aDivCell.innerHTML=cellStr;if(!shoppingCart.IsEditMode()){aDivCell.className='sHideElement';}
if(typeof shoppingCartEdit!=="undefined"&&shoppingCartEdit.IsEditMode()){aDivCell.className='';}
aDivCell.id="dvParlayCancel";aDivCell.onclick=function(){hadSendBetToCart=false;$('#rblPools_0').click();return false;};aDivRow.appendChild(aDivCell);if(shoppingCart.IsEditMode()){shoppingCart.RefreshOptionParlays(shoppingCart.EditPalayerIndexBetId());}
if(typeof shoppingCartEdit!=="undefined"&&shoppingCartEdit.IsEditMode()){shoppingCartEdit.RefreshOptionParlays(shoppingCartEdit.EditPalayerIndexBetId());}}
function showPoolLimits(raceId){var lblPoolLimit,lblPool1,lblPool2,lblPool3,lblMin1,lblMax1,lblMin2,lblMax2,lblMin3,lblMax3;var raceCondition=_WagerInfo.Races[raceId].Condition;var poolObj=_WagerInfo.PoolSelected();if(poolObj===null){alert("showPoolLimits :: "+messages._1009);return;}
lblPoolLimit=returnObjById("lblPoolLimit");lblPool1=returnObjById("lblPool1");lblPool2=returnObjById("lblPool2");lblPool3=returnObjById("lblPool3");lblMin1=returnObjById("lblMin1");lblMin2=returnObjById("lblMin2");lblMin3=returnObjById("lblMin3");lblMax1=returnObjById("lblMax1");lblMax2=returnObjById("lblMax2");lblMax3=returnObjById("lblMax3");lblPool1.style.display='none';lblPool2.style.display='none';lblPool3.style.display='none';lblMin2.style.display='none';lblMin3.style.display='none';lblMax2.style.display='none';lblMax3.style.display='none';switch(poolObj.Type){case PoolType.Straight:lblPoolLimit.innerHTML=messages.lblStraightLimits;lblPool1.style.display='';lblPool2.style.display='';lblPool3.style.display='';lblMin1.style.display='';lblMax1.style.display='';lblMin2.style.display='';lblMin3.style.display='';lblMax2.style.display='';lblMax3.style.display='';lblMin1.parentElement.parentElement.style.display='';lblMin2.parentElement.parentElement.style.display='';lblMin3.parentElement.parentElement.style.display='';if(poolLimits.GetLimitInformation(PoolType.Win,raceCondition)!=undefined&&poolObj.AvailableWin){lblMin1.innerHTML=poolLimits.GetLimitInformation(PoolType.Win,raceCondition)._Min.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(_WagerInfo.ValidatePoolTypeIsLimitEnable(_WagerInfo.RaceSelected().LimitPayOutEnable,_WagerInfo.PoolCode(),_WagerInfo.PoolSize())){lblMax1.innerHTML='-';}
else{lblMax1.innerHTML=poolLimits.GetLimitInformation(PoolType.Win,raceCondition)._Max.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");}}
else{lblPool1.style.display='none';lblMin1.style.display='none';lblMax1.style.display='none';}
if(poolLimits.GetLimitInformation(PoolType.Place,raceCondition)!=undefined&&poolObj.AvailablePlace){lblMin2.innerHTML=poolLimits.GetLimitInformation(PoolType.Place,raceCondition)._Min.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(_WagerInfo.ValidatePoolTypeIsLimitEnable(_WagerInfo.RaceSelected().LimitPayOutEnable,_WagerInfo.PoolCode(),_WagerInfo.PoolSize())){lblMax2.innerHTML='-';}
else{lblMax2.innerHTML=poolLimits.GetLimitInformation(PoolType.Place,raceCondition)._Max.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");}}
else{lblPool2.style.display='none';lblMin2.style.display='none';lblMax2.style.display='none';}
if(poolLimits.GetLimitInformation(PoolType.Show,raceCondition)!=undefined&&poolObj.AvailableShow){lblMin3.innerHTML=poolLimits.GetLimitInformation(PoolType.Show,raceCondition)._Min.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(_WagerInfo.ValidatePoolTypeIsLimitEnable(_WagerInfo.RaceSelected().LimitPayOutEnable,_WagerInfo.PoolCode(),_WagerInfo.PoolSize())){lblMax3.innerHTML='-';}
else{lblMax3.innerHTML=poolLimits.GetLimitInformation(PoolType.Show,raceCondition)._Max.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");}}
else{lblPool3.style.display='none';lblMin3.style.display='none';lblMax3.style.display='none';}
break;case PoolType.Quinella:lblMin1.parentElement.parentElement.style.display='';lblMin1.style.display='';lblMax1.style.display='';lblPoolLimit.innerHTML=messages.lblQuniellaLimits;lblMin1.innerHTML=poolLimits.GetLimitInformation(poolObj.Code,raceCondition)._Min.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(_WagerInfo.ValidatePoolTypeIsLimitEnable(_WagerInfo.RaceSelected().LimitPayOutEnable,_WagerInfo.PoolCode(),_WagerInfo.PoolSize())){lblMax1.innerHTML='-';}
else{lblMax1.innerHTML=poolLimits.GetLimitInformation(poolObj.Code,raceCondition)._Max.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");}
break;case PoolType.Exacta:lblMin1.parentElement.parentElement.style.display='';lblMin1.style.display='';lblMax1.style.display='';lblPoolLimit.innerHTML=messages.lblExactaLimits;lblMin1.innerHTML=poolLimits.GetLimitInformation(poolObj.Code,raceCondition)._Min.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(_WagerInfo.ValidatePoolTypeIsLimitEnable(_WagerInfo.RaceSelected().LimitPayOutEnable,_WagerInfo.PoolCode(),_WagerInfo.PoolSize())){lblMax1.innerHTML='-';}
else{lblMax1.innerHTML=poolLimits.GetLimitInformation(poolObj.Code,raceCondition)._Max.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");}
break;case PoolType.Trifecta:lblMin1.parentElement.parentElement.style.display='';lblMin1.style.display='';lblMax1.style.display='';lblPoolLimit.innerHTML=messages.lblTrifectaLimits;lblMin1.innerHTML=poolLimits.GetLimitInformation(poolObj.Code,raceCondition)._Min.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(_WagerInfo.ValidatePoolTypeIsLimitEnable(_WagerInfo.RaceSelected().LimitPayOutEnable,_WagerInfo.PoolCode(),_WagerInfo.PoolSize())){lblMax1.innerHTML='-';}
else{lblMax1.innerHTML=poolLimits.GetLimitInformation(poolObj.Code,raceCondition)._Max.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");}
break;case PoolType.Superfecta:lblMin1.parentElement.parentElement.style.display='';lblMin1.style.display='';lblMax1.style.display='';lblPoolLimit.innerHTML=messages.lblSuperfectaLimits;lblMin1.innerHTML=poolLimits.GetLimitInformation(poolObj.Code,raceCondition)._Min.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(_WagerInfo.ValidatePoolTypeIsLimitEnable(_WagerInfo.RaceSelected().LimitPayOutEnable,_WagerInfo.PoolCode(),_WagerInfo.PoolSize())){lblMax1.innerHTML='-';}
else{lblMax1.innerHTML=poolLimits.GetLimitInformation(poolObj.Code,raceCondition)._Max.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");}
break;case PoolType.DailyDouble:lblMin1.parentElement.parentElement.style.display='';lblMin1.style.display='';lblMax1.style.display='';lblPoolLimit.innerHTML=messages.lblDailyDoubleLimits;lblMin1.innerHTML=poolLimits.GetLimitInformation(poolObj.Code,raceCondition)._Min.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(_WagerInfo.ValidatePoolTypeIsLimitEnable(_WagerInfo.RaceSelected().LimitPayOutEnable,_WagerInfo.PoolCode(),_WagerInfo.PoolSize())){lblMax1.innerHTML='-';}
else{lblMax1.innerHTML=poolLimits.GetLimitInformation(poolObj.Code,raceCondition)._Max.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");}
break;case PoolType.PickN:lblMin1.parentElement.parentElement.style.display='';lblMin1.style.display='';lblMax1.style.display='';lblPoolLimit.innerHTML=messages.lblPickLimits.replace("{0}",poolObj.Name);lblMin1.innerHTML=poolLimits.GetLimitInformation(poolObj.Code,raceCondition)._Min.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(_WagerInfo.ValidatePoolTypeIsLimitEnable(_WagerInfo.RaceSelected().LimitPayOutEnable,_WagerInfo.PoolCode(),_WagerInfo.PoolSize())){lblMax1.innerHTML='-';}
else{lblMax1.innerHTML=poolLimits.GetLimitInformation(poolObj.Code,raceCondition)._Max.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");}
break;case PoolType.Parlay:lblPoolLimit.innerHTML=messages.lblParlayLimits;lblPool1.style.display='';lblPool2.style.display='';lblPool3.style.display='';lblMin1.parentElement.parentElement.style.display='';lblMin2.parentElement.parentElement.style.display='';lblMin3.parentElement.parentElement.style.display='';lblMin1.style.display='';lblMin2.style.display='';lblMin3.style.display='';lblMax1.style.display='';lblMax2.style.display='';lblMax3.style.display='';switch(_parlayType){case ParlayType.MultiTrackCombined:if(poolObj.AvailableWin&&poolLimits.GetLimitInformation(1001,raceCondition)!=undefined){lblMin1.innerHTML=poolLimits.GetLimitInformation(1001,raceCondition)._Min.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(_WagerInfo.ValidatePoolTypeIsLimitEnable(_WagerInfo.RaceSelected().LimitPayOutEnable,_WagerInfo.PoolCode(),_WagerInfo.PoolSize())){lblMax1.innerHTML='-';}
else{lblMax1.innerHTML=poolLimits.GetLimitInformation(1001,raceCondition)._Max.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");}}else{lblMin1.parentElement.parentElement.style.display='none';lblPool1.style.display='none';lblMin1.style.display='none';lblMax1.style.display='none';}
if(poolObj.AvailablePlace&&poolLimits.GetLimitInformation(1002,raceCondition)!=undefined){lblMin2.innerHTML=poolLimits.GetLimitInformation(1002,raceCondition)._Min.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(_WagerInfo.ValidatePoolTypeIsLimitEnable(_WagerInfo.RaceSelected().LimitPayOutEnable,_WagerInfo.PoolCode(),_WagerInfo.PoolSize())){lblMax2.innerHTML='-';}
else{lblMax2.innerHTML=poolLimits.GetLimitInformation(1002,raceCondition)._Max.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");}}
else{lblMin2.parentElement.parentElement.style.display='none';lblPool2.style.display='none';lblMin2.style.display='none';lblMax2.style.display='none';}
if(poolObj.AvailableShow&&poolLimits.GetLimitInformation(1003,raceCondition)!=undefined){lblMin3.innerHTML=poolLimits.GetLimitInformation(1003,raceCondition)._Min.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(_WagerInfo.ValidatePoolTypeIsLimitEnable(_WagerInfo.RaceSelected().LimitPayOutEnable,_WagerInfo.PoolCode(),_WagerInfo.PoolSize())){lblMax3.innerHTML='-';}
else{lblMax3.innerHTML=poolLimits.GetLimitInformation(1003,raceCondition)._Max.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");}}
else{lblMin3.parentElement.parentElement.style.display='none';lblPool3.style.display='none';lblMin3.style.display='none';lblMax3.style.display='none';}
break;case ParlayType.MultiTrackNormal:if(poolObj.AvailableWin&&poolLimits.GetLimitInformation(1001,raceCondition)!=undefined&&($('#_hdnParlayPoolTypeSelected').val()==PoolType.WinParlay||$('#_hdnParlayPoolTypeSelected').val()==PoolType.WinPlaceParlay||$('#_hdnParlayPoolTypeSelected').val()==PoolType.WinShowParlay||$('#_hdnParlayPoolTypeSelected').val()==PoolType.WinPlaceShowParlay)){lblMin1.innerHTML=poolLimits.GetLimitInformation(1001,raceCondition)._Min.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(_WagerInfo.ValidatePoolTypeIsLimitEnable(_WagerInfo.RaceSelected().LimitPayOutEnable,_WagerInfo.PoolCode(),_WagerInfo.PoolSize())){lblMax1.innerHTML='-';}
else{lblMax1.innerHTML=poolLimits.GetLimitInformation(1001,raceCondition)._Max.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");}}else{lblMin1.parentElement.parentElement.style.display='none';lblPool1.style.display='none';lblMin1.style.display='none';lblMax1.style.display='none';}
if(poolObj.AvailablePlace&&poolLimits.GetLimitInformation(1002,raceCondition)!=undefined&&($('#_hdnParlayPoolTypeSelected').val()==PoolType.PlaceParlay||$('#_hdnParlayPoolTypeSelected').val()==PoolType.WinPlaceParlay||$('#_hdnParlayPoolTypeSelected').val()==PoolType.PlaceShowParlay||$('#_hdnParlayPoolTypeSelected').val()==PoolType.WinPlaceShowParlay)){lblMin2.innerHTML=poolLimits.GetLimitInformation(1002,raceCondition)._Min.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(_WagerInfo.ValidatePoolTypeIsLimitEnable(_WagerInfo.RaceSelected().LimitPayOutEnable,_WagerInfo.PoolCode(),_WagerInfo.PoolSize())){lblMax2.innerHTML='-';}
else{lblMax2.innerHTML=poolLimits.GetLimitInformation(1002,raceCondition)._Max.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");}}
else{lblMin2.parentElement.parentElement.style.display='none';lblPool2.style.display='none';lblMin2.style.display='none';lblMax2.style.display='none';}
if(poolObj.AvailableShow&&poolLimits.GetLimitInformation(1003,raceCondition)!=undefined&&($('#_hdnParlayPoolTypeSelected').val()==PoolType.ShowParlay||$('#_hdnParlayPoolTypeSelected').val()==PoolType.WinShowParlay||$('#_hdnParlayPoolTypeSelected').val()==PoolType.PlaceShowParlay||$('#_hdnParlayPoolTypeSelected').val()==PoolType.WinPlaceShowParlay)){lblMin3.innerHTML=poolLimits.GetLimitInformation(1003,raceCondition)._Min.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(_WagerInfo.ValidatePoolTypeIsLimitEnable(_WagerInfo.RaceSelected().LimitPayOutEnable,_WagerInfo.PoolCode(),_WagerInfo.PoolSize())){lblMax3.innerHTML='-';}
else{lblMax3.innerHTML=poolLimits.GetLimitInformation(1003,raceCondition)._Max.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");}}
else{lblMin3.parentElement.parentElement.style.display='none';lblPool3.style.display='none';lblMin3.style.display='none';lblMax3.style.display='none';}
break;}
break;}}
function showRunners(raceId,poolIndex){var confirmationShowRunners=true;if(confirmationShowRunners){if((_WagerInfo===null)||(_WagerInfo.Races===null)||(_WagerInfo.Races[raceId]===null)){ShowWaitDialog(false);return;}
var isValidWagerType=true;var poolSize=0,_raceId,_raceOrder=0,_pos=0;var brName="br",raceName="race",tableName="tlbRunners";var i=0,tlb,br,racelabel,racehidden,_ckbBox;var _BetAmount=returnObjById("betAmount");var _BetAmountLabel=returnObjById("lblWagerAmount");var _tlbExoticInformation;var _tlbBetAmountInformation=returnObjById("dvTicketOptions");var _dvAddBetSlipStraight=returnObjById("dvAddBetSlipStraight");var _tlbParlayInformation=returnObjById("tlbParlayInformation");var _parlayPoolTypeSelected;currentPoolTypeIndex=poolIndex;currentPoolTypeId=$('#dvPools :input:checked')[0].id;currentRaceId=raceId;$('.sTdRaceButtons .sDvStatsButton').removeClass('sDvOpen');$('#dvPools .sDvInputPoolChecked').removeClass('sDvInputPoolChecked');$('#dvPools :input:checked').parent().addClass('sDvInputPoolChecked');_ckbBox=returnObjById("ckbBox");_ckbBoxKey=returnObjById("ckbBoxKey");_tlbExoticInformation=returnObjById("tlbExoticInformation");if(_tlbExoticInformation!==null){_tlbExoticInformation.style.display="";}
if(_tlbBetAmountInformation!==null){_tlbBetAmountInformation.style.display="none";_dvAddBetSlipStraight.style.display="";}
if(_tlbParlayInformation!==null){_tlbParlayInformation.style.display="none";}
_ckbBox.disabled=false;if((_WagerInfo.Races[raceId].Runners===null)||(raceId!=_WagerInfo.Races[currentRaceIndex].RaceId)){window.status="showRunners:: Wrong information. Please contact customer service.";return;}
currentPoolIndex=poolIndex;_WagerInfo.SetPoolIndex(poolIndex);var poolObj=_WagerInfo.PoolSelected();$('.sSpAddParlayNotAllow').addClass('sHideElement');$('.aSendBet').removeClass('sHideElement');$('.sSpAddBetCart').removeClass('sHideElement');$('.sAddBetSlipButtons').removeClass('sHideElement');$('.sSpAddBetCart').parent().removeClass('sDvButtonAddBetSlipOnlyText');if($('#_hdnParlayPoolTypeSelected').val()!='-1'&&_parlayType==ParlayType.MultiTrackNormal){_parlayPoolTypeSelected=parseInt($('#_hdnParlayPoolTypeSelected').val(),10);switch(_parlayPoolTypeSelected){case PoolType.WinParlay:case PoolType.PlaceParlay:case PoolType.ShowParlay:poolObj=_WagerInfo.PoolSelectedByPooltype($('#_hdnParlayPoolTypeSelected').val());break;case PoolType.WinPlaceParlay:poolObj=_WagerInfo.PoolSelectedByPooltype(PoolType.WinParlay);if(poolObj!==null&&_WagerInfo.PoolSelectedByPooltype(PoolType.PlaceParlay)===null){poolObj=null;}
break;case PoolType.WinShowParlay:poolObj=_WagerInfo.PoolSelectedByPooltype(PoolType.WinParlay);if(poolObj!==null&&_WagerInfo.PoolSelectedByPooltype(PoolType.ShowParlay)===null){poolObj=null;}
break;case PoolType.PlaceShowParlay:poolObj=_WagerInfo.PoolSelectedByPooltype(PoolType.PlaceParlay);if(poolObj!==null&&_WagerInfo.PoolSelectedByPooltype(PoolType.ShowParlay)===null){poolObj=null;}
break;case PoolType.WinPlaceShowParlay:poolObj=_WagerInfo.PoolSelectedByPooltype(PoolType.WinParlay);if(poolObj!==null&&_WagerInfo.PoolSelectedByPooltype(PoolType.PlaceParlay)&&_WagerInfo.PoolSelectedByPooltype(PoolType.ShowParlay)===null){poolObj=null;}
break;default:poolObj=null;break;}}
if(poolObj===null&&controlTicket!==undefined){$('.sSpAddParlayNotAllow').removeClass('sHideElement');$('.sSpAddBetCart').addClass('sHideElement');$('.aSendBet').addClass('sHideElement');$('.sSpAddBetCart').parent().removeClass('sDvButtonAddBetSlip');$('.sSpAddBetCart').parent().addClass('sDvButtonAddBetSlipOnlyText');if($('#_hdnParlayPoolTypeSelected').val()!='-1'&&_parlayType==ParlayType.MultiTrackNormal){_parlayPoolTypeSelected=parseInt($('#_hdnParlayPoolTypeSelected').val(),10);var messageError='';switch(_parlayPoolTypeSelected){case PoolType.WinParlay:case PoolType.PlaceParlay:case PoolType.ShowParlay:messageError=messages.lblParlayNotAllowRace;break;case PoolType.WinPlaceParlay:if(_WagerInfo.PoolSelectedByPooltype(PoolType.WinParlay)===null){messageError=messages.lblParlayNotAllowRace;}
if(_WagerInfo.PoolSelectedByPooltype(PoolType.PlaceParlay)===null){messageError=messages.lblParlayNotAllowRace;}
break;case PoolType.WinShowParlay:if(_WagerInfo.PoolSelectedByPooltype(PoolType.WinParlay)===null){messageError=messages.lblParlayNotAllowRace;}
if(_WagerInfo.PoolSelectedByPooltype(PoolType.ShowParlay)===null){messageError=messages.lblParlayNotAllowRace;}
break;case PoolType.PlaceShowParlay:if(_WagerInfo.PoolSelectedByPooltype(PoolType.PlaceParlay)===null){messageError=messages.lblParlayNotAllowRace;}
if(_WagerInfo.PoolSelectedByPooltype(PoolType.ShowParlay)===null){messageError=messages.lblParlayNotAllowRace;}
break;case PoolType.WinPlaceShowParlay:if(_WagerInfo.PoolSelectedByPooltype(PoolType.WinParlay)===null){messageError=messages.lblParlayNotAllowRace;}
if(_WagerInfo.PoolSelectedByPooltype(PoolType.PlaceParlay)===null){messageError=messages.lblParlayNotAllowRace;}
if(_WagerInfo.PoolSelectedByPooltype(PoolType.ShowParlay)===null){messageError=messages.lblParlayNotAllowRace;}
break;default:break;}
$('.sSpAddParlayNotAllow span').text(messageError);}}
if(poolObj===null&&controlTicket===undefined){alert("showRunners :: "+messages._1009);return;}
if(poolObj!==null){showPoolLimits(raceId);$('.sTdPoolLimits').removeClass('sHideElement');}
else{$('.sTdPoolLimits').addClass('sHideElement');}
_raceOrder=_WagerInfo.RaceByIndex().Order;if(poolObj!==null){hideRunnersTables();}
else{if(shoppingCart.IsEditMode()){hideRunnersTablesSize(1);poolSize=1;}}
ArrayBoxOptions=new Array();ArrayBoxInvalidOptions=new Array();if(poolObj!==null){poolSize=poolObj.Size;returnObjById("_PoolTypeOnClient").value=poolObj.Type;returnObjById("_PoolCodeOnClient").value=poolObj.Code;}
_BetAmountLabel.style.display="";_BetAmount.style.display="";_BetAmount.style.backgroundColor="";_tlbBetAmountInformation.style.display="";var _defaultBetAmount=returnObjById("_defaultBetAmount");var defaultToBet=0;var betAmount=0;var minimumToBet=0;var raceCondition=_WagerInfo.Races[raceId].Condition;if(poolObj!==null){switch(poolObj.Type){case PoolType.Straight:if(poolLimits.GetLimitInformation(PoolType.Win,raceCondition)!=undefined&&poolObj.AvailableWin){minimumToBet=poolLimits.GetLimitInformation(PoolType.Win,raceCondition)._Min;}
if(poolLimits.GetLimitInformation(PoolType.Place,raceCondition)!=undefined&&poolObj.AvailablePlace){minimumToBet=poolLimits.GetLimitInformation(PoolType.Place,raceCondition)._Min;}
if(poolLimits.GetLimitInformation(PoolType.Show,raceCondition)!=undefined&&poolObj.AvailableShow){minimumToBet=poolLimits.GetLimitInformation(PoolType.Show,raceCondition)._Min;}
break;case PoolType.Parlay:case PoolType.WinParlay:case PoolType.PlaceParlay:case PoolType.ShowParlay:if(poolObj.AvailableWin){if(poolLimits.GetLimitInformation(PoolType.WinParlay,raceCondition)!=undefined){minimumToBet=poolLimits.GetLimitInformation(PoolType.WinParlay,raceCondition)._Min;}}
if(poolObj.AvailablePlace){if(poolLimits.GetLimitInformation(PoolType.PlaceParlay,raceCondition)!=undefined){minimumToBet=poolLimits.GetLimitInformation(PoolType.PlaceParlay,raceCondition)._Min;}}
if(poolObj.AvailableShow){if(poolLimits.GetLimitInformation(PoolType.ShowParlay,raceCondition)!=undefined){minimumToBet=poolLimits.GetLimitInformation(PoolType.ShowParlay,raceCondition)._Min;}}
break;default:if(poolLimits.GetLimitInformation(poolObj.Code,raceCondition)!=undefined){minimumToBet=poolLimits.GetLimitInformation(poolObj.Code,raceCondition)._Min;}
break;}}
else{minimumToBet=0;}
if(controlTicket!==undefined&&controlTicket.GetTicketInformation()!==undefined){_BetAmount.value=controlTicket.GetTicketInformation().GetBetInformation().AmountToBet;}
else{if(_defaultBetAmount!==null){_BetAmount.value=parseFloat(_defaultBetAmount.value);}}
if(isNaN(_BetAmount.value)){betAmount=minimumToBet.toFixed(2);}
else{betAmount=parseFloat(_BetAmount.value);if(betAmount<minimumToBet){betAmount=minimumToBet.toFixed(2);}}
if(!showWagerInformation){if(!_useDefaultAmount){betAmount=0;}}
_BetAmount.value=betAmount;if(betAmount===0){_BetAmount.className="TextboxNumeric";}
else{_BetAmount.className="TextboxNumeric TextboxRaceStraightsWithAmount";}
var _divParlayRaces,_divWinParlay,_fieldSet1;_divParlayRaces=returnObjById("divParlayRaces");_divWinParlay=returnObjById("divWinParlay");if(_divParlayRaces){_divParlayRaces.style.display="none";}
if(_divWinParlay){_divWinParlay.style.display="none";}
$('#dvRaceInformationToBet').removeClass('sDvEnableRaceColumn');HiddenDiv('dvParlayDetailInformation');$('.bettingMode').removeClass('sDvStraightMode');$('.bettingMode').removeClass('sDvExoticMode');$('.bettingMode').removeClass('sDvParlayMode');if(poolObj!==null){switch(poolObj.Type){case PoolType.Straight:unCheckCheckbox(document.getElementById('dvCkbBox'));unCheckCheckbox(document.getElementById('dvCkbBoxKey'));_ckbBox.disabled=true;_BetAmountLabel.style.display="none";_BetAmount.style.display="none";_tlbBetAmountInformation.style.display="none";$('.bettingMode').addClass('sDvStraightMode');if(_tlbExoticInformation!==null){_tlbExoticInformation.style.display="none";}
showRunnersTable(raceId,poolObj.Type,'tlbRunners1');$('#dvParlayDetailInformation').html('');break;case PoolType.Quinella:case PoolType.Exacta:case PoolType.Trifecta:case PoolType.Superfecta:$('.bettingMode').addClass('sDvExoticMode');showRunnersTable(raceId,poolObj.Type,'tlbRunners1');poolSize=1;var ctrlBox=document.getElementById("ckbBox");if(ctrlBox.checked){setBox();}
$('#dvParlayDetailInformation').html('');break;case PoolType.DailyDouble:case PoolType.PickN:$('.bettingMode').addClass('sDvExoticMode');if(_tlbExoticInformation!==null){_tlbExoticInformation.style.display="none";}
$('#dvRaceInformationToBet').addClass('sDvEnableRaceColumn');unCheckCheckbox(document.getElementById('dvCkbBox'));_ckbBox.disabled=true;for(i=1;i<=poolSize;i++){_pos=i-1;if((_WagerInfo.Races[_WagerInfo.GetRaceIndex()+_pos]===null)||(_raceOrder+_pos!=_WagerInfo.Races[_WagerInfo.GetRaceIndex()+_pos].Order)){showErrorMessage(1007);return;}
_raceId=_WagerInfo.Races[_WagerInfo.GetRaceIndex()+_pos].RaceId;showRunnersTable(_raceId,poolObj.Type,tableName+i);if(i+1<=poolSize){ArrayBoxOptions[ArrayBoxOptions.length]=strSeparator;}}
$('#dvParlayDetailInformation').html('');break;case PoolType.Parlay:case PoolType.WinParlay:case PoolType.PlaceParlay:case PoolType.ShowParlay:$('.bettingMode').addClass('sDvParlayMode');lastSelectPoolTypeWasParlay=true;_BetAmountLabel.style.display="";switch(_parlayType){case ParlayType.MultiTrackNormal:case ParlayType.MultiTrackCombined:unCheckCheckbox(document.getElementById('dvCkbBox'));unCheckCheckbox(document.getElementById('dvCkbBoxKey'));_ckbBox.disabled=true;ShowDiv('dvParlayDetailInformation');if(_tlbExoticInformation!==null){_tlbExoticInformation.style.display="none";}
ShowBetParlay();break;}
ResetParlay();showRunnersTable(raceId,poolObj.Type,'tlbRunners1');poolSize=1;break;default:isValidWagerType=false;if(_tlbExoticInformation!==null){_tlbExoticInformation.style.display="none";}
break;}}
else{unCheckCheckbox(document.getElementById('dvCkbBox'));unCheckCheckbox(document.getElementById('dvCkbBoxKey'));_ckbBox.disabled=true;_BetAmountLabel.style.display="none";_BetAmount.style.display="none";_tlbBetAmountInformation.style.display="none";_dvAddBetSlipStraight.style.display="none";if(_tlbExoticInformation!==null){_tlbExoticInformation.style.display="none";}
showRunnersTable(raceId,PoolType.ParlayEmpty,'tlbRunners1');}
if(!isValidWagerType){return;}
for(i=1;i<=poolSize;i++){tlb=returnObjById(tableName+i);br=returnObjById(brName+i);racelabel=returnObjById(raceName+i);if((br!==null)&&(racelabel!==null)){_raceId=_WagerInfo.Races[_WagerInfo.GetRaceIndex()+i-1].RaceId;tlb.style.display='';$(br).removeClass('sHideElement');racelabel.style.display='';racelabel.innerHTML=messages.lblHorseRace+" "+_WagerInfo.Races[_raceId].Code.match(/\d/g).join("");if(_WagerInfo.Races[_raceId].Comment!==''){$(br).find('.sTrRaceComment td').html('');$(br).find('.sTrRaceComment').addClass('sTrRaceHasComment');$(br).find('.sTrRaceComment td').append($("<span>\""+_WagerInfo.Races[_raceId].Comment+"\"</span>"));}
else{$(br).find('.sTrRaceComment').removeClass('sTrRaceHasComment');}}}
$('.sDvPPsIcon').off();$('.sDvPPsIcon').click(function(){var id=$(this).attr('idRef');if(!$('#'+id+'_stats').hasClass('sHideElement')){$('#'+id+'_stats').find('> td > div').slideUp({start:function(){$(this).css('display','block');},complete:function(){$(this).parent().parent().addClass('sHideElement');}});$(this).removeClass('sDvOpen');}
else{$('#'+id+'_stats').find('> td > div').slideDown({start:function(){$(this).parent().parent().removeClass('sHideElement');},complete:function(){if(!isFromToggle){AddActivityPlayer("1");}
loadGraphicsRunner(id);$(this).css('display','table');}});$(this).addClass('sDvOpen');}
StatsActionReverse(id);});GenerateTotalCombination();}}
async function loadGraphicsRunner(refIdLoad){await drawGraphicsRunner(refIdLoad);}
function drawGraphicsRunner(refIdLoad){return new Promise(resolve=>{setTimeout(()=>{let idGraphic=refIdLoad+'_stats';let grpBorder=getComputedStyle(document.documentElement).getPropertyValue('--graphic-border').trim();let grpfont=getComputedStyle(document.documentElement).getPropertyValue('--graphic-font').trim();if($("#"+idGraphic+" canvas").length===0){$("#"+idGraphic+" > td > div").each(function(){let tblHeight=parseFloat($(this).find('table').outerHeight(true));let tblWidth=parseFloat($(this).find('.sDvStatsGraphic').outerWidth(true));tblHeight=tblHeight<100?100:tblHeight-5;let divId=$(this).find('.sDvStatsGraphic > div').attr('id');let raceRef=parseInt(divId.split('_')[1],10);let tableName=divId.replace("dvGraphic_"+divId.split('_')[1],"");let ref=tableName.split('_')[2]+"_"+tableName.split('_')[3];$(this).find('.sDvStatsGraphic  > div').append("<canvas id=\"cv"+divId+"\" width=\""+tblWidth+"\" height=\""+tblHeight+"\"></canvas>");showRunnerGraphic(raceRef,"cv"+divId,ref,grpBorder,grpfont);$(this).css('height',$(this).outerHeight(true)+'px');});}},200);});}
function setDescriptionPool(poolType){switch(poolType){case PoolType.Straight:if(messages.lblPoolDescriptionStraight!=''){$('#descriptionPool').text(messages.lblPoolDescriptionStraight);$('#descriptionPool').show();}
break;case PoolType.Quinella:if(messages.lblPoolDescriptionQuinella!=''){$('#descriptionPool').text(messages.lblPoolDescriptionQuinella);$('#descriptionPool').show();}
break;case PoolType.Exacta:if(messages.lblPoolDescriptionExacta!=''){$('#descriptionPool').text(messages.lblPoolDescriptionExacta);$('#descriptionPool').show();}
break;case PoolType.Trifecta:if(messages.lblPoolDescriptionTrifecta!=''){$('#descriptionPool').text(messages.lblPoolDescriptionTrifecta);$('#descriptionPool').show();}
break;case PoolType.Superfecta:if(messages.lblPoolDescriptionSuperfecta!=''){$('#descriptionPool').text(messages.lblPoolDescriptionSuperfecta);$('#descriptionPool').show();}
break;case PoolType.DailyDouble:if(messages.lblPoolDescriptionDailyDouble!=''){$('#descriptionPool').text(messages.lblPoolDescriptionDailyDouble);$('#descriptionPool').show();}
break;case PoolType.PickN:if(messages.lblPoolDescriptionPick!=''){$('#descriptionPool').text(messages.lblPoolDescriptionPick);$('#descriptionPool').show();}
break;case PoolType.Parlay:case PoolType.WinParlay:case PoolType.PlaceParlay:case PoolType.ShowParlay:case PoolType.ParlayEmpty:if(messages.lblPoolDescriptionParlay!=''){$('#descriptionPool').text(messages.lblPoolDescriptionParlay);$('#descriptionPool').show();}
if($('#_hdnParlayPoolTypeSelected').val()!='-1'&&_parlayType==ParlayType.MultiTrackNormal){var _parlayPoolTypeSelected=parseInt($('#_hdnParlayPoolTypeSelected').val(),10);if(_parlayPoolTypeSelected==PoolType.WinParlay){$('#descriptionPool').text(messages.lblPoolDescriptionParlay+' '+messages.lblPoolDescriptionParlayWin);}
if(_parlayPoolTypeSelected==PoolType.PlaceParlay){$('#descriptionPool').text(messages.lblPoolDescriptionParlay+' '+messages.lblPoolDescriptionParlayPlace);}
if(_parlayPoolTypeSelected==PoolType.ShowParlay){$('#descriptionPool').text(messages.lblPoolDescriptionParlay+' '+messages.lblPoolDescriptionParlayShow);}
if(_parlayPoolTypeSelected==PoolType.WinPlaceParlay){$('#descriptionPool').text(messages.lblPoolDescriptionParlay+' '+messages.lblPoolDescriptionParlayW_P);}
if(_parlayPoolTypeSelected==PoolType.WinShowParlay){$('#descriptionPool').text(messages.lblPoolDescriptionParlay+' '+messages.lblPoolDescriptionParlayW_S);}
if(_parlayPoolTypeSelected==PoolType.PlaceShowParlay){$('#descriptionPool').text(messages.lblPoolDescriptionParlay+' '+messages.lblPoolDescriptionParlayP_S);}
if(_parlayPoolTypeSelected==PoolType.WinPlaceShowParlay){$('#descriptionPool').text(messages.lblPoolDescriptionParlay+' '+messages.lblPoolDescriptionParlayW_P_S);}
$('#descriptionPool').show();}
break;default:$('#descriptionPool').text('');$('#descriptionPool').hide();break;}}
function showRunnersTable(raceId,poolType,tableName){let timeS=Date.now();setDescriptionPool(poolType);let validHorseList=new Array();let wasAdded=false,isValidEntryLetter=false;let index=0,lastPN="";let _totalColumns=10;let _totalColumnsHidden=0;let tlbRunners=returnObjById(tableName);let cellStr="",cellStr1="",cellStr2="",cellStr3="",cellStr4="";let name1="",name2="",name3="",name4="";let programNumber="",programLetter="";let i=0,pos=-1,posInValid=-1;let isAlternating=false;let controlType="checkbox";let aRow,aCell,aCellDivInput,dvTemp,dvTemp2,aCellMainRunner;let rowCells=new Array(_totalColumns);if(tlbRunners===null){alert("showRunnersTable :: "+messages._1007);return;}
for(let c=0;c<arrayChars.length;c++){arrayChars[c].destroy();}
$(tlbRunners).html('');arrayChars=new Array();if(_WagerInfo.Races[raceId].HasStats){_totalColumns=11;}
SetToggleComment(tlbRunners,false);var header=tlbRunners.createTHead();aRow=header.insertRow(-1);aRow.className='sTrRaceHeader';for(let j=0;j<_totalColumns;j++){rowCells[j]=aRow.insertCell(-1);}
var poolObj=_WagerInfo.PoolSelected();var raceCondition=_WagerInfo.Races[raceId].Condition;switch(poolType){case PoolType.Straight:rowCells[0].className="sTdRaceStringWinInformation";rowCells[1].className="sTdRaceStringPlaceInformation";rowCells[2].className="sTdRaceStringShowInformation";$('#descriptionPool').text(messages.lblPoolDescriptionStraight);if(poolLimits.GetLimitInformation(PoolType.Win,raceCondition)!=undefined&&poolObj.AvailableWin){rowCells[0].innerHTML=messages.lblWin;$('#descriptionPool').text($('#descriptionPool').text()+messages.lblPoolDescriptionWin);}
else{rowCells[0].style.display='none';}
if(poolLimits.GetLimitInformation(PoolType.Place,raceCondition)!=undefined&&poolObj.AvailablePlace){rowCells[1].innerHTML=messages.lblPlace;$('#descriptionPool').text($('#descriptionPool').text()+' '+messages.lblPoolDescriptionPlace);}else{rowCells[1].style.display='none';}
if(poolLimits.GetLimitInformation(PoolType.Show,raceCondition)!=undefined&&poolObj.AvailableShow){rowCells[2].innerHTML=messages.lblShow;$('#descriptionPool').text($('#descriptionPool').text()+' '+messages.lblPoolDescriptionShow);}
else{rowCells[2].style.display='none';}
rowCells[3].className="sHideElement";if(isMobile.any()){controlType="number";}
else{controlType="text";}
_totalColumnsHidden=1;break;case PoolType.Quinella:case PoolType.Exacta:rowCells[0].className="sTdRaceExtoticInformation";rowCells[0].innerHTML="1&#176;<br/><div id='dvCkbBox_0' class='checkBoxUnChecked' onclick='checkOrUnCheckCheckbox(this);SetBoxAllLine(this, 0);GenerateTotalCombination();'><input id='ckbBox_0' type='checkbox'/></div>";rowCells[1].className="sTdRaceExtoticInformation";rowCells[1].innerHTML="<span class='sSpNormalSelection'>2&#176;</span><br/><div id='dvCkbBox_1' class='checkBoxUnChecked' onclick='checkOrUnCheckCheckbox(this);SetBoxAllLine(this, 1);GenerateTotalCombination();'><input id='ckbBox_1' type='checkbox'/></div>";rowCells[2].innerHTML="";rowCells[2].className="sHideElement";rowCells[3].innerHTML="";rowCells[3].className="sHideElement";_totalColumnsHidden=2;break;case PoolType.Trifecta:rowCells[0].className="sTdRaceExtoticInformation";rowCells[0].innerHTML="1&#176;<br/><div id='dvCkbBox_0' class='checkBoxUnChecked' onclick='checkOrUnCheckCheckbox(this);SetBoxAllLine(this, 0);GenerateTotalCombination();'><input id='ckbBox_0' type='checkbox'/></div>";rowCells[1].className="sTdRaceExtoticInformation";rowCells[1].innerHTML="<span class='sSpNormalSelection'>2&#176;</span><br/><div id='dvCkbBox_1' class='checkBoxUnChecked' onclick='checkOrUnCheckCheckbox(this);SetBoxAllLine(this, 1);GenerateTotalCombination();'><input id='ckbBox_1' type='checkbox'/></div>";rowCells[2].className="sTdRaceExtoticInformation";rowCells[2].innerHTML="<span class='sSpNormalSelection'>3&#176;</span><br/><div id='dvCkbBox_2' class='checkBoxUnChecked' onclick='checkOrUnCheckCheckbox(this);SetBoxAllLine(this, 2);GenerateTotalCombination();'><input id='ckbBox_2' type='checkbox'/></div>";rowCells[3].innerHTML="";rowCells[3].className="sHideElement";_totalColumnsHidden=1;break;case PoolType.Superfecta:rowCells[0].className="sTdRaceExtoticInformation";rowCells[0].innerHTML="1&#176;<br/><div id='dvCkbBox_0' class='checkBoxUnChecked' onclick='checkOrUnCheckCheckbox(this);SetBoxAllLine(this, 0);GenerateTotalCombination();'><input id='ckbBox_0' type='checkbox'/></div>";rowCells[1].className="sTdRaceExtoticInformation";rowCells[1].innerHTML="<span class='sSpNormalSelection'>2&#176;</span><br/><div id='dvCkbBox_1' class='checkBoxUnChecked' onclick='checkOrUnCheckCheckbox(this);SetBoxAllLine(this, 1);GenerateTotalCombination();'><input id='ckbBox_1' type='checkbox'/></div>";rowCells[2].className="sTdRaceExtoticInformation";rowCells[2].innerHTML="<span class='sSpNormalSelection'>3&#176;</span><br/><div id='dvCkbBox_2' class='checkBoxUnChecked' onclick='checkOrUnCheckCheckbox(this);SetBoxAllLine(this, 2);GenerateTotalCombination();'><input id='ckbBox_2' type='checkbox'/></div>";rowCells[3].className="sTdRaceExtoticInformation";rowCells[3].innerHTML="<span class='sSpNormalSelection'>4&#176;</span><br/><div id='dvCkbBox_3' class='checkBoxUnChecked' onclick='checkOrUnCheckCheckbox(this);SetBoxAllLine(this, 3);GenerateTotalCombination();'><input id='ckbBox_3' type='checkbox'/></div>";break;case PoolType.DailyDouble:case PoolType.PickN:var newIdChk='dvCkbBox_'+tableName;rowCells[0].className="sTdRaceExtoticInformation";rowCells[0].innerHTML="1&#176;<br/><div id=\""+newIdChk+"\" class='checkBoxUnChecked' onclick='checkOrUnCheckCheckbox(this);SetBoxAllLinePick(this,\""+tableName+"\");GenerateTotalCombination();'><input id='ckbBox_\""+tableName+"\"' type='checkbox'/></div>";rowCells[1].innerHTML="";rowCells[1].className="sHideElement";rowCells[2].innerHTML="";rowCells[2].className="sHideElement";rowCells[3].innerHTML="";rowCells[3].className="sHideElement";_totalColumnsHidden=3;break;case PoolType.Parlay:case PoolType.WinParlay:case PoolType.PlaceParlay:case PoolType.ShowParlay:switch(_parlayType){case ParlayType.Normal:case ParlayType.Combined:if(poolObj.AvailableWin){rowCells[0].className="sTdRaceExtoticInformation";rowCells[0].innerHTML=messages.lblWin;}
if(poolObj.AvailablePlace){rowCells[1].className="sTdRaceExtoticInformation";rowCells[1].innerHTML=messages.lblPlace;}
if(poolObj.AvailableShow){rowCells[2].className="sTdRaceExtoticInformation";rowCells[2].innerHTML=messages.lblShow;}
rowCells[3].className="sTdRaceExtoticInformation";rowCells[3].innerHTML="";break;case ParlayType.MultiTrackNormal:rowCells[0].className="sTdRaceExtoticInformation";if($('#_hdnParlayPoolTypeSelected').val()!='-1'&&_parlayType==ParlayType.MultiTrackNormal){let _parlayPoolTypeSelected=parseInt($('#_hdnParlayPoolTypeSelected').val(),10);if(_parlayPoolTypeSelected==PoolType.WinParlay){rowCells[0].innerHTML=messages.lblWin;}
if(_parlayPoolTypeSelected==PoolType.PlaceParlay){rowCells[0].innerHTML=messages.lblPlace;}
if(_parlayPoolTypeSelected==PoolType.ShowParlay){rowCells[0].innerHTML=messages.lblShow;}
if(_parlayPoolTypeSelected==PoolType.WinPlaceParlay){rowCells[0].innerHTML='W/P';}
if(_parlayPoolTypeSelected==PoolType.WinShowParlay){rowCells[0].innerHTML='W/S';}
if(_parlayPoolTypeSelected==PoolType.PlaceShowParlay){rowCells[0].innerHTML='P/S';}
if(_parlayPoolTypeSelected==PoolType.WinPlaceShowParlay){rowCells[0].innerHTML='W/P/S';}}
rowCells[1].className="sHideElement";rowCells[2].innerHTML="";rowCells[2].className="sHideElement";rowCells[3].innerHTML="";rowCells[3].className="sHideElement";_totalColumnsHidden=3;break;case ParlayType.MultiTrackCombined:if(poolObj.AvailableWin){rowCells[0].className="sTdRaceExtoticInformation";rowCells[0].innerHTML=messages.lblWin;}
else{rowCells[0].className="sHideElement";_totalColumnsHidden++;}
if(poolObj.AvailablePlace){rowCells[1].className="sTdRaceExtoticInformation";rowCells[1].innerHTML=messages.lblPlace;}
else{rowCells[1].className="sHideElement";_totalColumnsHidden++;}
if(poolObj.AvailableShow){rowCells[2].className="sTdRaceExtoticInformation";rowCells[2].innerHTML=messages.lblShow;}
else{rowCells[2].className="sHideElement";_totalColumnsHidden++;}
rowCells[3].className="sHideElement";_totalColumnsHidden++;break;}
break;case PoolType.ParlayEmpty:switch(_parlayType){case ParlayType.MultiTrackNormal:rowCells[0].className="sTdRaceExtoticInformation";if($('#_hdnParlayPoolTypeSelected').val()==PoolType.WinParlay){rowCells[0].innerHTML=messages.lblWin;}
if($('#_hdnParlayPoolTypeSelected').val()==PoolType.PlaceParlay){rowCells[0].innerHTML=messages.lblPlace;}
if($('#_hdnParlayPoolTypeSelected').val()==PoolType.ShowParlay){rowCells[0].innerHTML=messages.lblShow;}
rowCells[1].className="sHideElement";rowCells[2].innerHTML="";rowCells[2].className="sHideElement";rowCells[3].innerHTML="";rowCells[3].className="sHideElement";_totalColumnsHidden=3;break;case ParlayType.MultiTrackCombined:if(_WagerInfo.PoolSelectedByPooltype(PoolType.Straight).AvailableWin){rowCells[0].className="sTdRaceExtoticInformation";rowCells[0].innerHTML=messages.lblWin;}
else{rowCells[0].className="sHideElement";_totalColumnsHidden++;}
if(_WagerInfo.PoolSelectedByPooltype(PoolType.Straight).AvailablePlace){rowCells[1].className="sTdRaceExtoticInformation";rowCells[1].innerHTML=messages.lblPlace;}
else{rowCells[1].className="sHideElement";_totalColumnsHidden++;}
if(_WagerInfo.PoolSelectedByPooltype(PoolType.Straight).AvailableShow){rowCells[2].className="sTdRaceExtoticInformation";rowCells[2].innerHTML=messages.lblShow;}
else{rowCells[2].className="sHideElement";_totalColumnsHidden++;}
rowCells[3].className="sHideElement";_totalColumnsHidden++;break;}
break;}
rowCells[4].className="sTdRaceProgramNumberInformation";rowCells[4].innerHTML="PN";rowCells[5].className='sTdRaceMorningLineInformation';rowCells[5].innerHTML=messages.lblMorningLine;if(_WagerInfo.Races[raceId].HasStats){rowCells[6].className="sTdRaceRunnerDriverInformation";rowCells[6].innerHTML="<div>"+messages.lblRunner+"</div>"+"<div class=\"sDvInformationIcon\"> <div class=\"tooltip\"><span class=\"tooltiptext tooltiptextRunner\">"+messages.lblMsgInfoStatsRunner+"</span></div > </div>";rowCells[7].className="sTdRaceRunnerRiderInformation";if(_TrackType==="GYN"){rowCells[7].innerHTML="<div>"+messages.lblKennel+"</div>"+"<div class=\"sDvInformationIcon\"><div class=\"tooltip\"><span class=\"tooltiptext\">"+messages.lblMsgInfoStatsJockey+"</span></div ></div>";}
else{rowCells[7].innerHTML="<div>"+messages.lblJockey+"</div>"+"<div class=\"sDvInformationIcon\"><div class=\"tooltip\"><span class=\"tooltiptext\">"+messages.lblMsgInfoStatsJockey+"</span></div ></div>";}
rowCells[8].className="sTdRaceTrainerInformation";rowCells[8].innerHTML="<div>"+messages.lblTrainer+"</div>"+"<div class=\"sDvInformationIcon\"><div class=\"tooltip\"><span class=\"tooltiptext\">"+messages.lblMsgInfoStatsTrainer+" </span></div ></div>";rowCells[9].className='sTdRaceMedicationWeightInformation';rowCells[9].innerHTML="<div class=\"sDvMedicationWeightTitle\">"+messages.lblMedicationWeight+"</div><div class=\"sDvMedicationWeightTitleTablet\">"+messages.lblMedicationWeightTable+"</div><div class=\"sDvMedicationWeightTitleMobile\">"+messages.lblMorningLineMedicationWeightLetter+"</div>";rowCells[10].className="sTdRacePPInformation";rowCells[10].innerHTML=messages.lblPP;}
else{rowCells[6].className="sTdRaceRunnerJockeyInformation";if(_TrackType=="GYN"){rowCells[6].innerHTML="<div class=\"sDvMedicationWeightTitle\">"+messages.lblKennel+"</div><div class=\"sDvMedicationWeightTitleMobile\">"+messages.lblHorseJockeyGreyhound+"</div>";}
else{rowCells[6].innerHTML="<div class=\"sDvRunnerJockeyTitle\">"+messages.lblRunner+"</div><div class=\"sDvRunnerJockeyTitleMobile\">"+messages.lblHorseJockey+"</div>";}
rowCells[7].className="sTdRaceRunnerRiderInformation";if(_TrackType==="GYN"){rowCells[7].innerHTML="<div>"+messages.lblKennel+"</div>"+"<div class=\"\"><div></div></div>";}
else{rowCells[7].innerHTML="<div>"+messages.lblJockey+"</div>"+"<div class=\"\"><div></div></div>";}
rowCells[8].className="sTdRaceTrainerInformation";rowCells[8].innerHTML=messages.lblTrainer;rowCells[9].className="sTdRaceMedicationWeightInformation";rowCells[9].innerHTML="<div class=\"sDvMedicationWeightTitle\">"+messages.lblMedicationWeight+"</div><div class=\"sDvMedicationWeightTitleTablet\">"+messages.lblMedicationWeightTable+"</div><div class=\"sDvMedicationWeightTitleMobile\">"+messages.lblMorningLineMedicationWeightLetter+"</div>";}
if(_WagerInfo.Races[raceId].Runners===null)
return;i=0;while(i<_WagerInfo.Races[raceId].Runners.length){wasAdded=false;lastPN=_WagerInfo.Races[raceId].Runners[i].ProgramNumber;while((i<_WagerInfo.Races[raceId].Runners.length)&&(lastPN==_WagerInfo.Races[raceId].Runners[i].ProgramNumber)){if(!wasAdded&&!_WagerInfo.Races[raceId].Runners[i].Scratch){validHorseList[index]=new Object();validHorseList[index].ProgramNumber=lastPN;validHorseList[index].ProgramLetter=_WagerInfo.Races[raceId].Runners[i].ProgramLetter;index++;wasAdded=true;}
i++;}}
let mybody=tlbRunners.createTBody();for(let i=0;i<_WagerInfo.Races[raceId].Runners.length;i++){aRow=mybody.insertRow(-1);rowCells=new Array(_totalColumns);for(let j=0;j<_totalColumns;j++){rowCells[j]=aRow.insertCell(-1);}
isValidEntryLetter=false;programNumber=_WagerInfo.Races[raceId].Runners[i].ProgramNumber;programLetter=_WagerInfo.Races[raceId].Runners[i].ProgramLetter;for(let j=0;j<validHorseList.length;j++){if((validHorseList[j].ProgramNumber==programNumber)&&(validHorseList[j].ProgramLetter==programLetter)){isValidEntryLetter=true;break;}}
if(isValidEntryLetter){name1=tableName+"_ckb1__"+programNumber;name2=tableName+"_ckb2__"+programNumber;name3=tableName+"_ckb3__"+programNumber;name4=tableName+"_ckb4__"+programNumber;}
else{name1=tableName+"_ckb1__"+programNumber+"_InvalidEntry";name2=tableName+"_ckb2__"+programNumber+"_InvalidEntry";name3=tableName+"_ckb3__"+programNumber+"_InvalidEntry";name4=tableName+"_ckb4__"+programNumber+"_InvalidEntry";}
programNumber+=programLetter;cellStr1=document.createElement("input");cellStr1.name=name1;cellStr1.id=name1;cellStr1.value="on";cellStr1.autocomplete="off";cellStr2=document.createElement("input");cellStr2.name=name2;cellStr2.id=name2;cellStr2.value="on";cellStr2.autocomplete="off";cellStr3=document.createElement("input");cellStr3.name=name3;cellStr3.id=name3;cellStr3.value="on";cellStr3.autocomplete="off";cellStr4=document.createElement("input");cellStr4.name=name4;cellStr4.id=name4;cellStr4.value="on";cellStr4.autocomplete="off";if(controlType!="checkbox"){cellStr1.className="TextboxRaceStraights";cellStr2.className="TextboxRaceStraights";cellStr3.className="TextboxRaceStraights";cellStr4.className="TextboxRaceStraights";cellStr1.size=3;cellStr2.size=3;cellStr3.size=3;cellStr4.size=3;cellStr1.value="";cellStr2.value="";cellStr3.value="";cellStr4.value="";$(cellStr1).on("click",function(){$(this).select();});$(cellStr2).on("click",function(){$(this).select();});$(cellStr3).on("click",function(){$(this).select();});$(cellStr4).on("click",function(){$(this).select();});$(cellStr1).on("input",function(){checkInputValue(this);});$(cellStr2).on("input",function(){checkInputValue(this);});$(cellStr3).on("input",function(){checkInputValue(this);});$(cellStr4).on("input",function(){checkInputValue(this);});}
if(isMacintosh){cellStr1.type=controlType;cellStr2.type=controlType;cellStr3.type=controlType;cellStr4.type=controlType;}
else{cellStr1.type=controlType;cellStr2.type=controlType;cellStr3.type=controlType;cellStr4.type=controlType;}
if(!isValidEntryLetter){cellStr1.disabled=true;cellStr2.disabled=true;cellStr3.disabled=true;cellStr4.disabled=true;posInValid++;switch(poolType){case PoolType.Quinella:case PoolType.Exacta:ArrayBoxInvalidOptions[pos]=new Array(name1,name2);break;case PoolType.Trifecta:ArrayBoxInvalidOptions[pos]=new Array(name1,name2,name3);break;case PoolType.Superfecta:ArrayBoxInvalidOptions[pos]=new Array(name1,name2,name3,name4);break;default:break;}}
else{pos++;switch(poolType){case PoolType.Straight:ArrayBoxOptions[pos]=new Array(name1,name2,name3);break;case PoolType.Quinella:case PoolType.Exacta:ArrayBoxOptions[pos]=new Array(name1,name2);break;case PoolType.Trifecta:ArrayBoxOptions[pos]=new Array(name1,name2,name3);break;case PoolType.Superfecta:ArrayBoxOptions[pos]=new Array(name1,name2,name3,name4);break;case PoolType.DailyDouble:case PoolType.PickN:ArrayBoxOptions[ArrayBoxOptions.length]=name1;break;case PoolType.Parlay:case PoolType.WinParlay:case PoolType.PlaceParlay:case PoolType.ShowParlay:case PoolType.ParlayEmpty:ArrayBoxOptions[pos]=new Array(name1,name2,name3);break;}}
if(poolType==PoolType.Straight){rowCells[0].className="sTdRaceStringWinInformation";rowCells[1].className="sTdRaceStringPlaceInformation";rowCells[2].className="sTdRaceStringShowInformation";rowCells[3].className="sTdRaceStringShowInformation";}
else{rowCells[0].className="sTdRaceExtoticInformation";rowCells[1].className="sTdRaceExtoticInformation";rowCells[2].className="sTdRaceExtoticInformation";rowCells[3].className="sTdRaceExtoticInformation";}
rowCells[4].className="sTdRaceProgramNumberInformation";rowCells[5].className="sTdRaceMorningLineInformation";if(_WagerInfo.Races[raceId].HasStats){rowCells[6].className="sTdRaceRunnerDriverInformation";rowCells[7].className="sTdRaceRunnerRiderInformation";rowCells[8].className="sTdRaceTrainerInformation";rowCells[9].className="sTdRaceMedicationWeightInformation";rowCells[10].className="sTdRacePPInformation";}
else{rowCells[6].className="sTdRaceRunnerJockeyInformation";rowCells[7].className="sTdRaceRunnerRiderInformation";rowCells[8].className="sTdRaceTrainerInformation";rowCells[9].className="sTdRaceWeightInformation";}
if(!_WagerInfo.Races[raceId].Runners[i].Scratch){switch(poolType){case PoolType.Straight:if(poolLimits.GetLimitInformation(PoolType.Win,raceCondition)!=undefined&&poolObj.AvailableWin){rowCells[0].appendChild(cellStr1);cellStr1.onkeydown=enterKeyBet;}
else{rowCells[0].style.display='none';}
if(poolLimits.GetLimitInformation(PoolType.Place,raceCondition)!=undefined&&poolObj.AvailablePlace){rowCells[1].appendChild(cellStr2);cellStr2.onkeydown=enterKeyBet;}else{rowCells[1].style.display='none';}
if(poolLimits.GetLimitInformation(PoolType.Show,raceCondition)!=undefined&&poolObj.AvailableShow){rowCells[2].appendChild(cellStr3);cellStr3.onkeydown=enterKeyBet;}else{rowCells[2].style.display='none';}
rowCells[3].className="sHideElement";cellStr4="";break;case PoolType.Quinella:case PoolType.Exacta:aCellDivInput=document.createElement("div");aCellDivInput.id='dv'+cellStr1.id;aCellDivInput.className='checkBoxUnChecked';aCellDivInput.onclick=function(){checkOrUnCheckCheckbox(this);GenerateTotalCombination();};aCellDivInput.appendChild(cellStr1);rowCells[0].appendChild(aCellDivInput);aCellDivInput=document.createElement("div");aCellDivInput.id='dv'+cellStr2.id;aCellDivInput.className='checkBoxUnChecked';aCellDivInput.onclick=function(){checkOrUnCheckCheckbox(this);GenerateTotalCombination();};aCellDivInput.appendChild(cellStr2);rowCells[1].appendChild(aCellDivInput);rowCells[2].className="sHideElement";rowCells[3].className="sHideElement";cellStr3="";cellStr4="";break;case PoolType.Trifecta:aCellDivInput=document.createElement("div");aCellDivInput.id='dv'+cellStr1.id;aCellDivInput.className='checkBoxUnChecked';aCellDivInput.onclick=function(){checkOrUnCheckCheckbox(this);GenerateTotalCombination();};aCellDivInput.appendChild(cellStr1);rowCells[0].appendChild(aCellDivInput);aCellDivInput=document.createElement("div");aCellDivInput.id='dv'+cellStr2.id;aCellDivInput.className='checkBoxUnChecked';aCellDivInput.onclick=function(){checkOrUnCheckCheckbox(this);GenerateTotalCombination();};aCellDivInput.appendChild(cellStr2);rowCells[1].appendChild(aCellDivInput);aCellDivInput=document.createElement("div");aCellDivInput.id='dv'+cellStr3.id;aCellDivInput.className='checkBoxUnChecked';aCellDivInput.onclick=function(){checkOrUnCheckCheckbox(this);GenerateTotalCombination();};aCellDivInput.appendChild(cellStr3);rowCells[2].appendChild(aCellDivInput);rowCells[3].className="sHideElement";cellStr4="";break;case PoolType.Superfecta:aCellDivInput=document.createElement("div");aCellDivInput.id='dv'+cellStr1.id;aCellDivInput.className='checkBoxUnChecked';aCellDivInput.onclick=function(){checkOrUnCheckCheckbox(this);GenerateTotalCombination();};aCellDivInput.appendChild(cellStr1);rowCells[0].appendChild(aCellDivInput);aCellDivInput=document.createElement("div");aCellDivInput.id='dv'+cellStr2.id;aCellDivInput.className='checkBoxUnChecked';aCellDivInput.onclick=function(){checkOrUnCheckCheckbox(this);GenerateTotalCombination();};aCellDivInput.appendChild(cellStr2);rowCells[1].appendChild(aCellDivInput);aCellDivInput=document.createElement("div");aCellDivInput.id='dv'+cellStr3.id;aCellDivInput.className='checkBoxUnChecked';aCellDivInput.onclick=function(){checkOrUnCheckCheckbox(this);GenerateTotalCombination();};aCellDivInput.appendChild(cellStr3);rowCells[2].appendChild(aCellDivInput);aCellDivInput=document.createElement("div");aCellDivInput.id='dv'+cellStr4.id;aCellDivInput.className='checkBoxUnChecked';aCellDivInput.onclick=function(){checkOrUnCheckCheckbox(this);GenerateTotalCombination();};aCellDivInput.appendChild(cellStr4);rowCells[3].appendChild(aCellDivInput);break;case PoolType.DailyDouble:case PoolType.PickN:aCellDivInput=document.createElement("div");aCellDivInput.id='dv'+cellStr1.id;aCellDivInput.className='checkBoxUnChecked';aCellDivInput.onclick=function(){checkOrUnCheckCheckbox(this);GenerateTotalCombination();};aCellDivInput.appendChild(cellStr1);rowCells[0].appendChild(aCellDivInput);rowCells[1].className="sHideElement";rowCells[2].className="sHideElement";rowCells[3].className="sHideElement";cellStr2="";cellStr3="";cellStr4="";break;case PoolType.Parlay:case PoolType.WinParlay:case PoolType.PlaceParlay:case PoolType.ShowParlay:switch(_parlayType){case ParlayType.Normal:case ParlayType.Combined:case ParlayType.MultiTrackCombined:if(poolObj.AvailableWin){aCellDivInput=document.createElement("div");aCellDivInput.id='dv'+cellStr1.id;aCellDivInput.className='checkBoxUnChecked';aCellDivInput.onclick=function(){CheckOnlyOneInAllLine(this,0);};aCellDivInput.appendChild(cellStr1);rowCells[0].appendChild(aCellDivInput);}
else{rowCells[0].className="sHideElement";}
if(poolObj.AvailablePlace&&controlType=="checkbox"){aCellDivInput=document.createElement("div");aCellDivInput.id='dv'+cellStr2.id;aCellDivInput.className='checkBoxUnChecked';aCellDivInput.onclick=function(){CheckOnlyOneInAllLine(this,1);};aCellDivInput.appendChild(cellStr2);rowCells[1].appendChild(aCellDivInput);}
else{rowCells[1].className="sHideElement";}
if(poolObj.AvailableShow&&controlType=="checkbox"){aCellDivInput=document.createElement("div");aCellDivInput.id='dv'+cellStr3.id;aCellDivInput.className='checkBoxUnChecked';aCellDivInput.onclick=function(){CheckOnlyOneInAllLine(this,2);};aCellDivInput.appendChild(cellStr3);rowCells[2].appendChild(aCellDivInput);}
else{rowCells[2].className="sHideElement";}
rowCells[3].className="sHideElement";cellStr4="";break;case ParlayType.MultiTrackNormal:aCellDivInput=document.createElement("div");aCellDivInput.id='dv'+cellStr1.id;aCellDivInput.className='checkBoxUnChecked';let _parlayPoolTypeSelected=parseInt($('#_hdnParlayPoolTypeSelected').val(),10);if(_parlayPoolTypeSelected==PoolType.WinParlay){aCellDivInput.onclick=function(){CheckOnlyOneInAllLine(this,0);};aCellDivInput.appendChild(cellStr1);}
if(_parlayPoolTypeSelected==PoolType.PlaceParlay){aCellDivInput.onclick=function(){CheckOnlyOneInAllLine(this,1);};aCellDivInput.appendChild(cellStr2);}
if(_parlayPoolTypeSelected==PoolType.ShowParlay){aCellDivInput.onclick=function(){CheckOnlyOneInAllLine(this,2);};aCellDivInput.appendChild(cellStr3);}
if(_parlayPoolTypeSelected==PoolType.WinPlaceParlay){aCellDivInput.onclick=function(){CheckOnlyOneInAllLine(this,0);};aCellDivInput.appendChild(cellStr1);}
if(_parlayPoolTypeSelected==PoolType.WinShowParlay){aCellDivInput.onclick=function(){CheckOnlyOneInAllLine(this,0);};aCellDivInput.appendChild(cellStr1);}
if(_parlayPoolTypeSelected==PoolType.PlaceShowParlay){aCellDivInput.onclick=function(){CheckOnlyOneInAllLine(this,0);};aCellDivInput.appendChild(cellStr1);}
if(_parlayPoolTypeSelected==PoolType.WinPlaceShowParlay){aCellDivInput.onclick=function(){CheckOnlyOneInAllLine(this,0);};aCellDivInput.appendChild(cellStr1);}
rowCells[0].appendChild(aCellDivInput);rowCells[1].className="sHideElement";rowCells[2].className="sHideElement";rowCells[3].className="sHideElement";cellStr2="";cellStr3="";cellStr4="";break;}
break;case PoolType.ParlayEmpty:switch(_parlayType){case ParlayType.MultiTrackNormal:aCellDivInput=document.createElement("div");aCellDivInput.id='dv'+cellStr1.id;aCellDivInput.className='checkBoxUnChecked';aCellDivInput.appendChild(cellStr1);rowCells[0].appendChild(aCellDivInput);rowCells[1].className="sHideElement";rowCells[2].className="sHideElement";rowCells[3].className="sHideElement";cellStr2="";cellStr3="";cellStr4="";break;case ParlayType.MultiTrackCombined:if(!_WagerInfo.PoolSelectedByPooltype(PoolType.Straight).AvailableWin){rowCells[0].className="sHideElement";}
else{aCellDivInput=document.createElement("div");aCellDivInput.id='dv'+cellStr1.id;aCellDivInput.className='checkBoxUnChecked';aCellDivInput.appendChild(cellStr1);rowCells[0].appendChild(aCellDivInput);}
if(!_WagerInfo.PoolSelectedByPooltype(PoolType.Straight).AvailablePlace){rowCells[1].className="sHideElement";}
else{aCellDivInput=document.createElement("div");aCellDivInput.id='dv'+cellStr2.id;aCellDivInput.className='checkBoxUnChecked';aCellDivInput.appendChild(cellStr2);rowCells[1].appendChild(aCellDivInput);}
if(!_WagerInfo.PoolSelectedByPooltype(PoolType.Straight).AvailableShow){rowCells[2].className="sHideElement";}
else{aCellDivInput=document.createElement("div");aCellDivInput.id='dv'+cellStr3.id;aCellDivInput.className='checkBoxUnChecked';aCellDivInput.appendChild(cellStr3);rowCells[2].appendChild(aCellDivInput);}
rowCells[3].className="sHideElement";cellStr4="";break;}
break;}}
else{switch(poolType){case PoolType.Straight:if(poolLimits.GetLimitInformation(PoolType.Win,raceCondition)!=undefined&&poolObj.AvailableWin){rowCells[0].className="sTdRaceStringWinInformation HorseScratched";}
else{rowCells[0].style.display='none';}
if(poolLimits.GetLimitInformation(PoolType.Place,raceCondition)!=undefined&&poolObj.AvailablePlace){rowCells[1].className="sTdRaceStringPlaceInformation HorseScratched";}
else{rowCells[1].style.display='none';}
if(poolLimits.GetLimitInformation(PoolType.Show,raceCondition)!=undefined&&poolObj.AvailableShow){rowCells[2].className="sTdRaceStringShowInformation HorseScratched";}
else{rowCells[2].style.display='none';}
rowCells[3].className="sHideElement";break;case PoolType.DailyDouble:case PoolType.PickN:rowCells[0].className="sTdRaceExtoticInformation HorseScratched ";rowCells[1].className="sHideElement";rowCells[2].className="sHideElement";rowCells[3].className="sHideElement";break;case PoolType.Quinella:case PoolType.Exacta:rowCells[0].className="sTdRaceExtoticInformation HorseScratched ";rowCells[1].className="sTdRaceExtoticInformation HorseScratched ";rowCells[2].className="sTdRaceExtoticInformation HorseScratched sHideElement";rowCells[3].className="sTdRaceExtoticInformation HorseScratched sHideElement";break
case PoolType.Trifecta:rowCells[0].className="sTdRaceExtoticInformation HorseScratched ";rowCells[1].className="sTdRaceExtoticInformation HorseScratched ";rowCells[2].className="sTdRaceExtoticInformation HorseScratched ";rowCells[3].className="sTdRaceExtoticInformation HorseScratched sHideElement";break;case PoolType.Parlay:case PoolType.WinParlay:case PoolType.PlaceParlay:case PoolType.ShowParlay:switch(_parlayType){case ParlayType.MultiTrackCombined:rowCells[0].className="sTdRaceExtoticInformation HorseScratched";if(!poolObj.AvailablePlace){rowCells[1].className="sTdRaceExtoticInformation HorseScratched sHideElement";}
else{rowCells[1].className="sTdRaceExtoticInformation HorseScratched";}
if(!poolObj.AvailableShow){rowCells[2].className="sTdRaceExtoticInformation HorseScratched sHideElement";}
else{rowCells[2].className="sTdRaceExtoticInformation HorseScratched";}
rowCells[3].className="HorseScratched sHideElement";break;case ParlayType.MultiTrackNormal:rowCells[0].className="sTdRaceExtoticInformation HorseScratched";rowCells[1].className="sTdRaceExtoticInformation HorseScratched sHideElement";rowCells[2].className="sTdRaceExtoticInformation HorseScratched sHideElement";rowCells[3].className="HorseScratched sHideElement";break;}
break;case PoolType.ParlayEmpty:switch(_parlayType){case ParlayType.MultiTrackCombined:rowCells[0].className="sTdRaceExtoticInformation HorseScratched";if(!_WagerInfo.PoolSelectedByPooltype(PoolType.Straight).AvailablePlace){rowCells[1].className="sTdRaceExtoticInformation HorseScratched sHideElement";}
else{rowCells[1].className="sTdRaceExtoticInformation HorseScratched";}
if(!_WagerInfo.PoolSelectedByPooltype(PoolType.Straight).AvailableShow){rowCells[2].className="sTdRaceExtoticInformation HorseScratched sHideElement";}
else{rowCells[2].className="sTdRaceExtoticInformation HorseScratched";}
rowCells[3].className="HorseScratched sHideElement";break;case ParlayType.MultiTrackNormal:rowCells[0].className="sTdRaceExtoticInformation HorseScratched";rowCells[1].className="sTdRaceExtoticInformation HorseScratched sHideElement";rowCells[2].className="sTdRaceExtoticInformation HorseScratched sHideElement";rowCells[3].className="HorseScratched sHideElement";break;}
break;default:rowCells[0].className="sTdRaceExtoticInformation HorseScratched ";rowCells[1].className="sTdRaceExtoticInformation HorseScratched ";rowCells[2].className="sTdRaceExtoticInformation HorseScratched ";rowCells[3].className="sTdRaceExtoticInformation HorseScratched ";break;}
rowCells[4].className="HorseScratched sTdRaceProgramNumberInformation";rowCells[5].className="HorseScratched sTdRaceMorningLineInformation";if(_WagerInfo.Races[raceId].HasStats){rowCells[6].className="HorseScratched sTdRaceRunnerDriverInformation";rowCells[7].className="HorseScratched sTdRaceRunnerRiderInformation";rowCells[8].className="HorseScratched sTdRaceTrainerInformation";rowCells[9].className="HorseScratched sTdRaceMedicationWeightInformation";rowCells[10].className="HorseScratched sTdRacePPInformation";}
else{rowCells[6].className="HorseScratched sTdRaceRunnerJockeyInformation";rowCells[7].className="HorseScratched sTdRaceRunnerRiderInformation";rowCells[8].className="HorseScratched sTdRaceTrainerInformation";rowCells[9].className="HorseScratched sTdRaceMedicationWeightInformation";}}
switch(poolType){case PoolType.Straight:if(poolLimits.GetLimitInformation(PoolType.Win,raceCondition)==undefined&&!poolObj.AvailableWin){rowCells[0].style.display='none';}
if(poolLimits.GetLimitInformation(PoolType.Place,raceCondition)==undefined&&!poolObj.AvailablePlace){rowCells[1].style.display='none';}
if(poolLimits.GetLimitInformation(PoolType.Show,raceCondition)==undefined&&!poolObj.AvailableShow){rowCells[2].style.display='none';}
break;default:break;}
rowCells[4].innerHTML="<center><div class='ProgramNumberT"+programNumber+"'>"+programNumber+"</div></center>";var runnerClassName="";if(_WagerInfo.Races[raceId].Runners[i].Scratch){runnerClassName="sLabelRunnerScratched";}
else{if(_WagerInfo.Races[raceId].Runners[i].ProgramLetter.length>0){rowCells[4].className="ProgramLetterTable";runnerClassName="sLabelRunnerProgramLetter";rowCells[4].innerHTML="<center><div class='ProgramNumberT"+_WagerInfo.Races[raceId].Runners[i].ProgramNumber+" HorseProgramLetter'>"+programNumber+"</div></center>";}
else{if(isAlternating){runnerClassName="sLabelRunnerAlternate";}
else{runnerClassName="sLabelRunner";}}}
isAlternating=!isAlternating;rowCells[5].innerHTML=_WagerInfo.Races[raceId].Runners[i].Odds;if(_WagerInfo.Races[raceId].HasStats){AddInformationRunnerAndStats(rowCells[6],_WagerInfo.Races[raceId].Runners[i]);AddInformationDriverTrainerStats(rowCells[7],_WagerInfo.Races[raceId].Runners[i].Jockey,_WagerInfo.Races[raceId].Runners[i].JockeyEfeDay,_WagerInfo.Races[raceId].Runners[i].JockeyEfe);AddInformationDriverTrainerStats(rowCells[8],_WagerInfo.Races[raceId].Runners[i].Trainer,_WagerInfo.Races[raceId].Runners[i].TrainerEfeDay,_WagerInfo.Races[raceId].Runners[i].TrainerEfe);rowCells[9].innerHTML="<div class=\"sDvStatsOddsMobile\">"+_WagerInfo.Races[raceId].Runners[i].Odds+"</div>"+"<span>"+_WagerInfo.Races[raceId].Runners[i].Medication+"</span>"+parseInt(_WagerInfo.Races[raceId].Runners[i].Weight,10);if(_WagerInfo.Races[raceId].Runners[i].Stats.length===0||_WagerInfo.Races[raceId].Runners[i].Scratch){rowCells[10].innerHTML="";}
else{rowCells[10].innerHTML="<div class=\"sDvPPsIcon\" idRef=\""+tableName+"_tr_"+programNumber+"\"><div></div></div>";}}
else{var titleJockey='';cellStr="<span class='"+runnerClassName+"'>"
+_WagerInfo.Races[raceId].Runners[i].Name+"</span><div class='sTdRaceRunnerJockeyInformationSeparator'> </div>"+
"<span class='sSpJockeyTitleMobile'>"+titleJockey+"</span><span class='sSpRunerInformation'>"+_WagerInfo.Races[raceId].Runners[i].Jockey;rowCells[6].innerHTML=cellStr;rowCells[7].innerHTML=_WagerInfo.Races[raceId].Runners[i].Jockey;rowCells[8].innerHTML=_WagerInfo.Races[raceId].Runners[i].Trainer;rowCells[9].innerHTML="<div class=\"sTdRaceMorningLineInformationMobile sDvStatsOddsMobile\">"+_WagerInfo.Races[raceId].Runners[i].Odds+"</div>"+"<span>"+_WagerInfo.Races[raceId].Runners[i].Medication+"</span>"+parseInt(_WagerInfo.Races[raceId].Runners[i].Weight,10);}
aRow=tlbRunners.insertRow(-1);aRow.id=tableName+"_tr_"+programNumber;if(_WagerInfo.Races[raceId].HasStats){$('#br'+tableName.replace('tlbRunners','')).addClass('sDvRaceWithStats');}
else{$('#br'+tableName.replace('tlbRunners','')).removeClass('sDvRaceWithStats');}
if(!isValidEntryLetter){aRow.className="sTrInvalidEntry";}
aRow.appendChild(rowCells[0]);aRow.appendChild(rowCells[1]);aRow.appendChild(rowCells[2]);aRow.appendChild(rowCells[3]);aRow.appendChild(rowCells[4]);aRow.appendChild(rowCells[5]);aRow.appendChild(rowCells[6]);aRow.appendChild(rowCells[7]);aRow.appendChild(rowCells[8]);aRow.appendChild(rowCells[9]);if(_WagerInfo.Races[raceId].HasStats){aRow.appendChild(rowCells[10]);}
aRow=tlbRunners.insertRow(-1);if(!_WagerInfo.Races[raceId].HasStats||_WagerInfo.Races[raceId].Runners[i].Scratch){aRow.className="sHideElement";}
else{aRow.className="sDvRowStatsMobile sHideElement";aCell=aRow.insertCell(-1);aCell.colSpan=_totalColumns;aTableRunneInfo=document.createElement('table');aTableRunneInfo.border=0;aTableRunneInfo.cellSpacing=0;aTableRunneInfo.cellPadding=0;aTableRunneInfo.width="100%";aTrRunneInfo=aTableRunneInfo.insertRow(-1);aTdRunneInfo=aTrRunneInfo.insertCell(-1);aTdRunneInfo.innerHTML="<div>"+_WagerInfo.Races[raceId].Runners[i].Jockey+"</div>"+"<div>"+messages.lblLastStats+_WagerInfo.Races[raceId].Runners[i].JockeyEfeDay+": "+_WagerInfo.Races[raceId].Runners[i].JockeyEfe+"%"+"</div>";aTdRunneInfo=aTrRunneInfo.insertCell(-1);aTdRunneInfo.rowSpan=2;aTdRunneInfo.appendChild(CreateRunnerStatVictory(_WagerInfo.Races[raceId].Runners[i].VictStartSt,_WagerInfo.Races[raceId].Runners[i].Id,true));aTdRunneInfo=aTrRunneInfo.insertCell(-1);aTdRunneInfo.rowSpan=2;aTdRunneInfo.innerHTML="<div class=\"sDvPPsIcon sDvOpen\" idRef=\""+tableName+"_tr_"+programNumber+"\"><div></div></div>";aTrRunneInfo=aTableRunneInfo.insertRow(-1);aTdRunneInfo=aTrRunneInfo.insertCell(-1);aTdRunneInfo.innerHTML="<div>"+_WagerInfo.Races[raceId].Runners[i].Trainer+"</div>"+"<div>"+messages.lblLastStats+_WagerInfo.Races[raceId].Runners[i].TrainerEfeDay+": "+_WagerInfo.Races[raceId].Runners[i].TrainerEfe+"%"+"</div>";aCell.appendChild(aTableRunneInfo);}
aRow=tlbRunners.insertRow(-1);aRow.id=tableName+"_tr_"+programNumber+"_stats";if(_WagerInfo.Races[raceId].Runners[i].Stats.length===0||_WagerInfo.Races[raceId].Runners[i].Scratch){aRow.className="sHideElement";}
else{aRow.className="sDvRowStats sHideElement";aCell=aRow.insertCell(-1);aCell.colSpan=_totalColumns;dvTemp2=document.createElement('div');dvTemp=document.createElement('div');dvTemp.className='sDvStatsGraphic';dvTemp.innerHTML="<div class=\"sDvRunnerGraphic\" id=\"dvGraphic_"+raceId+"_"+tableName+"_tr_"+programNumber+"\"><div><span>"+messages.lblSpeed+" - "+messages.lblLast5Race+"<\span><\div></div>";dvTemp2.appendChild(dvTemp);let aTableRunneInfo=document.createElement('table');let aTableRunneInfoHead=aTableRunneInfo.createTHead();let aTableRunneInfoHeadBody=aTableRunneInfo.createTBody();aTableRunneInfo.border=0;aTableRunneInfo.cellSpacing=0;aTableRunneInfo.cellPadding=0;dvTemp=document.createElement('div');dvTemp.appendChild(aTableRunneInfo);dvTemp2.appendChild(dvTemp);aCell.appendChild(dvTemp2);if(_WagerInfo.Races[raceId].Runners[i].Stats.length>0){aRow=aTableRunneInfoHead.insertRow(-1);aCell=aRow.insertCell(-1);aCell.colSpan=9;aCell.innerHTML=messages.lblRunnerStyle;switch(_WagerInfo.Races[raceId].Runners[i].StyleType){case 1:aCell.innerHTML+=" "+messages.lblStyleRunnerSpeed;break;case 2:aCell.innerHTML+=" "+messages.lblStyleRunnerStalker;break;case 3:aCell.innerHTML+=" "+messages.lblStyleRunnerPresser;break;case 4:aCell.innerHTML+=" "+messages.lblStyleRunnerCloser;break;default:aCell.innerHTML="";break;}
aRow=aTableRunneInfoHead.insertRow(-1);aCell=aRow.insertCell(-1);aCell.innerHTML=messages.lblDate;aCell=aRow.insertCell(-1);aCell.innerHTML="<div class=\"sDvRunnerStatDetail\">"+messages.lblRaceType+"</div><div class=\"sDvRunnerStatDetailMobile\">"+messages.lblRaceTypeLetter+"</div>";aCell=aRow.insertCell(-1);aCell.innerHTML="<div class=\"sDvRunnerStatDetail\">"+messages.lblTrackOfferDistance+"</div><div class=\"sDvRunnerStatDetailMobile\">"+messages.lblTrackOfferDistanceLetter+"</div>";aCell=aRow.insertCell(-1);aCell.innerHTML="<div class=\"sDvRunnerStatDetail\">"+messages.lblTrackOfferSurfcace+"</div><div class=\"sDvRunnerStatDetailMobile\">"+messages.lblTrackOfferSurfcaceLetter+"</div>";aCell=aRow.insertCell(-1);aCell.innerHTML="<div class=\"sDvRunnerStatDetail\">"+messages.lblTrack+"</div><div class=\"sDvRunnerStatDetailMobile\">"+messages.lblTrackLetter+"</div>";aCell=aRow.insertCell(-1);aCell.innerHTML="<div class=\"sDvRunnerStatDetail\">"+messages.lblMedicationWeight+"</div><div class=\"sDvRunnerStatDetailMobile\">"+messages.lblMedicationWeightLetter+"</div>";aCell=aRow.insertCell(-1);aCell.innerHTML=messages.lblTimed;aCell=aRow.insertCell(-1);aCell.innerHTML="<div class=\"sDvRunnerStatDetail\">"+messages.lblPosition+"</div><div class=\"sDvRunnerStatDetailMobile\">"+messages.lblPositionLetter+"</div>";aCell=aRow.insertCell(-1);aCell.innerHTML="<div class=\"sDvRunnerStatDetail sDvRunnerStatDetailSpeed\">"+messages.lblSpeed+"</div><div class=\"sDvRunnerStatDetailMobile sDvRunnerStatDetailSpeed\">"+messages.lbSpeedLetter+"</div>";}
let stats=_WagerInfo.Races[raceId].Runners[i].Stats.slice();for(let s=0;s<stats.length;s++){aRow=aTableRunneInfoHeadBody.insertRow(-1);aCell=aRow.insertCell(-1);aCell.innerHTML=stats[s].RaceDate;aCell=aRow.insertCell(-1);if(parseInt(stats[s].RaceClaimgPrice,10)>0){aCell.innerHTML=stats[s].RaceType+parseInt(stats[s].RaceClaimgPrice,10)/1000+"K";}
else{aCell.innerHTML=stats[s].RaceType;}
aCell=aRow.insertCell(-1);aCell.innerHTML=stats[s].RaceDistance;aCell=aRow.insertCell(-1);aCell.innerHTML=stats[s].SurfaceType;aCell=aRow.insertCell(-1);aCell.innerHTML=stats[s].TrackCondition;aCell=aRow.insertCell(-1);aCell.innerHTML=stats[s].Medication+parseInt(stats[s].Weight,10);aCell=aRow.insertCell(-1);aCell.innerHTML=stats[s].TimedTimeSeconds;aCell=aRow.insertCell(-1);aCell.innerHTML=stats[s].FinalPosition;aCell=aRow.insertCell(-1);aCell.className='sDvRunnerStatDetailSpeed';aCell.innerHTML=stats[s].RunnerSpeed;}}
aRow=tlbRunners.insertRow(-1);aCell=aRow.insertCell(-1);aCell.colSpan=_totalColumns;aTableRunneInfo=document.createElement('table');aTableRunneInfo.border=0;aTableRunneInfo.cellSpacing=0;aTableRunneInfo.cellPadding=0;aTableRunneInfo.width="100%";if(_WagerInfo.Races[raceId].Runners[i].Comment!==''){aRow.className="sTrRunnerComment";aTrRunneInfo=aTableRunneInfo.insertRow(-1);aTdRunneInfo=aTrRunneInfo.insertCell(-1);aTdRunneInfo.colSpan="6";aTdRunneInfo.style.display='';aTdRunneInfo.className='sTdRunnerComment';aTdRunneInfo.innerHTML="<span>\""+_WagerInfo.Races[raceId].Runners[i].Comment+"\"</span>";SetToggleComment(tlbRunners,true);}
else{aRow.className="sHideElement";}
if(_WagerInfo.Races[raceId].HasStats){SetToggleStats(tlbRunners,true);}
else{SetToggleStats(tlbRunners,false);}
aRow=tlbRunners.insertRow(-1);aCell=aRow.insertCell(-1);aCell.className="sTrLineSeparator";aCell.height="1px";aCell.colSpan=_totalColumns;}}
function showRunnerGraphic(raceId,idCanvas,idRef,grpBorder,grpfont){let label=new Array();let value=new Array();for(let i=0;i<_WagerInfo.Races[raceId].Runners.length;i++){let pn="tr_"+_WagerInfo.Races[raceId].Runners[i].ProgramNumber+_WagerInfo.Races[raceId].Runners[i].ProgramLetter;if(idRef===pn){for(let s=_WagerInfo.Races[raceId].Runners[i].Stats.length-1;0<=s;s--){value[value.length]=_WagerInfo.Races[raceId].Runners[i].Stats[s].RunnerSpeed;label[label.length]=_WagerInfo.Races[raceId].Runners[i].Stats[s].RaceDate.substring(0,_WagerInfo.Races[raceId].Runners[i].Stats[s].RaceDate.length-2);}
break;}}
let ctx=document.getElementById(idCanvas);let myChart=new Chart(ctx,{type:'line',data:{labels:label,datasets:[{label:'Speed',data:value,fill:false,borderColor:grpBorder,borderWidth:1,color:grpfont,tension:0.1}]},options:{scales:{x:{ticks:{color:grpfont}},y:{max:120,min:30,ticks:{color:grpfont,stepSize:30},title:{display:true,text:'km / h'}}},plugins:{legend:{display:false}}}});arrayChars[arrayChars.length]=myChart;}
function AddInformationRunnerAndStats(baseInfo,infoRunner){let base=document.createElement('div');base.innerHTML=infoRunner.Name;baseInfo.appendChild(base);base=document.createElement('div');base.innerHTML=infoRunner.Jockey;base.className="sDvRaceRunnerDriverInformation"
baseInfo.appendChild(base);base=document.createElement('div');base.innerHTML=GetRunnerInformationDetail(infoRunner);baseInfo.appendChild(base);base=document.createElement('div');if(infoRunner.VictStartSt!==undefined&&infoRunner.VictStartSt!==''){baseInfo.appendChild(CreateRunnerStatVictory(infoRunner.VictStartSt,infoRunner.Id,false));}}
function AddInformationDriverTrainerStats(baseInfo,name,day,porcentaje){let info="<div>"+name+"</div>";let textTemp='';if(porcentaje!==undefined&&parseInt(porcentaje,10)!==0){textTemp+=porcentaje+"%";}
else{textTemp+="0%";}
if(day!==undefined&&parseInt(day,10)!==0){textTemp=messages.lblLastStats+day+": "+textTemp;}
if(textTemp!==''){info+="<div>"+textTemp+"</div>";}
else{info+="<div></div>";}
baseInfo.innerHTML=info;}
function CreateRunnerStatVictory(info,id,isMobile){let base=document.createElement('div');if(info!==undefined){let infoSlit=info.split(';');let base2=document.createElement('div');let options=new Array();let cp=0;var idDrop="dvDropDownRunnerStast_";if(isMobile){idDrop="dvDropDownRunnerStastMobile_";}
for(let op=0;op<infoSlit.length;op++){options[cp]=new Array();options[cp][0]=infoSlit[op].split(' ')[0];options[cp][1]=infoSlit[op].split(' ')[0];cp++;}
createDynamicDropDown('sDvDropDownRunnerStast',idDrop+id,options,infoSlit[0].split(' '),function(result,idPrincipal,elementSource){let infoSlit=$('#dvValueSelected_'+idPrincipal.replace(idDrop,'')).attr('innerHTMLValues').split(',');for(let op=0;op<infoSlit.length;op++){if(infoSlit[op].split(' ')[0]===result){document.getElementById('dvValueSelected_'+idPrincipal.replace(idDrop,'')).innerHTML=infoSlit[op].split(' ')[1];return;}}},infoSlit[0].split(' ')[0],infoSlit[0].split(' ')[0],undefined,undefined,undefined,function(){$('.sDvDropDownRunnerStast .sDvChildDropDown').addClass('sHideElement');},undefined,base);base2.id='dvValueSelected_'+id;base2.innerHTML=infoSlit[0].split(' ')[1];$(base2).attr('innerHTMLValues',infoSlit);base.appendChild(base2);}
return base;}
function GetRunnerInformationDetail(info){let infoRu='';if(info.Age!==undefined&&parseInt(info.Age,10)!==0){infoRu+=info.Age;}
if(info.Color!==undefined&&info.Color!==''){if(infoRu.length>0){infoRu+="-";}
infoRu+=info.Color;}
if(info.Birth!==undefined&&info.Birth.indexOf('00')===-1){if(infoRu.length>0){infoRu+="-";}
{infoRu+=info.Birth;}}
return infoRu;}
function checkInputValue(v){let value=TrimNumber($(v).val());$(v).removeClass('TextBoxAmountError');if(value!==''&&value!=='0'){$(v).addClass('TextboxRaceStraightsWithAmount');$('.aSendBet').addClass('aSendBetEnable');if(controlTicket!==undefined&&controlTicket.GetTicketInformation()!==undefined){controlTicket.GetTicketInformation().GetBetInformation().ChangeAmountToBet(parseFloat(value));}}
else{$(v).removeClass('TextboxRaceStraightsWithAmount');$('.aSendBet').removeClass('aSendBetEnable');}}
function Separator(_Description,horses){var pos=-1;var programNumber=-1;while(_Description.length>0){pos=_Description.indexOf(", ",0);if(pos>-1){programNumber=parseInt(_Description.substring(0,pos));_Description=_Description.substring(pos+2,_Description.length);}
else{programNumber=parseInt(_Description);_Description="";}
horses[horses.length]=programNumber;}}
function SeparatorStraight(_Description,horses){var pos=-1;var programNumber=-1;var amount=0;var strposition="";if(_Description.length>0){pos=_Description.indexOf(": ",0);if(pos>0)
programNumber=parseInt(_Description.substring(0,pos));else
programNumber=parseInt(_Description.substring(0,_Description.length));_Description=_Description.substring(pos+2,_Description.length);horses[horses.length]=programNumber;while(_Description.length>0){pos=_Description.indexOf("/",0);if(pos>0){strposition=_Description.substring(0,pos);_Description=_Description.substring(pos+1,_Description.length);}
else{strposition=_Description;_Description="";}
if(strposition=="X")
amount=0;else
amount=parseFloat(strposition);horses[horses.length]=amount;}}}
function GetHorsesList(){var _RunnersCollection,_PoolType;var horses=new Array();var numbers="",_Description="";var addSeparator=false;var pos=-1;_RunnersCollection=returnObjById("_RunnersCollectionOnClient");_PoolType=returnObjById("_PoolTypeOnClient");if((_RunnersCollection===null)||(_PoolType===null)){alert(messages.GetHorsesList+messages._1006);return;}
_Description=_RunnersCollection.value;switch(parseInt(_PoolType.value)){case PoolType.Straight:while(_Description.length>0){pos=_Description.indexOf(" , ",0);if(pos>-1){numbers=_Description.substring(0,pos);_Description=_Description.substring(pos+3,_Description.length);SeparatorStraight(numbers,horses);}
else{SeparatorStraight(_Description,horses);_Description="";}}
break;case PoolType.Parlay:var i=0;j=0;var runners;var entries=_Description.split(" / ");for(i=0;i<entries.length;i++){runners=entries[i].split(", ");for(j=0;j<runners.length;j++){horses[horses.length]=runners[j];}
if(i+1<entries.length){horses[horses.length]=-1;}}
break;default:while(_Description.length>0){pos=_Description.indexOf(" / ",0);if(pos>-1){addSeparator=true;numbers=_Description.substring(0,pos);_Description=_Description.substring(pos+3,_Description.length);Separator(numbers,horses);}
else{Separator(_Description,horses);_Description="";}
if(addSeparator){horses[horses.length]=-1;addSeparator=false;}}
break;}
return horses;}
function GetRacesList(){var _RaceCollection,_PoolType;var races=new Array();var numbers="",_Description="";var addSeparator=false;var pos=-1;_RaceCollection=returnObjById("_RaceCollectionOnClient");_PoolType=returnObjById("_PoolTypeOnClient");if((_RaceCollection===null)||(_PoolType===null)){alert(messages.GetHorsesList+messages._1006);return;}
_Description=_RaceCollection.value;while(_Description.length>0){pos=_Description.indexOf(" / ",0);if(pos>-1){addSeparator=true;numbers=_Description.substring(0,pos);_Description=_Description.substring(pos+3,_Description.length);Separator(numbers,races);}
else{Separator(_Description,races);_Description="";}
if(addSeparator){races[races.length]=-1;addSeparator=false;}}
for(var i=0;i<races.length;i++){if(races[i]!=-1){races[i]+=_incremetRaceIdIn;}}
return races;}
function SetHorseCollection(poolType){var i=0,j=0,pos=-1,poolSize=0,place=0,index=0;var ctrlCheckBox,ctrlName="",programNumber=0,wagerAmount;var isHorseFound=false;var userSelection;var runnersCollection=returnObjById("_RunnersCollectionOnClient").value;var horses=GetHorsesList();var races=null;if(horses===null){alert("SetHorseCollection :: "+messages._1007);return null;}
switch(poolType){case PoolType.Straight:var ctrlWin,ctrlPlace,ctrlShow;for(i=0;i<ArrayBoxOptions.length;i++){ctrlName=ArrayBoxOptions[i][0];ctrlWin=returnObjById(ctrlName);ctrlPlace=returnObjById(ArrayBoxOptions[i][1]);ctrlShow=returnObjById(ArrayBoxOptions[i][2]);if((ctrlWin===null)||(ctrlPlace===null)||(ctrlShow===null)){alert(messages.SetHorseCollection+messages._1006);return null;}
var isCheckBox=true;if(ctrlWin.type!="checkbox"){isCheckBox=false;}
pos=ctrlName.indexOf("__");if(pos>-1){programNumber=ctrlName.substring(pos+2,ctrlName.length);if(horses[place]==programNumber){place++;var winAmount=horses[place];place++;var placeAmount=horses[place];place++;var showAmount=horses[place];place++;if(winAmount>0)
if(isCheckBox)
ctrlWin.checked=true;else
ctrlWin.value=winAmount;if(placeAmount>0)
if(isCheckBox)
ctrlPlace.checked=true;else
ctrlPlace.value=placeAmount;if(showAmount>0)
if(isCheckBox)
ctrlShow.checked=true;else
ctrlShow.value=showAmount;}}}
break;case PoolType.Quinella:case PoolType.Exacta:case PoolType.Trifecta:case PoolType.Superfecta:place=0;index=0;while((place<horses.length)&&(index<ArrayBoxOptions[0].length)){isHorseFound=false;for(i=0;i<ArrayBoxOptions.length;i++){ctrlName=ArrayBoxOptions[i][index];ctrlCheckBox=returnObjById(ctrlName);if(ctrlCheckBox!==null){pos=ctrlName.indexOf("__");if(pos>-1){programNumber=parseInt(ctrlName.substring(pos+2,ctrlName.length));if(horses[place]==programNumber){place++;ctrlCheckBox.checked=true;if((place<horses.length)&&(horses[place]==-1)){index++;place++;isHorseFound=true;break;}}}}}
if(!isHorseFound)
place++;}
break;case PoolType.DailyDouble:case PoolType.PickN:pos=0;place=0;i=0;while(i<ArrayBoxOptions.length){ctrlName=ArrayBoxOptions[i]+"";ctrlCheckBox=returnObjById(ctrlName);if(ctrlCheckBox!==null){pos=ctrlName.indexOf("__");if(pos>-1){programNumber=ctrlName.substring(pos+2,ctrlName.length);if(horses[place]==programNumber){place++;ctrlCheckBox.checked=true;if((place<horses.length)&&(horses[place]==-1)){place++;while((i<ArrayBoxOptions.length)&&(ArrayBoxOptions[i]!=strSeparator)){i++;}}}}}
i++;}
break;case PoolType.Parlay:races=GetRacesList();if(races===null){alert("SetHorseCollection :: "+messages._1007);return null;}
j=0;var tmpRaceParlayIndex=currentRaceParlayIndex;var horsePN=0,k=0;for(i=0;i<races.length;i++){if(races[i]!=-1){currentRaceParlayIndex=TableParlayIndexOf(races[i]-_incremetRaceIdIn);for(j=j;(j<horses.length)&&(horses[j]!=-1);j++){try{var runner=horses[j];horsePN=parseInt(runner);for(k=0;k<runner.length;k++){switch(runner.substring(k,k+1)){case "W":AddToParlay(races[i],horsePN,PoolType.Win);break;case "P":AddToParlay(races[i],horsePN,PoolType.Place);break;case "S":AddToParlay(races[i],horsePN,PoolType.Show);break;}}}
catch(er){alert("SetHorseCollection :: "+er.name+"\n"+er.message+"\n"+horses[j]);return null;}}
j++;}}
currentRaceParlayIndex=tmpRaceParlayIndex;setRunnersSelected(_WagerInfo.RaceId());break;}
return runnersCollection;}
function ShowResultMode(){$('.resultMode').show();$('.bettingMode').hide();}
function ShowBettingMode(){$('.resultMode').hide();$('.bettingMode').show();}
function SetToggleComment(tlbRunnersRace,show){if(show){$(tlbRunnersRace).parent().find('.sDvCommentButton').show();}
else{$(tlbRunnersRace).parent().find('.sDvCommentButton').hide();}
SetComment();}
function SetToggleStats(tlbRunnersRace,show){if(show){$(tlbRunnersRace).parent().find('.sDvStatsButton').show();}
else{$(tlbRunnersRace).parent().find('.sDvStatsButton').hide();}}
function SetComment(){var valueCoookieComment=true;try{valueCoookieComment=GetCookie("CommentOption");}
catch(e){}
if(valueCoookieComment=='true'||valueCoookieComment==''){$('#dvRaceInformationToBet .sTrRaceComment').removeClass('sHideElement');$('#dvRaceInformationToBet .sTdRunnerComment').removeClass('sHideElement');$('#dvRaceInformationToBet .sDvCommentButton').addClass('sDvCommentButtonActive');}
else{$('#dvRaceInformationToBet .sTrRaceComment').addClass('sHideElement');$('#dvRaceInformationToBet .sTdRunnerComment').addClass('sHideElement');$('#dvRaceInformationToBet .sDvCommentButton').removeClass('sDvCommentButtonActive');}}
function ToggleCommentAction(objectBtn){var show=$(objectBtn).hasClass('sDvCommentButtonActive');if(show){$('#dvRaceInformationToBet .sTrRaceComment').addClass('sHideElement');$('#dvRaceInformationToBet .sTdRunnerComment').addClass('sHideElement');$('#dvRaceInformationToBet .sDvCommentButton').removeClass('sDvCommentButtonActive');}
else{$('#dvRaceInformationToBet .sTrRaceComment').removeClass('sHideElement');$('#dvRaceInformationToBet .sTdRunnerComment').removeClass('sHideElement');$('#dvRaceInformationToBet .sDvCommentButton').addClass('sDvCommentButtonActive');}}
function ToggleStatsAction(objectBtn,ref){var show=$(objectBtn).hasClass('sDvOpen');if(show){$(objectBtn).removeClass('sDvOpen');}
else{$(objectBtn).addClass('sDvOpen');AddActivityPlayer("0");}
isFromToggle=true;$('#tlbRunners'+ref+' > tbody > tr').not('.sDvRowStatsMobile, .sTdRaceButtons').find('.sDvPPsIcon').each(function(index){if(show===$(this).hasClass('sDvOpen')){$(this).click();}});isFromToggle=false;}
function StatsActionReverse(refId){let ref=refId.split('_')[0].replace('tlbRunners','');let total=0;let totalShow=0;$('#tlbRunners'+ref+' > tbody > tr').not('.sDvRowStatsMobile, .sTdRaceButtons').find('.sDvPPsIcon').each(function(index){total=total+1;if($(this).hasClass('sDvOpen')){totalShow=totalShow+1;}});let show=$('#dvStatsButton'+ref).hasClass('sDvOpen');if(totalShow===0){$('#dvStatsButton'+ref).removeClass('sDvOpen');}
else{if(totalShow!==total){$('#dvStatsButton'+ref).addClass('sDvOpen');}
if(show&&totalShow===total){$('#dvStatsButton'+ref).addClass('sDvOpen');}}}