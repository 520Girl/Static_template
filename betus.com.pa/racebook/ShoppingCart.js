var divDetailBetId="";function shoppingCartClass(tblContinerBet,tblContinerBetParlay,modeShoppingCart){var betCollection=new Array();var _singleCss="SingleTableBetSlip";var _alternatingCss="AlternatingTableBetSlip";var _betPlacedShopping=false;var _editTicket=false;var _isNewParlay=false;var _editIndexBetId=-1;var _messageParlay='';var _errorMessage='';var _isModeEdit=modeShoppingCart===1?true:false;var _isModeEditNewBet=modeShoppingCart===2?true:false;var _isModeReadBack=modeShoppingCart===3?true:false;var _isModeReadBackAutoConfirm=modeShoppingCart===4?true:false;var _tempOrginalTextAddBet='';var tdObjectDeleteCart;var chkObjectParlay;var prefixId="";if(_isModeEdit){prefixId='e_';}
if(_isModeEditNewBet){prefixId='en_';}
if(_isModeReadBack){prefixId='enr_';}
if(_isModeEditNewBet){_messageParlay=messages.lblEditingParlay;}
this.BetList=function(){return betCollection;};this.TableId=tblContinerBet;this.TableIdParlay=tblContinerBetParlay;this.TRButtonSendBet="";this.TableTicketId="";this.LableConfirmationNumber="";this.LableConfirmationPostTime="";this.TableMessageErrorId="";this.LableMessageErrorId="";this.DivMessageEmptyId="";this.ImportantMessage="";this.HaveImportantMessage="";this.DivHelpMessageId="";this.DropDownParlay="drpParlayType";this.TDDropDownParlay="";this.EnableWinParlay=false;this.EnablePlaceParlay=false;this.EnableShowParlay=false;this.AddBetParlayCount=false;this.HaveValidationError="false";this.RequestServer=false;this.AddEntrySuccessfully="";this.ImportantMessageParlay="";this.Currency="$";this.CurrencyISO="USD";this.CurrencySymbol="$";this.HasPermisionEditPhone=false;this.HasPermisionDeletePhone=false;this.HasPermisionAllowEditAnySessionPhone=false;this.HasPermisionAllowDeleteAnySessionPhone=false;this.CountBetEnable=0;this.IsAnonymous=false;this.MessageErrorToPlace=function(){return _errorMessage;};this.RestartBetList=function(){betCollection=new Array();_editTicket=false;this.CountBetEnable=0;};this.ShowBetSlipInformation=function(){$('#'+this.TableId).show();};this.HideBetSlipBetInformation=function(){$('#'+this.TableId).hide();};this.ClearPhoneEditBet=function(){betCollection=new Array();};this.GetInformaionTicketEdit=function(){return betCollection[_editIndexBetId];};this.GetInformaionTicket=function(index){return betCollection[index];};this.GetIndexTicketByTicketId=function(ticketId){for(i=0;i<betCollection.length;i++){if(betCollection[i]!=undefined){if(parseInt(betCollection[i].TicketConfirmation,10)==parseInt(ticketId,10)){return i;}}}
return-1;};this.GetIndexTicketByTicketIdReference=function(ticketId){for(i=0;i<betCollection.length;i++){if(betCollection[i]!=undefined){if(parseInt(betCollection[i].TicketConfirmationReference,10)==parseInt(ticketId,10)){return i;}}}
return-1;};this.GetTotalCollection=function(){return betCollection.length;};this.PhoneSetDeleteBetReadBack=function(ticketId){var indexId=shoppingCartReadbackAutoConfirm.GetIndexTicketByTicketId(ticketId);if(indexId>=0){var informationBet=shoppingCartReadbackAutoConfirm.GetInformaionTicket(indexId);shoppingCartReadbackAutoConfirm.DeleteBetshoppingCartById(indexId);}};this.AllBetCorrectToPlace=function(){var allIsCorrect=true;_errorMessage='';for(i=0;i<betCollection.length;i++){if(betCollection[i]!=undefined){if(betCollection[i].HasAnError){allIsCorrect=false;_errorMessage=messages.lblErrorBetWithError;break;}
if(betCollection[i].PoolId>=1000&&betCollection[i].BetAmountClient<=0){allIsCorrect=false;_errorMessage=messages.lblErrorBetWithAmount;break;}
if(_isModeEditNewBet){if(betCollection[i].PoolId>=1000&&betCollection[i].EditMode&&!_editTicket){allIsCorrect=false;_errorMessage=messages.lblErrorBetWithErrorParlayFinish;break;}}
else{if(betCollection[i].PoolId>=1000&&betCollection[i].EditMode){allIsCorrect=false;_errorMessage=messages.lblErrorBetWithErrorParlayFinish;break;}}}}
return allIsCorrect;};this.AddBetshoppingCartObject=function(newObject){var index=betCollection.length;betCollection[index]=newObject;if(_isModeEditNewBet){_editIndexBetId=index;_editTicket=true;}};this.AddBetshoppingCart=function(trId,trTZ,trkE,rL,rcL,pC,pId,btAC,wAC,pAC,sAC,bx,bxWK,ln1Txt,ln2Txt,ln3Txt,ln4Txt,tt,rArr,cmArr,rId,ttCm,idxPBt,lmtWMinAm,lmtWMaxAm,lmtPMinAm,lmtPMaxAm,lmtSMinAm,lmtSMaxAm,lmtMinAm,lmtMaxAm,weId,weBCS,ttt,ttf){this.RequestServer=false;this.ClearBetPlaced();if(idxPBt==undefined||betCollection[idxPBt]==undefined){var index=betCollection.length;betCollection[index]=new Object();betCollection[index].TrackId=trId;betCollection[index].TrackTimeZone=trTZ;betCollection[index].TrackEvent=trkE;betCollection[index].HorseList=rL;betCollection[index].RaceList=rcL;betCollection[index].PoolCode=pC;betCollection[index].PoolId=parseInt(pId,10);betCollection[index].PoolTypeName=GetPoolTypeName(pId);betCollection[index].BetAmountClient=btAC;betCollection[index].WinAmounClient=wAC;betCollection[index].PlaceAmountClient=pAC;betCollection[index].ShowAmounClient=sAC;betCollection[index].Box=bx;betCollection[index].BoxWithKey=bxWK;betCollection[index].RaceId=rId;betCollection[index].HasAnError=false;betCollection[index].LimitWinMinAmount=lmtWMinAm;betCollection[index].LimitWinMaxAmount=lmtWMaxAm;betCollection[index].LimitPlaceMinAmount=lmtPMinAm;betCollection[index].LimitPlaceMaxAmount=lmtPMaxAm;betCollection[index].LimitShowMinAmount=lmtSMinAm;betCollection[index].LimitShowMaxAmount=lmtSMaxAm;betCollection[index].LimitMinAmount=lmtMinAm;betCollection[index].LimitMaxAmount=lmtMaxAm;betCollection[index].InformationBet1=ln1Txt;betCollection[index].InformationBet2=ln2Txt;betCollection[index].InformationBet3=ln3Txt;betCollection[index].InformationBet4=ln4Txt;betCollection[index].TotalWager=tt;betCollection[index].TotalCombinations=ttCm;betCollection[index].HorsesArray=rArr;betCollection[index].CombinationsArray=cmArr;betCollection[index].EditMode=false;betCollection[index].TotalFee=ttf===undefined?0:parseFloat(ttf);betCollection[index].TotalTax=ttt===undefined?0:parseFloat(ttt);betCollection[index].ParlayInformationBet=null;betCollection[index].ParlayMaxSize=-1;betCollection[index].StatusBet=0;betCollection[index].EnableToPlace=true;betCollection[index].TicketConfirmation='';betCollection[index].TicketPostTime='';betCollection[index].ErrorMessage='';betCollection[index].NewTicketFromTicketToChange=false;betCollection[index].TicketIsNew=false;betCollection[index].TicketWasEditedRefered=false;betCollection[index].TicketIsInCurrentSession=weBCS;betCollection[index].TicketConfirmationReference=weId===undefined?"":weId;betCollection[index].InternalReference=index+'_new';betCollection[index].TicketEnableToEdit=true;betCollection[index].TicketReasonCanNotEdit='';}
this.RefreshOptionParlays(idxPBt);};this.AddBetshoppingCartParlay=function(trId,trN,rcN,trETxt,pN,rN,enWPly,enPPly,enSPly,trTZ,rcId,idxId,trE,rP,idxIdBC,lmtMinAm,lmtMaxAm,pMxSize,pnIsrh,rttt,rttf){var parlayInformationBetTemp=AddBetshoppingCartParlayInformation(trId,trN,rcN,trETxt,pN,rN,enWPly,enPPly,enSPly,trTZ,rcId,idxId,trE,rP,betCollection[idxIdBC].ParlayInformationBet,lmtMinAm,lmtMaxAm,pnIsrh,rttt,rttf);if(betCollection[idxIdBC]!=undefined){betCollection[idxIdBC].EditMode=true;if(betCollection[idxIdBC].ParlayMaxSize==-1){betCollection[idxIdBC].ParlayMaxSize=parseInt(pMxSize,10);}
else{betCollection[idxIdBC].ParlayMaxSize=parseInt(pMxSize,10)<betCollection[idxIdBC].ParlayMaxSize?parseInt(pMxSize,10):betCollection[idxIdBC].ParlayMaxSize;}}
if(parlayInformationBetTemp!==null&&parlayInformationBetTemp!==undefined){betCollection[idxIdBC].ParlayInformationBet=parlayInformationBetTemp;}
this.RefreshOptionParlays(idxIdBC);};function AddBetshoppingCartParlayInformation(trackId,trackName,raceNumber,dateTrackEvent,programNumber,horseName,enableWinParlay,enablePlaceParlay,enableShowParlay,trackTimeZone,raceNumberId,indexId,trackEventId,horsePosition,parlayInformationBet,lmtMinAm,lmtMaxAm,pnIsrh,rttt,rttf){if(parlayInformationBet===undefined||parlayInformationBet===null){parlayInformationBet=new Object();parlayInformationBet.ParlayRunners=new Array();parlayInformationBet.DescriptionSequences=new Array();parlayInformationBet.TotalEntriesAdded=0;parlayInformationBet.TotalEntries=0;parlayInformationBet.TotalWager=0;parlayInformationBet.TotalCombinations=0;parlayInformationBet.BetAmountClient=0;parlayInformationBet.RefFee=rttf===undefined?0:parseFloat(rttf);parlayInformationBet.RefTax=rttt===undefined?0:parseFloat(rttt);}
var indexTrack=parlayInformationBet.ParlayRunners.length;var indexTrackEventDate=0;var indexRace=0;var indexHorses=0;var findValue=false;var findTrack=false;var findHorseValue=false;for(t=0;t<parlayInformationBet.ParlayRunners.length;t++){if(parlayInformationBet.ParlayRunners[t]!=undefined){if(parlayInformationBet.ParlayRunners[t].TrackName==trackName){findTrack=true;var findDateEvent=false;for(te=0;te<parlayInformationBet.ParlayRunners[t].TrackEvent.length;te++){if(parlayInformationBet.ParlayRunners[t].TrackEvent[te].DateTrackEvent==dateTrackEvent){findValue=true;findDateEvent=true;var findRace=false;for(r=0;r<parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races.length;r++){var findRaceNumber=false;if(parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].RaceNumber==raceNumber){findRace=true;findRaceNumber=true;for(h=0;h<parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses.length;h++){if(parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].ProgramNumber==programNumber||parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition==horsePosition){findHorseValue=true;}}
if(!findHorseValue){indexHorses=parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses.length;parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[indexHorses]=new Object();parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[indexHorses].ProgramNumber=programNumber;parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[indexHorses].HorseName=horseName;parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[indexHorses].EnableBet=true;parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[indexHorses].ErroMessage='';parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[indexHorses].IndexId=indexId;parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[indexHorses].HorsePosition=horsePosition;parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[indexHorses].LimitMinAmount=lmtMinAm;parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[indexHorses].LimitMaxAmount=lmtMaxAm;parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[indexHorses].RunnerIsScratch=pnIsrh;if(horsePosition==1){parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[indexHorses].PoolType=1001;}
if(horsePosition==2){parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[indexHorses].PoolType=1002;}
if(horsePosition==3){parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[indexHorses].PoolType=1003;}
parlayInformationBet.TotalEntries+=1;parlayInformationBet.TotalEntriesAdded+=1;indexId=indexId+1;return parlayInformationBet;}
else{alert(messages.lblErrorAddBetParlayMoreThanTwoEntries);return null;}}}
if(!findRace){indexRace=parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races.length;parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[indexRace]=new Object();parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[indexRace].RaceNumber=raceNumber;parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[indexRace].RaceNumberId=raceNumberId;parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[indexRace].WinParlay=enableWinParlay;parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[indexRace].PlaceParlay=enablePlaceParlay;parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[indexRace].ShowParlay=enableShowParlay;parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[indexRace].Horses=new Array();return AddBetshoppingCartParlayInformation(trackId,trackName,raceNumber,dateTrackEvent,programNumber,horseName,enableWinParlay,enablePlaceParlay,enableShowParlay,trackTimeZone,raceNumberId,indexId,trackEventId,horsePosition,parlayInformationBet,lmtMinAm,lmtMaxAm,pnIsrh,rttt,rttf);}}}
if(!findDateEvent){indexTrackEventDate=parlayInformationBet.ParlayRunners[t].TrackEvent.length;parlayInformationBet.ParlayRunners[t].TrackEvent[indexTrackEventDate]=new Object();parlayInformationBet.ParlayRunners[t].TrackEvent[indexTrackEventDate].DateTrackEvent=dateTrackEvent;parlayInformationBet.ParlayRunners[t].TrackEvent[indexTrackEventDate].TrackEventId=trackEventId;parlayInformationBet.ParlayRunners[t].TrackEvent[indexTrackEventDate].Races=new Array();return AddBetshoppingCartParlayInformation(trackId,trackName,raceNumber,dateTrackEvent,programNumber,horseName,enableWinParlay,enablePlaceParlay,enableShowParlay,trackTimeZone,raceNumberId,indexId,trackEventId,horsePosition,parlayInformationBet,lmtMinAm,lmtMaxAm,pnIsrh,rttt,rttf);}}}}
if(!findTrack){parlayInformationBet.ParlayRunners[indexTrack]=new Object();parlayInformationBet.ParlayRunners[indexTrack].TrackName=trackName;parlayInformationBet.ParlayRunners[indexTrack].TrackId=trackId;parlayInformationBet.ParlayRunners[indexTrack].TrackTimeZone=trackTimeZone;parlayInformationBet.ParlayRunners[indexTrack].TrackEvent=new Array();return AddBetshoppingCartParlayInformation(trackId,trackName,raceNumber,dateTrackEvent,programNumber,horseName,enableWinParlay,enablePlaceParlay,enableShowParlay,trackTimeZone,raceNumberId,indexId,trackEventId,horsePosition,parlayInformationBet,lmtMinAm,lmtMaxAm,pnIsrh,rttt,rttf);}};this.ActiveFinishEdit=function(){$('#dvBetFinish_'+prefixId+_editIndexBetId).removeClass('sDvBetSlipDetailDisable');};this.RefreshOptionParlays=function(indexIdBetCart){if(indexIdBetCart===''){indexIdBetCart=undefined;}
if(this.IsEditMode()){this.ShowHideBlockBetSlip(indexIdBetCart,true);}
else{this.ShowHideBlockBetSlip(indexIdBetCart,false);}
if(indexIdBetCart!==undefined&&indexIdBetCart!=-1){if(parseInt(betCollection[indexIdBetCart].PoolId,10)>=1000){if(betCollection[indexIdBetCart]===null||betCollection[indexIdBetCart].ParlayInformationBet===null||betCollection[indexIdBetCart].ParlayInformationBet===undefined){$('#dvParlayFinish').addClass('sDvParlayOptionDisable');$('#dvBetFinish_'+prefixId+indexIdBetCart).addClass('sDvBetSlipDetailDisable');betCollection[indexIdBetCart].EnableToPlace=false;}
else{if(betCollection[indexIdBetCart].ParlayInformationBet.TotalEntries>1){$('#dvParlayFinish').removeClass('sDvParlayOptionDisable');$('#dvBetFinish_'+prefixId+indexIdBetCart).removeClass('sDvBetSlipDetailDisable');$('#dvEditBet_'+prefixId+indexIdBetCart).addClass('sDvBetSlipDetailDisable');betCollection[indexIdBetCart].EnableToPlace=true;}
else{$('#dvParlayFinish').addClass('sDvParlayOptionDisable');$('#dvBetFinish_'+prefixId+indexIdBetCart).addClass('sDvBetSlipDetailDisable');betCollection[indexIdBetCart].EnableToPlace=false;}}}}
else{$('#dvParlayFinish').addClass('sDvParlayOptionDisable');$('#dvBetFinish_'+prefixId+indexIdBetCart).addClass('sDvBetSlipDetailDisable');}
if(indexIdBetCart!=undefined){UpdateBetReadyToPlace(betCollection,indexIdBetCart);}};this.RemoveEntryScratchedParlay=function(){var indexToRemote=new Array();var betCollectionParlay=betCollection[this.EditPalayerIndexBetId()].ParlayInformationBet;if(betCollectionParlay!=undefined&&betCollectionParlay.ParlayRunners!=undefined){for(t=0;t<betCollectionParlay.ParlayRunners.length;t++){for(te=0;te<betCollectionParlay.ParlayRunners[t].TrackEvent.length;te++){for(r=0;r<betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races.length;r++){for(h=0;h<betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses.length;h++){if(betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].RunnerIsScratch=='true'){var index=indexToRemote.length;indexToRemote[index]=t+'/'+te+'/'+r+'/'+h;}}}}}
for(de=0;de<indexToRemote.length;de++){var indexsValues=indexToRemote[de].split('/');delete betCollection[this.EditPalayerIndexBetId()].ParlayInformationBet.ParlayRunners[indexsValues[0]].TrackEvent[indexsValues[1]].Races[indexsValues[2]].Horses[indexsValues[3]];}}};this.ValidNewEntryParlay=function(eventId,trackId,raceId,runnerId,poolTypeId){if(poolTypeId>=1000){var betCollectionParlay=betCollection[this.EditPalayerIndexBetId()].ParlayInformationBet;if(betCollectionParlay!=undefined&&betCollectionParlay.ParlayRunners!=undefined){for(t=0;t<betCollectionParlay.ParlayRunners.length;t++){if(betCollectionParlay.ParlayRunners[t]!=undefined&&betCollectionParlay.ParlayRunners[t].TrackId==trackId){for(te=0;te<betCollectionParlay.ParlayRunners[t].TrackEvent.length;te++){if(betCollectionParlay.ParlayRunners[t].TrackEvent[te].TrackEventId==eventId){for(r=0;r<betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races.length;r++){if(betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].RaceNumberId==raceId){for(h=0;h<betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses.length;h++){if(poolTypeId==1001){if(betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition.indexOf("1")!=-1){alert(messages.lblErrorAddBetParlayMoreThanTwoEntries);return false;}}
if(poolTypeId==1002){if(betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition.indexOf("2")!=-1){alert(messages.lblErrorAddBetParlayMoreThanTwoEntries);return false;}}
if(poolTypeId==1003){if(betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition.indexOf("3")!=-1){alert(messages.lblErrorAddBetParlayMoreThanTwoEntries);return false;}}
if(poolTypeId==1004){if(betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition.indexOf("1")!=-1){alert(messages.lblErrorAddBetParlayMoreThanTwoEntries);return false;}
if(betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition.indexOf("2")!=-1){alert(messages.lblErrorAddBetParlayMoreThanTwoEntries);return false;}}
if(poolTypeId==1005){if(betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition.indexOf("1")!=-1){alert(messages.lblErrorAddBetParlayMoreThanTwoEntries);return false;}
if(betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition.indexOf("3")!=-1){alert(messages.lblErrorAddBetParlayMoreThanTwoEntries);return false;}}
if(poolTypeId==1006){if(betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition.indexOf("2")!=-1){alert(messages.lblErrorAddBetParlayMoreThanTwoEntries);return false;}
if(betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition.indexOf("3")!=-1){alert(messages.lblErrorAddBetParlayMoreThanTwoEntries);return false;}}
if(poolTypeId==1007){if(betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition.indexOf("1")!=-1){alert(messages.lblErrorAddBetParlayMoreThanTwoEntries);return false;}
if(betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition.indexOf("2")!=-1){alert(messages.lblErrorAddBetParlayMoreThanTwoEntries);return false;}
if(betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition.indexOf("3")!=-1){alert(messages.lblErrorAddBetParlayMoreThanTwoEntries);return false;}}}}}}}}}}
if(betCollection[this.EditPalayerIndexBetId()].ParlayMaxSize!=-1){if(this.ParlayEditTotalEntries(false)==betCollection[this.EditPalayerIndexBetId()].ParlayMaxSize){var messageError=messages.lblErrorMaxParlaySizePlace.replace('{0}',betCollection[this.EditPalayerIndexBetId()].ParlayMaxSize);messageError=messageError.replace('{1}',this.ParlayEditTotalEntries(false));alert(messageError);return false;}}}
return true;};this.ParlayEditTotalEntries=function(loadAll){if(_editIndexBetId!=-1&&betCollection!==null&&betCollection.length>0){if(betCollection[_editIndexBetId].ParlayInformationBet===null){return 0;}
else{if(loadAll){return betCollection[_editIndexBetId].ParlayInformationBet.TotalEntriesAdded;}
else{return betCollection[_editIndexBetId].ParlayInformationBet.TotalEntries;}}}
else{return 0;}};this.ParlayStartNew=function(parlayTypeIntial){if(!_editTicket||_isModeEditNewBet){_editTicket=true;$('#dvParlayFinish').removeClass('sHideElement');$('#dvParlayCancel').removeClass('sHideElement');_editIndexBetId=this.NextIndexBet();if(_parlayType==ParlayType.MultiTrackNormal){if(parlayTypeIntial==undefined){this.AddBetshoppingCart(-1,'','','','','1001','1001');}
else{this.AddBetshoppingCart(-1,'','','','',parlayTypeIntial,parlayTypeIntial);}}
else{this.AddBetshoppingCart(-1,'','','','','1000','1000');}
betCollection[_editIndexBetId].EditMode=true;betCollection[_editIndexBetId].TotalWager=0;if(_parlayType==ParlayType.MultiTrackNormal){betCollection[_editIndexBetId].TotalCombinations=0;}
else{betCollection[_editIndexBetId].TotalCombinations=1;}
betCollection[_editIndexBetId].BetAmountClient=0;betCollection[_editIndexBetId].EnableToPlace=false;_messageParlay=messages.lblNewParlay;if(_isModeEditNewBet){shoppingCartEdit.LoadNewTicketToEditing();}
_isNewParlay=true;this.GetshoppingCart(false);_isNewParlay=false;if(!_isModeEditNewBet){this.ShowHideBlockBetSlip(_editIndexBetId,true);}}};this.ShowHideBlockBetSlip=function(indexBetToExclude,show){if(indexBetToExclude!=undefined){var baseContainBets=this.TableId;if(show){var parentObject;var tableBet;$('#'+baseContainBets+" .sTblBetSlipContenerBetDisable").each(function(index){parentObject=$(this).parent();tableBet=$(parentObject).find('> table');if($(tableBet).attr('id')!=undefined){var tableIndexId=$(tableBet).attr('id').replace('tblBetSlipContenerBet_'+prefixId,'');if(tableIndexId!=indexBetToExclude){$(this).removeClass('sHideElement');$(this).css('width',$(tableBet).width())
$(this).css('height',$(tableBet).height()+1)}}
else{$(this).removeClass('sHideElement');$(this).css('padding','0');$(this).css('width',$(tableBet).width())
$(this).css('height',$(tableBet).height())}});}
else{$('#'+baseContainBets+" .sTblBetSlipContenerBetDisable").addClass('sHideElement');}}};this.ParlayEdit=function(betIndexId){if(!_editTicket){_editTicket=true;$('#dvParlayFinish').removeClass('sHideElement');$('#dvParlayCancel').removeClass('sHideElement');_editIndexBetId=betIndexId;betCollection[_editIndexBetId].EditMode=true;SetAmountToParlay(betCollection[_editIndexBetId],$('#txtAmountParlay_'+prefixId+_editIndexBetId).val(),true);$('#txtAmountParlay_'+prefixId+_editIndexBetId).prop('disabled',false);_messageParlay=messages.lblEditingParlay;_poolCodeSelected=betCollection[betIndexId].PoolId;$('#_hdnParlayPoolTypeSelected').val(betCollection[_editIndexBetId].PoolId);if(_parlayType==ParlayType.MultiTrackNormal){this.UpdateParlayType(betIndexId,betCollection[_editIndexBetId].PoolId);}
else{this.GetshoppingCart(false);}
lastSelectPoolTypeWasParlay=true;this.ShowHideBlockBetSlip(_editIndexBetId,true);$('#dvErrorAskConfirmation').addClass('sHideElement');this.LoadInformationRunnerEdit(false);}};this.ParlayFinish=function(){var id='#dvBetFinish_'+prefixId+_editIndexBetId;var id2='#txtAmountParlay_'+_editIndexBetId;if(!$(id).hasClass('sDvParlayOptionDisable')){_editTicket=false;if(_parlayType==ParlayType.MultiTrackNormal){$('#_hdnParlayPoolTypeSelected').val('-1');}
this.ShowHideBlockBetSlip(_editIndexBetId,false);$('#dvParlayFinish').addClass('sHideElement');$('#dvParlayCancel').addClass('sHideElement');betCollection[_editIndexBetId].EditMode=false;SetAmountToParlay(betCollection[_editIndexBetId],$('#txtAmountParlay_'+prefixId+_editIndexBetId).val(),false);SetTotalWagerParlay(betCollection[_editIndexBetId],$('#txtAmountParlay_'+prefixId+_editIndexBetId).val(),false);_editIndexBetId=-1;if(controlTicket!=undefined){controlTicket=undefined;}
this.GetshoppingCart(false);$('#rblPools_0').click();$(id2).attr('disabled','disabled');}};this.ParlayCancel=function(){if(_parlayType==ParlayType.MultiTrackNormal){$('#_hdnParlayPoolTypeSelected').val('-1');}
this.ShowHideBlockBetSlip(_editIndexBetId,false);_editTicket=false;if(betCollection[_editIndexBetId].ParlayInformationBet===undefined||betCollection[_editIndexBetId].ParlayInformationBet===null){this.DeleteBetshoppingCartById(_editIndexBetId);}
else{this.DeleteBetshoppingCart(document.getElementById('dvBetSlipBetDeleteIndex_'+prefixId+_editIndexBetId),false);}
$('#dvParlayFinish').addClass('sHideElement');$('#dvParlayCancel').addClass('sHideElement');_editIndexBetId=-1;this.GetshoppingCart(false);ShowBetParlay(true);};this.SetParlayAmountBet=function(betIndexId,amount){$('#txtAmountParlay_'+prefixId+betIndexId).val(amount);this.UpdateParlayTypeAmount(betIndexId,parseFloat(amount));};this.TicketEdit=function(betIndexId){var enableToEditTicket=true;if((!this.HasPermisionEditPhone&&_isModeEdit)){enableToEditTicket=false;alert(messages.ErrorPermissionEdit);}
if(enableToEditTicket){}
if(enableToEditTicket){if(!_editTicket){_editTicket=true;_editIndexBetId=betIndexId;betCollection[_editIndexBetId].EditMode=true;if(betCollection[betIndexId].PoolId>=1000){SetAmountToParlay(betCollection[_editIndexBetId],$('#txtAmountParlay_'+prefixId+_editIndexBetId).val(),true);}
_messageParlay=messages.lblEditingParlay;this.GetshoppingCart(false);$('#dvBetFinish_'+prefixId+betIndexId).removeClass('sHideElement');$('#dvBetCancel_'+prefixId+betIndexId).removeClass('sHideElement');if(betCollection[betIndexId].PoolId<1000){if(typeof shoppingCartEdit!=="undefined"){shoppingCartEdit.ShowHideBlockBetSlip(betIndexId,true);}}
shoppingCartEditNewBet=new shoppingCartClass('','',2);if(betCollection[betIndexId].PoolId>1000){newObject=jQuery.extend(true,{},betCollection[betIndexId]);shoppingCartEditNewBet.AddBetshoppingCartObject(newObject);shoppingCartEditNewBet.RemoveEntryScratchedParlay();shoppingCartEdit.LoadNewTicketToEditing();}
_poolCodeSelected=betCollection[betIndexId].PoolId;returnObjById("_PoolTypeOnClient").value=betCollection[betIndexId].PoolId;showWagerInformation=true;if(_tempOrginalTextAddBet===''){_tempOrginalTextAddBet=$('#aCallSendBetTop .sSpAddBetCart').text().trim();}
$('.sSpAddBetCart').text(messages.lblPhoneReplaceTicket);$('#dvBetSlipContenerNewBet_'+prefixId+shoppingCartEdit.GetInformaionTicketEdit().TicketConfirmation).removeClass('sHideElement');$('#dvBetSlipBetShowBetOriginalIndex_'+prefixId+_editIndexBetId).removeClass('sHideElement');$('#dvBetSlipBetDeleteIndex_'+prefixId+_editIndexBetId).addClass('sHideElement');if(betCollection[betIndexId].PoolId>1000){var betCollectionParlay=betCollection[betIndexId].ParlayInformationBet;if(betCollectionParlay!=undefined&&betCollectionParlay.ParlayRunners!=undefined){for(t=0;t<betCollectionParlay.ParlayRunners.length;t++){for(te=0;te<betCollectionParlay.ParlayRunners[t].TrackEvent.length;te++){for(r=0;r<betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races.length;r++){ShowTrackInformation(betCollectionParlay.ParlayRunners[t].TrackId,betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].RaceNumberId,betCollectionParlay.ParlayRunners[t].TrackEvent[te].TrackEventId,'false','');return;}}}}}
else{ShowTrackInformation(betCollection[betIndexId].TrackId,betCollection[betIndexId].RaceList,betCollection[betIndexId].TrackEvent,'false','');}
if(betCollection[betIndexId].Box=='True'){setTimeout(function(){setBox();},100);}
if(betCollection[betIndexId].BoxWithKey=='True'){setTimeout(function(){setBoxWithKey();},100);}}}};this.LoadInformationRunnerEdit=function(loadNewBet){if(_editIndexBetId!=-1||loadNewBet){var betIndexId=loadNewBet?0:_editIndexBetId;var basicIdCheck='dvtlbRunners';var basicIdText='tlbRunners';if(betCollection[betIndexId].TrackId==_trackCode&&betCollection[betIndexId].RaceList==_raceId&&betCollection[betIndexId].TrackEvent==_trackEvent&&betCollection[betIndexId].PoolId==_poolCodeSelected&&_poolCodeSelected<1000){$('#betAmount').val(betCollection[betIndexId].BetAmountClient);let informationRunnerEdit;switch(betCollection[betIndexId].PoolId){case "0":case "1":case "2":case "3":informationRunnerEdit=betCollection[betIndexId].HorseList.split(",");for(var iniInfo=0;iniInfo<informationRunnerEdit.length;iniInfo++){var informationRunnerEditPosition=informationRunnerEdit[iniInfo].split(":");var pnSelected=informationRunnerEditPosition[0].trim();var amountSelected=informationRunnerEditPosition[1].split("/");for(var amountPosition=0;amountPosition<amountSelected.length;amountPosition++){var amountConvert=parseFloat(amountSelected[amountPosition]);if(!isNaN(amountConvert)&&amountConvert!="0"){var runnerToCheck=basicIdText+'1_ckb'+(amountPosition+1)+'__'+pnSelected;$('#'+runnerToCheck).val(amountConvert);}}}
break;case "4":case "5":case "6":case "7":informationRunnerEdit=betCollection[betIndexId].HorseList.split("/");for(let iniInfo=0;iniInfo<informationRunnerEdit.length;iniInfo++){let informationRunnerEditPosition=informationRunnerEdit[iniInfo].split(",");for(let iniInfoPosition=0;iniInfoPosition<informationRunnerEditPosition.length;iniInfoPosition++){let runnerToCheck=basicIdCheck+'1_ckb'+(iniInfo+1)+'__'+informationRunnerEditPosition[iniInfoPosition].trim();$('#'+runnerToCheck).click();}}
break;case "8":case "9":case "10":case "11":case "41":informationRunnerEdit=betCollection[betIndexId].HorseList.split("/");for(let iniInfo=0;iniInfo<informationRunnerEdit.length;iniInfo++){let informationRunnerEditPosition=informationRunnerEdit[iniInfo].split(",");for(let iniInfoPosition=0;iniInfoPosition<informationRunnerEditPosition.length;iniInfoPosition++){let runnerToCheck=basicIdCheck+(iniInfo+1)+'_ckb1'+'__'+informationRunnerEditPosition[iniInfoPosition].trim();$('#'+runnerToCheck).click();}}
break;default:break;}}
else{if(_poolCodeSelected>=1000){if(_isModeEditNewBet){var betCollectionParlay=betCollection[betIndexId].ParlayInformationBet;if(betCollectionParlay!==undefined&&betCollectionParlay.ParlayRunners!==undefined){for(t=0;t<betCollectionParlay.ParlayRunners.length;t++){if(betCollectionParlay.ParlayRunners[t]!=undefined&&betCollectionParlay.ParlayRunners[t].TrackId==_trackCode){for(te=0;te<betCollectionParlay.ParlayRunners[t].TrackEvent.length;te++){if(betCollectionParlay.ParlayRunners[t].TrackEvent[te].TrackEventId==_trackEvent){for(r=0;r<betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races.length;r++){if(betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].RaceNumberId==_raceId){for(h=0;h<betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses.length;h++){for(h=0;h<betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses.length;h++){var pn=betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].ProgramNumber;var hp=betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition;if(_parlayType==ParlayType.MultiTrackNormal){hp=1;}
let runnerToCheck=basicIdCheck+'1_ckb'+hp+'__'+pn;$('#'+runnerToCheck).click();}}}}}}}}}}
else{let betCollectionParlay=betCollection[betIndexId].ParlayInformationBet;if(betCollectionParlay!==undefined&&betCollectionParlay.ParlayRunners!==undefined){$('#betAmount').val(betCollection[betIndexId].BetAmountClient);CreateControlTicket();controlTicket.AddNewTicket(0);controlTicket.GetTicketInformation().AddNewBet(_poolCodeSelected,betCollection[betIndexId].BetAmountClient);for(t=0;t<betCollectionParlay.ParlayRunners.length;t++){if(betCollectionParlay.ParlayRunners[t]!==undefined){for(te=0;te<betCollectionParlay.ParlayRunners[t].TrackEvent.length;te++){for(r=0;r<betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races.length;r++){for(h=0;h<betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses.length;h++){controlTicket.GetTicketInformation().GetBetInformation().AddNewBetDetail(betCollectionParlay.ParlayRunners[t].TrackEvent[te].TrackEventId,parseInt(betCollectionParlay.ParlayRunners[t].TrackId,10),betCollectionParlay.ParlayRunners[t].TrackName,parseInt(betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].RaceNumberId,10),betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].ProgramNumber,"",betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorseName,betCollectionParlay.ParlayRunners[t].TrackEvent[te].DateTrackEvent,parseInt(betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition,10))}}}}}
this.ParlayCancel();$('#_hdnParlayPoolTypeSelected').val(_poolCodeSelected);}}}}}};this.ShowTrackInformationEntryParlay=function(chkObjectRequest){chkObjectParlay=chkObjectRequest;var id=$(chkObjectParlay);var trackPosition=$(chkObjectParlay)[0].TrackPositionEntry;var trackEventPosition=$(chkObjectParlay)[0].TrackEventPositionEntry;var racePosition=$(chkObjectParlay)[0].RacePositionEntry;var horsePosition=$(chkObjectParlay)[0].HorsePositionEntry;var response;var optionSelectedParlay=$('#'+this.DropDownParlay).val();var findOtherRace=false;var betCollectionParlayTemp;var trackIdToLoad=betCollection[$(chkObjectParlay)[0].IndexBet].ParlayInformationBet.ParlayRunners[trackPosition].TrackId;var trackEventIdToLoad=betCollection[$(chkObjectParlay)[0].IndexBet].ParlayInformationBet.ParlayRunners[trackPosition].TrackEvent[trackEventPosition].TrackEventId;var raceIdToLoad=betCollection[$(chkObjectParlay)[0].IndexBet].ParlayInformationBet.ParlayRunners[trackPosition].TrackEvent[trackEventPosition].Races[racePosition].RaceNumberId;ShowTrackInformation(trackIdToLoad,raceIdToLoad,trackEventIdToLoad,'false','');};this.EditTicketFinish=function(){if(!$('#dvBetFinish_'+prefixId+_editIndexBetId).hasClass('sDvParlayOptionDisable')){var validAllInformation=shoppingCartEditNewBet.AllBetCorrectToPlace();if(!validAllInformation){alert(shoppingCartEditNewBet.MessageErrorToPlace());}
else{if(_parlayType==ParlayType.MultiTrackNormal){$('#_hdnParlayPoolTypeSelected').val('-1');}
this.ShowHideBlockBetSlip(_editIndexBetId,false);$('#dvParlayFinish').addClass('sHideElement');$('#dvParlayCancel').addClass('sHideElement');$('#dvBetSlipBetDeleteIndex_'+prefixId+_editIndexBetId).removeClass('sHideElement');betCollection[_editIndexBetId].EditMode=false;if(betCollection[_editIndexBetId].PoolId>1000){SetAmountToParlay(betCollection[_editIndexBetId],$('#txtAmountParlay_'+prefixId+_editIndexBetId).val(),true);SetTotalWagerParlay(betCollection[_editIndexBetId],$('#txtAmountParlay_'+prefixId+_editIndexBetId).val(),true);}
if(typeof shoppingCartEditNewBet!=="undefined"&&shoppingCartEditNewBet.IsEditMode()){shoppingCartEditNewBet.EditUpdateTicketInformation();}
returnObjById("_PoolTypeOnClient").value="0";showWagerInformation=true;lastSelectPoolTypeWasParlay=false;ShowTrackInformation(_trackCode,_raceId,_trackEvent,'false','');submitBetSlip(document.getElementById('dvBetFinish_'+prefixId+_editIndexBetId));}}};this.RestoreLabelButton=function(){if(_tempOrginalTextAddBet!=''){$('.sSpAddBetCart').text(_tempOrginalTextAddBet);_tempOrginalTextAddBet='';}};this.EditUpdateTicketInformation=function(){if(betCollection[_editIndexBetId].PoolId>1000){SetAmountToParlay(betCollection[_editIndexBetId],$('#txtAmountParlay_'+prefixId+_editIndexBetId).val(),true);SetTotalWagerParlay(betCollection[_editIndexBetId],$('#txtAmountParlay_'+prefixId+_editIndexBetId).val(),true);}};this.EditTicketCancel=function(){this.ShowHideBlockBetSlip(_editIndexBetId,false);$('#dvBetSlipBetDeleteIndex_'+prefixId+_editIndexBetId).removeClass('sHideElement');_editTicket=false;_editIndexBetId=-1;lastSelectPoolTypeWasParlay=false;$('#_hdnParlayPoolTypeSelected').val(-1);var addInformation=GetAddInformationBetSessionStorage();var response=Racebook.LoadPendingTicket(_sessionSSC,_token,addInformation);if(response.error!=null){alert("EditTicketCancel"+response.error);return;}
try{eval(response.value);}
catch(er){window.status="EditTicketCancel :: "+er.name+er.message;}
this.GetshoppingCart(false);ShowTrackInformation(_trackCode,_raceId,_trackEvent,'false','');if(_tempOrginalTextAddBet!=''){$('.sSpAddBetCart').text(_tempOrginalTextAddBet);}
_tempOrginalTextAddBet='';shoppingCartEditNewBet=undefined;};this.IsEditMode=function(){return _editTicket;};this.EditPalayerIndexBetId=function(){return _editIndexBetId;};this.NextIndexBet=function(){return betCollection.length;};this.GetshoppingCart=function(showResultBet){if(_isModeReadBack){this.GetshoppingReadBack(showResultBet,false);}
else{this.GetshoppingCartBet(showResultBet);}};this.GetshoppingCartReadbackAutoConfirm=function(){this.GetshoppingReadBack(true,true);};this.GetshoppingReadBack=function(showResultBet,autoConfirm){try{var countBet=0;var tableErrorIdJquery='#'+this.TableMessageErrorId;var tlbBetSlip=returnObjById(this.TableId);if(tableErrorIdJquery!='#'){$(tableErrorIdJquery).hide(500);}
if(tlbBetSlip===null||tlbBetSlip===undefined){return false;}
tlbBetSlip.style.display='';if(this.TableTicketId!=''){returnObjById(this.TableTicketId).style.display='none';}
var aRow,aCell,spanTemp,spanTemp2,spanTem3p,newLine,aDiv,rDiv,tlbBetSlipNewBet,aRowMain,aCellMain,aRowMainContent;var i,col;var isAlternating=false;var classRow;var tempTable;var isEmptyBetSlip=true;for(i=tlbBetSlip.rows.length;i>0;i--){tlbBetSlip.deleteRow(i-1);}
aRowMain=tlbBetSlip.insertRow(-1);aCellMain=aRowMain.insertCell(-1);var value=$('#dvBetSlipTotalLabelReadback').text();if(value.indexOf(this.CurrencyISO)==-1&&value.indexOf(this.CurrencySymbol)==-1){$('#dvBetSlipTotalLabelReadback').text($('#dvBetSlipTotalLabelReadback').text()+' '+this.Currency);}
var realI=0;var totalAmountBetSlip=0;var totalCountBets=0;var totalCountBetsEdited=0;var numberBet=1;var aRowMainContentEditBet;var hasEditBet=false;if(showResultBet&&autoConfirm){betCollection.sort(function(a,b){return a.TicketConfirmation-b.TicketConfirmation});}
for(i=0;i<betCollection.length;i++){if(betCollection[i]!=undefined){var hasToShowInformation=false;if(betCollection[i].TicketIsNew){hasToShowInformation=true;}
else{hasEditBet=true;if(!showResultBet){hasToShowInformation=true;}
else{if(betCollection[i].StatusBet==1&&betCollection[i].NewTicketFromTicketToChange){hasToShowInformation=true;}
else{if(betCollection[i].StatusBet==2&&betCollection[i].TicketWasEditedRefered){hasToShowInformation=true;}
else{if(betCollection[i].StatusBet==3&&_isModeReadBackAutoConfirm){hasToShowInformation=true;}}}}}
if(hasToShowInformation){isEmptyBetSlip=false;aRowMainContent=document.createElement("div");if(!showResultBet||_isModeReadBackAutoConfirm){if(betCollection[i].TicketWasEditedRefered){aRowMainContent.className='sDvTicketEditReferedInformation';aRowMainContentEditBet=document.createElement("div");aRowMainContentEditBet.className="sDvTicketEdit";}
if(betCollection[i].NewTicketFromTicketToChange){aRowMainContent.className='sDvTicketEditNewInformation';}}
tlbBetSlipNewBet=document.createElement("table");tlbBetSlipNewBet.id="tblBetSlipContenerBet_"+prefixId+i;tlbBetSlipNewBet.className='sTblBetSlipContenerBet';if(showResultBet&&((betCollection[i].StatusBet==1)||_isModeReadBackAutoConfirm)){tlbBetSlipNewBet.className='sTblBetSlipContenerBetSuccesfully';}
aRow=tlbBetSlipNewBet.insertRow(-1);aRow.indexId=i;aRow.realIndexId=realI;if(isAlternating){aRow.className=_alternatingCss;}
else{aRow.className=_singleCss;}
isAlternating=!isAlternating;classRow=aRow.className;aCell=aRow.insertCell(-1);aCell.colSpan=2;if((showResultBet&&betCollection[i].StatusBet!=0)||_isModeReadBackAutoConfirm){if(betCollection[i].StatusBet==2){if(!betCollection[i].TicketWasEditedRefered){rDiv=document.createElement("div");rDiv.className='tblBetSlipImageConfirmation';aDiv=document.createElement("div");aDiv.className='imgBetsSlipConfirmationErrorBet';aDiv.innerHTML="<div></div>";rDiv.appendChild(aDiv);aDiv=document.createElement("div");spanTemp=document.createElement("span");spanTemp.innerText=messages.lblBetSlipConfirmationErrorSendBet+' '+betCollection[i].ErrorMessage;spanTemp.className="ReadBackRaceLabelError";aDiv.appendChild(spanTemp);rDiv.appendChild(aDiv);aCell.appendChild(rDiv);}
else{rDiv=document.createElement("div");aDiv=document.createElement("div");rDiv.id="trPhoneConfirmationInfo_"+prefixId;rDiv.className="sTrPhoneConfirmationInfo";spanTemp=document.createElement("span");spanTemp.innerText=numberBet+". "+messages.lblTicketEdit+" #";spanTemp.className="spReadBackRaceLabelConfirmation";spanTemp2=document.createElement("span");spanTemp2.innerText=betCollection[i].TicketConfirmation;spanTemp2.className="spReadBackRaceLabelConfirmation";spanTemp3=document.createElement("span");spanTemp3.innerText=" "+messages.lblChangeFailed;spanTemp3.className="spReadBackRaceLabelConfirmationChanged";aDiv.appendChild(spanTemp);aDiv.appendChild(spanTemp2);aDiv.appendChild(spanTemp3);rDiv.appendChild(aDiv);aCell.appendChild(rDiv);rDiv=document.createElement("div");rDiv.className='tblBetSlipImageConfirmation';aDiv=document.createElement("div");aDiv.className='imgBetsSlipConfirmationErrorBet';aDiv.innerHTML="<div></div>";rDiv.appendChild(aDiv);aDiv=document.createElement("div");spanTemp=document.createElement("span");spanTemp.innerText=messages.lblBetSlipConfirmationErrorSendBet+' '+betCollection[i].ErrorMessage;spanTemp.className="ReadBackRaceLabelError";aDiv.appendChild(spanTemp);rDiv.appendChild(aDiv);aCell.appendChild(rDiv);numberBet++;}}
else{if(betCollection[i].StatusBet==3){rDiv=document.createElement("div");rDiv.className='tblBetSlipImageConfirmation';aDiv=document.createElement("div");aDiv.className='imgBetsSlipDeleteBet';rDiv.appendChild(aDiv);aDiv=document.createElement("div");spanTemp=document.createElement("span");spanTemp.innerText=messages.lblBetSlipConfirmationDeleteSendBet;spanTemp.className="ReadBackRaceLabel";aDiv.appendChild(spanTemp);rDiv.appendChild(aDiv);aCell.appendChild(rDiv);rDiv=document.createElement("div");aDiv=document.createElement("div");rDiv.className="sDvBetSlipConfirmationNum";spanTemp=document.createElement("span");spanTemp.innerText=messages.TicketNumber;spanTemp.className="ReadBackRaceLabelConfirmation";spanTemp2=document.createElement("span");spanTemp2.innerText=betCollection[i].TicketConfirmation;spanTemp2.className="ReadBackTicketDelete";aDiv.appendChild(spanTemp);aDiv.appendChild(spanTemp2);rDiv.appendChild(aDiv);aCell.appendChild(rDiv);rDiv=document.createElement("div");rDiv.className="tlbBetSlipConfirmationMiddle";aDiv=document.createElement("div");spanTemp=document.createElement("span");spanTemp.innerText=messages.TicketPostTime+" - ";spanTemp.className="ReadBackRaceLabelConfirmation";aDiv.appendChild(spanTemp);spanTemp2=document.createElement("span");spanTemp2.innerText=betCollection[i].TicketPostTime;spanTemp2.className="ReadBackInformation";aDiv.appendChild(spanTemp2);rDiv.appendChild(aDiv);aCell.appendChild(rDiv);}
else{rDiv=document.createElement("div");rDiv.className='tblBetSlipImageConfirmation';aDiv=document.createElement("div");aDiv.className='imgBetsSlipConfirmationBet';let aDiv2=document.createElement("div");aDiv2.appendChild(aDiv);rDiv.appendChild(aDiv2);aDiv=document.createElement("div");spanTemp=document.createElement("span");spanTemp.innerText=messages.lblBetSlipConfirmationSendBet;spanTemp.className="ReadBackRaceLabel";aDiv.appendChild(spanTemp);rDiv.appendChild(aDiv);aCell.appendChild(rDiv);rDiv=document.createElement("div");aDiv=document.createElement("div");rDiv.className="sDvBetSlipConfirmationNum";spanTemp=document.createElement("span");spanTemp.innerText=messages.TicketNumber;spanTemp.className="ReadBackRaceLabelConfirmation";spanTemp2=document.createElement("span");spanTemp2.innerText=betCollection[i].TicketConfirmation;spanTemp2.className="ReadBackTicket";aDiv.appendChild(spanTemp);aDiv.appendChild(spanTemp2);rDiv.appendChild(aDiv);aCell.appendChild(rDiv);rDiv=document.createElement("div");rDiv.className="tlbBetSlipConfirmationMiddle";aDiv=document.createElement("div");spanTemp=document.createElement("span");spanTemp.innerText=messages.TicketPostTime+" - ";spanTemp.className="ReadBackRaceLabelConfirmation";aDiv.appendChild(spanTemp);spanTemp2=document.createElement("span");spanTemp2.innerText=betCollection[i].TicketPostTime;spanTemp2.className="ReadBackInformation";aDiv.appendChild(spanTemp2);rDiv.appendChild(aDiv);aCell.appendChild(rDiv);if(betCollection[i].TicketIsNew){shoppingCart.RemoveTicketSubmited(betCollection[i].InternalReference);}}}}
else{if(betCollection[i].TicketWasEditedRefered){rDiv=document.createElement("div");aDiv=document.createElement("div");rDiv.id="trPhoneConfirmationInfo_"+prefixId;rDiv.className="sTrPhoneConfirmationInfo";spanTemp=document.createElement("span");spanTemp.innerText=numberBet+". "+messages.lblTicketEdit+" #";spanTemp.className="spReadBackRaceLabelConfirmation";spanTemp2=document.createElement("span");spanTemp2.innerHTML=betCollection[i].TicketConfirmation;spanTemp2.className="spReadBackRaceLabelConfirmation";spanTemp3=document.createElement("span");spanTemp3.innerHTML=" "+messages.lblChanged;spanTemp3.className="spReadBackRaceLabelConfirmationChanged";aDiv.appendChild(spanTemp);aDiv.appendChild(spanTemp2);aDiv.appendChild(spanTemp3);rDiv.appendChild(aDiv);aCell.appendChild(rDiv);numberBet++;}
if(betCollection[i].NewTicketFromTicketToChange){rDiv=document.createElement("div");aDiv=document.createElement("div");aDiv.innerHTML="&nbsp;&nbsp;&nbsp;";rDiv.appendChild(aDiv);aCell.appendChild(rDiv);}}
if(parseInt(betCollection[i].PoolCode,10)<1000){aRow=tlbBetSlipNewBet.insertRow(-1);aRow.className=classRow;aCell=aRow.insertCell(-1);aCell.colSpan=2;rDiv=document.createElement("div");rDiv.className="sDvBetSlipRow";aDiv=document.createElement("div");aDiv.innerHTML=betCollection[i].InformationBet1+', '+betCollection[i].InformationBet2+', '+betCollection[i].InformationBet3;aDiv.className="sTdBetSlipTextInfo";rDiv.appendChild(aDiv);aCell.appendChild(rDiv);aRow=tlbBetSlipNewBet.insertRow(-1);if(_isModeEdit){aRow.className=classRow+' sTrRowInformationEdit';}
else{aRow.className=classRow;}
aCell=aRow.insertCell(-1);aCell.colSpan=2;rDiv=document.createElement("div");rDiv.id="dvBetSlipHeaderBet"+prefixId+i;rDiv.className="sDvBetSlipRow sDvBetSlipHeaderBet";aDiv=document.createElement("div");var poolTypeNameText="";if(!showResultBet&&!betCollection[i].NewTicketFromTicketToChange&&!betCollection[i].TicketWasEditedRefered){poolTypeNameText=numberBet+". ";numberBet++;}
else{if(!showResultBet&&betCollection[i].NewTicketFromTicketToChange){poolTypeNameText=messages.lblEditNewTicket+" ";}
if(!showResultBet&&betCollection[i].TicketWasEditedRefered){poolTypeNameText=messages.lblEditOldTicket+" ";}
if(showResultBet){if(betCollection[i].StatusBet==2&&!betCollection[i].TicketWasEditedRefered&&!betCollection[i].NewTicketFromTicketToChange){poolTypeNameText=numberBet+". ";numberBet++;}}}
if((betCollection[i].PoolCode==='4'||betCollection[i].PoolCode==='5'||betCollection[i].PoolCode==='6'||betCollection[i].PoolCode==='7')&&betCollection[i].Box=="True"||betCollection[i].BoxWithKey=="True"){if(betCollection[i].Box=="True"){poolTypeNameText+=betCollection[i].PoolTypeName+' '+messages.lblBox;}
else if(betCollection[i].BoxWithKey=="True"){poolTypeNameText+=betCollection[i].PoolTypeName+' '+messages.lblBoxWithKey;}
else{poolTypeNameText+=betCollection[i].PoolTypeName;}
aDiv.innerHTML=GetDescriptionInformation(betCollection[i].PoolId,betCollection[i].InformationBet4,betCollection[i].RaceId,true,betCollection[i].HorsesArray,betCollection[i].BetAmountClient,poolTypeNameText,this.CurrencySymbol);aDiv.className="sDvlblBetpSlipNamePoolTypeHeader";}
else{if(parseInt(betCollection[i].PoolCode,10)>=1000){var aDivParlayName=document.createElement("div");var aDivParlayDropDown=document.createElement("div");if(_parlayType==ParlayType.MultiTrackNormal){var options=new Array();options[0]=new Array();options[0][0]='1001';options[0][1]=messages.lblWin;options[1]=new Array();options[1][0]='1002';options[1][1]=messages.lblPlace;options[2]=new Array();options[2][0]='1003';options[2][1]=messages.lblShow;options[3]=new Array();options[3][0]='1004';options[3][1]='W/P';options[4]=new Array();options[4][0]='1005';options[4][1]='W/S';options[5]=new Array();options[5][0]='1006';options[5][1]='P/S';options[6]=new Array();options[6][0]='1007';options[6][1]='W/P/S';var valueSelectDefault=''
if(betCollection[i].PoolCode==='1000'){valueSelectDefault=options[0][0];}
else{valueSelectDefault=betCollection[i].PoolCode;}
if(valueSelectDefault=='1001'){poolTypeNameText+=messages.lblWin;}
if(valueSelectDefault=='1002'){poolTypeNameText+=messages.lblPlace;}
if(valueSelectDefault=='1003'){poolTypeNameText+=messages.lblShow;}
if(valueSelectDefault=='1004'){poolTypeNameText+='W/P';}
if(valueSelectDefault=='1005'){apoolTypeNameText+='W/S';}
if(valueSelectDefault=='1006'){poolTypeNameText+='P/S';}
if(valueSelectDefault=='1007'){poolTypeNameText+='W/P/S';}}
if(betCollection[i].ParlayInformationBet!==null&&betCollection[i].ParlayInformationBet.TotalEntries!==null){poolTypeNameText+=' '+messages.lblParlay.replace('{0}',betCollection[i].ParlayInformationBet.TotalEntries);}
else{poolTypeNameText+=' '+messages.lblParlay.replace('{0}',0);}
if(betCollection[i].NewTicketFromTicketToChange&&!showResultBet&&(!betCollection[i].NewTicketFromTicketToChange&&!betCollection[i].TicketWasEditedRefered)){poolTypeNameText+=' ('+messages.lblNewTicket+')';}else{if(betCollection[i].TicketIsNew&&!showResultBet&&(!betCollection[i].NewTicketFromTicketToChange&&!betCollection[i].TicketWasEditedRefered)){poolTypeNameText+=' ('+messages.lblNewTicket+')';}}
aDivParlayName.innerHTML=poolTypeNameText;aDivParlayName.className="sDvlblBetpSlipNamePoolTypeHeader";aDiv.className="sDvParlayLayoutBet";aDiv.appendChild(aDivParlayDropDown);aDiv.appendChild(aDivParlayName);}
else{if(betCollection[i].NewTicketFromTicketToChange&&!showResultBet&&(!betCollection[i].NewTicketFromTicketToChange&&!betCollection[i].TicketWasEditedRefered)){poolTypeNameText+=betCollection[i].PoolTypeName+' ('+messages.lblNewTicket+')';}else{if(betCollection[i].TicketIsNew&&!showResultBet&&(!betCollection[i].NewTicketFromTicketToChange&&!betCollection[i].TicketWasEditedRefered)){poolTypeNameText+=betCollection[i].PoolTypeName+' ('+messages.lblNewTicket+')';}
else{poolTypeNameText+=betCollection[i].PoolTypeName;}}
aDiv.innerHTML=GetDescriptionInformation(betCollection[i].PoolId.toString(),betCollection[i].InformationBet4,betCollection[i].RaceId,true,betCollection[i].HorsesArray,betCollection[i].BetAmountClient,poolTypeNameText,this.CurrencySymbol);aDiv.className="sDvlblBetpSlipNamePoolTypeHeader";}}
if(showResultBet&&betCollection[i].StatusBet==1){aDiv.className="lblBetpSlipNamePoolTypeHeaderConfirmation";}
rDiv.appendChild(aDiv);aCell.appendChild(rDiv);aRow=tlbBetSlipNewBet.insertRow(-1);if(_isModeEdit){aRow.className=classRow+' sTrRowInformationEdit';}
else{aRow.className=classRow;}
aCell=aRow.insertCell(-1);if(betCollection[i].PoolCode==='0'){aCell=aRow.insertCell(-1);aCell.innerHTML=showDetailStraight(betCollection[i],isAlternating,false,prefixId+i,(betCollection[i].StatusBet!=1),true,this.CurrencySymbol);aCell.id="detail_"+prefixId+i;aCell.indexId=i;aCell.realIndexId=realI;aCell.className="sDvBetSlipRowReadback";if(parseFloat(betCollection[i].TotalTax)!==0||parseFloat(betCollection[i].TotalFee)!==0){aRow=tlbBetSlipNewBet.insertRow(-1);aCell=aRow.insertCell(-1);aCell.colSpan=2;aCell.innerHTML=showTaxInformation(betCollection[i].TotalTax,betCollection[i].TotalFee);}}
aRow=tlbBetSlipNewBet.insertRow(-1);if(_isModeEdit){aRow.className=classRow+' sTrRowInformationEdit';}
else{aRow.className=classRow;}
aCell=aRow.insertCell(-1);aCell.colSpan=2;rDiv=document.createElement("div");rDiv.className="sDvBetSlipRow";aDiv=document.createElement("div");if(betCollection[i].PoolCode==='0'){if(parseInt(betCollection[i].TotalCombinations,10)==1){aDiv.innerHTML=betCollection[i].TotalCombinations+" "+messages.lblTotalBetTicketBetSlip;}
else{aDiv.innerHTML=betCollection[i].TotalCombinations+" "+messages.lblTotalBetsTicketBetSlip;}}
else{if(parseInt(betCollection[i].TotalCombinations,10)==1){aDiv.innerHTML=betCollection[i].TotalCombinations+" "+messages.lblTotalBetTicketBetSlip;}
else{aDiv.innerHTML=betCollection[i].TotalCombinations+" "+messages.lblTotalBetsTicketBetSlip;}}
aDiv.className="sDvBetSlipBetAmount";if(showResultBet&&betCollection[i].StatusBet==1){aDiv.className="sDvBetSlipBetAmountConfirmation";}
rDiv.appendChild(aDiv);aDiv=document.createElement("div");if(betCollection[i].PoolCode!=0){aDiv.className="sDvBetSlipStraightAmount";}
else{aDiv.className="sDvBetSlipStraightAmountSubTotal";}
rDiv.appendChild(aDiv);aCell.appendChild(rDiv);if(betCollection[i].PoolCode!=='0'){if(parseFloat(betCollection[i].TotalTax)!==0||parseFloat(betCollection[i].TotalFee)!==0){aRow=tlbBetSlipNewBet.insertRow(-1);aCell=aRow.insertCell(-1);aCell.colSpan=2;aCell.innerHTML=showTaxInformation(betCollection[i].TotalTax,betCollection[i].TotalFee);}}
aRow=tlbBetSlipNewBet.insertRow(-1);if(_isModeEdit){aRow.className=classRow+' sTrRowInformationEdit';}
else{aRow.className=classRow;}
aCell=aRow.insertCell(-1);aCell.colSpan=2;rDiv=document.createElement("div");rDiv.className="sDvBetSlipRow sDvBetSlipTotal";aDiv=document.createElement("div");if(betCollection[i].PoolCode!=='0'){var aDivDetail=document.createElement("div");aDivDetail.id="detail_"+prefixId+i;aDivDetail.indexId=i;aDivDetail.realIndexId=realI;aDivDetail.innerHTML=messages.ViewDetailWager;aDivDetail.className="sDvBetSlipDetail";aDivDetail.onmouseover=showDetail;aDivDetail.onmouseleave=hideDetail;aDivDetail.onclick=showDetailClick;aDiv.appendChild(aDivDetail);var aDivDetail2=document.createElement("div");aDivDetail2.id="detailInfo_"+prefixId+i;aDiv.appendChild(aDivDetail2);}
rDiv.appendChild(aDiv);aDiv=document.createElement("div");aDiv.innerHTML=messages.lblTotalTicket;aDiv.className="sDvBetSlipBetAmount";if(betCollection[i].StatusBet==1){aDiv.className="sDvBetSlipBetAmountConfirmation";}
rDiv.appendChild(aDiv);aDiv=document.createElement("div");aDiv.innerHTML=this.CurrencySymbol+betCollection[i].TotalWager;aDiv.className="sDvBetSlipStraightAmountSubTotal sDvBetSlipStraightAmountSubTotalReadback";rDiv.appendChild(aDiv);aCell.appendChild(rDiv);}
else{aRow=tlbBetSlipNewBet.insertRow(-1);if(_isModeEdit){aRow.className=classRow+' sTrRowInformationEdit';}
else{aRow.className=classRow;}
aCell=aRow.insertCell(-1);aCell.colSpan=2;rDiv=document.createElement("div");rDiv.id="dvBetSlipHeaderBet"+prefixId+i;rDiv.className="sDvBetSlipRow sDvBetSlipHeaderBet";aDiv=document.createElement("div");var poolTypeNameText="";if(!showResultBet&&!betCollection[i].NewTicketFromTicketToChange&&!betCollection[i].TicketWasEditedRefered){poolTypeNameText=numberBet+". ";numberBet++;}
else{if(!showResultBet&&betCollection[i].NewTicketFromTicketToChange){poolTypeNameText=messages.lblEditNewTicket+" ";}
if(!showResultBet&&betCollection[i].TicketWasEditedRefered){poolTypeNameText=messages.lblEditOldTicket+" ";}
if(showResultBet){if(betCollection[i].StatusBet==2&&!betCollection[i].TicketWasEditedRefered&&!betCollection[i].NewTicketFromTicketToChange){poolTypeNameText=numberBet+". ";numberBet++;}}}
if((betCollection[i].PoolCode==='4'||betCollection[i].PoolCode==='5'||betCollection[i].PoolCode==='6'||betCollection[i].PoolCode==='7')&&betCollection[i].Box=="True"||betCollection[i].BoxWithKey=="True"){if(betCollection[i].Box=="True"){poolTypeNameText+=betCollection[i].PoolTypeName+' '+messages.lblBox;}
else if(betCollection[i].BoxWithKey=="True"){poolTypeNameText+=betCollection[i].PoolTypeName+' '+messages.lblBoxWithKey;}
else{poolTypeNameText+=betCollection[i].PoolTypeName;}
aDiv.innerHTML=poolTypeNameText;aDiv.className="sDvlblBetpSlipNamePoolTypeHeader";}
else{if(parseInt(betCollection[i].PoolCode,10)>=1000){var aDivParlayName=document.createElement("div");var aDivParlayDropDown=document.createElement("div");if(_parlayType==ParlayType.MultiTrackNormal){var options=new Array();options[0]=new Array();options[0][0]='1001';options[0][1]=messages.lblWin;options[1]=new Array();options[1][0]='1002';options[1][1]=messages.lblPlace;options[2]=new Array();options[2][0]='1003';options[2][1]=messages.lblShow;options[3]=new Array();options[3][0]='1004';options[3][1]='W/P';options[4]=new Array();options[4][0]='1005';options[4][1]='W/S';options[5]=new Array();options[5][0]='1006';options[5][1]='P/S';options[6]=new Array();options[6][0]='1007';options[6][1]='W/P/S';var valueSelectDefault=''
if(betCollection[i].PoolCode==='1000'){valueSelectDefault=options[0][0];}
else{valueSelectDefault=betCollection[i].PoolCode;}
if(valueSelectDefault=='1001'){poolTypeNameText+=messages.lblWin;}
if(valueSelectDefault=='1002'){poolTypeNameText+=messages.lblPlace;}
if(valueSelectDefault=='1003'){poolTypeNameText+=messages.lblShow;}
if(valueSelectDefault=='1004'){poolTypeNameText+='W/P';}
if(valueSelectDefault=='1005'){apoolTypeNameText+='W/S';}
if(valueSelectDefault=='1006'){poolTypeNameText+='P/S';}
if(valueSelectDefault=='1007'){poolTypeNameText+='W/P/S';}}
if(betCollection[i].ParlayInformationBet!==null&&betCollection[i].ParlayInformationBet.TotalEntries!==null){poolTypeNameText+=' '+messages.lblParlay.replace('{0}',betCollection[i].ParlayInformationBet.TotalEntries);}
else{poolTypeNameText+=' '+messages.lblParlay.replace('{0}',0);}
if(betCollection[i].NewTicketFromTicketToChange&&!showResultBet&&(!betCollection[i].NewTicketFromTicketToChange&&!betCollection[i].TicketWasEditedRefered)){poolTypeNameText+=' ('+messages.lblNewTicket+')';}else{if(betCollection[i].TicketIsNew&&!showResultBet&&(!betCollection[i].NewTicketFromTicketToChange&&!betCollection[i].TicketWasEditedRefered)){poolTypeNameText+=' ('+messages.lblNewTicket+')';}}
aDivParlayName.innerHTML=poolTypeNameText;aDivParlayName.className="sDvlblBetpSlipNamePoolTypeHeader";aDiv.className="sDvParlayLayoutBet";aDiv.appendChild(aDivParlayDropDown);aDiv.appendChild(aDivParlayName);}
else{if(betCollection[i].NewTicketFromTicketToChange&&!showResultBet&&(!betCollection[i].NewTicketFromTicketToChange&&!betCollection[i].TicketWasEditedRefered)){poolTypeNameText+=betCollection[i].PoolTypeName+' ('+messages.lblNewTicket+')';}else{if(betCollection[i].TicketIsNew&&!showResultBet&&(!betCollection[i].NewTicketFromTicketToChange&&!betCollection[i].TicketWasEditedRefered)){poolTypeNameText+=betCollection[i].PoolTypeName+' ('+messages.lblNewTicket+')';}
else{poolTypeNameText+=betCollection[i].PoolTypeName;}}
aDiv.innerHTML=poolTypeNameText;aDiv.className="sDvlblBetpSlipNamePoolTypeHeader";}}
if(showResultBet&&betCollection[i].StatusBet==1){aDiv.className="lblBetpSlipNamePoolTypeHeaderConfirmation";}
rDiv.appendChild(aDiv);aCell.appendChild(rDiv);var betCollectionParlay=betCollection[i].ParlayInformationBet;if(betCollectionParlay!==undefined&&betCollectionParlay!==null){betCollection[i].ParlayInformationBet.TotalEntries=0;betCollection[i].ParlayInformationBet.TotalEntriesAdded=0;for(t=0;t<betCollectionParlay.ParlayRunners.length;t++){if(betCollectionParlay.ParlayRunners[t]!=undefined){for(te=0;te<betCollectionParlay.ParlayRunners[t].TrackEvent.length;te++){if(betCollectionParlay.ParlayRunners[t].TrackEvent[te]!=undefined){for(r=0;r<betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races.length;r++){var trackAndRaceNumberIsAdd=false;if(betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r]!=undefined){for(h=0;h<betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses.length;h++){if(betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h]!=undefined){var optionSelectedParlay='';if(_parlayType==ParlayType.MultiTrackCombined){optionSelectedParlay="1000";}
else{optionSelectedParlay=betCollection[i].PoolCode;}
if((optionSelectedParlay=="1001"&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].WinParlay)||(optionSelectedParlay=="1002"&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].PlaceParlay)||(optionSelectedParlay=="1003"&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].ShowParlay)||(optionSelectedParlay=="1004"&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].WinParlay&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].PlaceParlay)||(optionSelectedParlay=="1005"&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].WinParlay&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].ShowParlay)||(optionSelectedParlay=="1006"&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].ShowParlay&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].PlaceParlay)||(optionSelectedParlay=="1007"&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].WinParlay&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].ShowParlay&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].PlaceParlay)||optionSelectedParlay=="1000"){betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].EnableBet=true;betCollection[i].ParlayInformationBet.TotalEntries+=1;}
else{betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].EnableBet=false;betCollection[i].HasAnError=true;}
betCollection[i].ParlayInformationBet.TotalEntriesAdded+=1;if(!trackAndRaceNumberIsAdd){trackAndRaceNumberIsAdd=true;raceNumberIsAdd=true;aRow=tlbBetSlipNewBet.insertRow(-1);if(_isModeEdit){aRow.className=classRow+' sTrRowInformationEdit';}
else{aRow.className=classRow;}
aCell=aRow.insertCell(-1);if(betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].EnableBet){aCell.className="sTdSpaceBelSlipInformationTicket";}
else{aCell.className="sTdSpaceBelSlipInformationTicket sDvBetSlipErrorLineTop";}
aDiv=document.createElement("div");aCell.appendChild(aDiv);aCell=aRow.insertCell(-1);rDiv=document.createElement("div");rDiv.className="sDvBetSlipRow";aDiv=document.createElement("div");aDiv.innerHTML=betCollectionParlay.ParlayRunners[t].TrackEvent[te].DateTrackEvent+', '+betCollectionParlay.ParlayRunners[t].TrackName+', '+betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].RaceNumber;if(betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].EnableBet){if(betCollection[i].EditMode&&!_isModeEdit||_isModeEditNewBet){aDiv.className='sTdBetSlipTextInfo';aDiv.TrackPositionEntry=t;aDiv.TrackEventPositionEntry=te;aDiv.RacePositionEntry=r;aDiv.HorsePositionEntry=h;aDiv.IndexBet=i;}
else{aDiv.className='sTdBetSlipTextInfo';}}
else{aDiv.className='sTdBetSlipTextInfo sDvBetSlipErrorDetail';}
rDiv.appendChild(aDiv);aCell.appendChild(rDiv);}
aRow=tlbBetSlipNewBet.insertRow(-1);if(_isModeEdit){aRow.className=classRow+' sTrRowInformationEdit';}
else{aRow.className=classRow;}
aCell=aRow.insertCell(-1);aDiv=document.createElement("div");if(betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].EnableBet){aCell.className="";}
else{aCell.className="sDvBetSlipErrorLineButton";}
aDiv=document.createElement("div");aCell.appendChild(aDiv);aCell=aRow.insertCell(-1);rDiv=document.createElement("div");rDiv.className="sDvBetSlipRow sDvBetSlipRowParlayReadback";aDiv=document.createElement("div");aDiv.id='dvDetailParlayRunners_'+prefixId+i;if(betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].EnableBet){if(betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].RunnerIsScratch=='true'){aDiv.className='sDvBetSlipRunnerScratched';}
else{aDiv.className='';}
aDiv.innerHTML=showDetailParlay(betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h],isAlternating,false,prefixId+i);}
else{aDiv.className='sDvBetSlipErrorDetail';aDiv.innerHTML=messages.lblErrorMesssageDoesNotAllowBetType;}
rDiv.appendChild(aDiv);aDiv=document.createElement("div");rDiv.appendChild(aDiv);aCell.appendChild(rDiv);}}}}}}}}
aRow=tlbBetSlipNewBet.insertRow(-1);if(_isModeEdit){aRow.className=classRow+' sTrRowInformationEdit';}
else{aRow.className=classRow;}
aCell=aRow.insertCell(-1);aCell.colSpan=2;rDiv=document.createElement("div");rDiv.className="sDvBetSlipRow";aDiv=document.createElement("div");if(parseInt(betCollection[i].TotalCombinations,10)==1){aDiv.innerHTML=betCollection[i].TotalCombinations+" "+messages.lblTotalBetTicketBetSlip+" @";}
else{aDiv.innerHTML=betCollection[i].TotalCombinations+" "+messages.lblTotalBetsTicketBetSlip+" @";}
aDiv.className="sDvBetSlipBetAmount";if(betCollection[i].StatusBet==1){aDiv.className="sDvBetSlipBetAmountConfirmation";}
rDiv.appendChild(aDiv);aDiv=document.createElement("div");aDiv.className="sDvBetSlipStraightAmountSubTotal";var inputBetAmount=document.createElement("input");inputBetAmount.id="txtAmountParlay_"+prefixId+i;if(betCollection[i].StatusBet!=1){inputBetAmount.className="sTextboxNumericParlayAmount";inputBetAmount.className="sTextboxNumericParlayAmount sTextboxNumericParlayAmountDisable";}
else{inputBetAmount.className="sTextboxNumericParlayAmountConfirmation";}
if(isMobile.any()){inputBetAmount.type='number';}
inputBetAmount.value=betCollection[i].BetAmountClient;inputBetAmount.readOnly=true;aDiv.appendChild(inputBetAmount);rDiv.appendChild(aDiv);aCell.appendChild(rDiv);aRow=tlbBetSlipNewBet.insertRow(-1);if(_isModeEdit){aRow.className=' sTrRowInformationEdit';}
aCell=aRow.insertCell(-1);aCell.colSpan=3;rDiv=document.createElement("div");rDiv.className="sDvBetSlipRow";aDiv=document.createElement("div");{if(betCollection[i].PoolCode!=='0'){let aDivDetail=document.createElement("div");aDivDetail.id="detail_"+prefixId+i;aDivDetail.indexId=i;aDivDetail.realIndexId=realI;aDivDetail.innerHTML=messages.ViewDetailWager;aDivDetail.className="sDvBetSlipDetail";aDivDetail.onmouseover=showDetail;aDivDetail.onmouseleave=hideDetail;aDivDetail.onclick=showDetailClick;aDiv.appendChild(aDivDetail);let aDivDetail2=document.createElement("div");aDivDetail2.id="detailInfo_"+prefixId+i;aDiv.appendChild(aDivDetail2);}}
rDiv.appendChild(aDiv);aDiv=document.createElement("div");aDiv.className="sDvParlayBetAmount";aDiv.innerText=messages.lblTotalTicket+" ";if(betCollection[i].StatusBet==1){aDiv.className="sDvBetSlipBetAmountConfirmation";}
rDiv.appendChild(aDiv);aDiv=document.createElement("div");aDiv.id="dvBetSlipParlatTotaWager_"+prefixId+i;aDiv.className="sDvBetSlipStraightAmountSubTotal";aDiv.innerHTML=betCollection[i].TotalWager;rDiv.appendChild(aDiv);aCell.appendChild(rDiv);}}
aRowMainContent.appendChild(tlbBetSlipNewBet);if((!showResultBet||_isModeReadBackAutoConfirm)&&(betCollection[i].NewTicketFromTicketToChange||betCollection[i].TicketWasEditedRefered)){if(betCollection[i].NewTicketFromTicketToChange){aDiv=document.createElement("div");aDiv.className="dvEditImage";aDiv.innerHTML="<div><div><div><div></div></div></div></div>";aRowMainContentEditBet.appendChild(aDiv);}
aRowMainContentEditBet.appendChild(aRowMainContent);if(betCollection[i].NewTicketFromTicketToChange){aCellMain.appendChild(aRowMainContentEditBet);}}
else{aCellMain.appendChild(aRowMainContent);}
if((showResultBet&&betCollection[i].StatusBet==2)||!showResultBet||autoConfirm){if(betCollection[i].TicketIsNew){countBet+=1;totalCountBets+=parseInt(betCollection[i].TotalCombinations,10);}
if(betCollection[i].TicketIsNew||betCollection[i].NewTicketFromTicketToChange){totalAmountBetSlip+=parseFloat(betCollection[i].TotalWager);}
if(betCollection[i].TicketWasEditedRefered){totalCountBetsEdited+=1;}}}}
realI+=1;UpdateBetReadyToPlace(betCollection,i);if(showResultBet&&betCollection[i]!=undefined&&betCollection[i].StatusBet==1){if(!_isModeReadBack&&!_isModeReadBackAutoConfirm){this.DeleteBetshoppingCartById(i);}}}
aDiv=document.createElement("div");aDiv.className="sDvReadBackEndBetSlip";aDiv.innerHTML=messages.lblEndBetSlip;aCellMain.appendChild(aDiv);UpdateDescriptionBetSlip(countBet,totalCountBets,totalAmountBetSlip,totalCountBetsEdited);if(hasEditBet){$('#dvEditBetBetSlipReadback').show();}
else{$('#dvEditBetBetSlipReadback').hide();}
if(countBet==0){$('#dvNumberBetBetSlipReadback').hide();}
else{$('#dvNumberBetBetSlipReadback').show();}
this.CountBetEnable=countBet;this.ResetDivInformation(showResultBet);if(this.IsEditMode()){this.RefreshOptionParlays(this.EditPalayerIndexBetId());}
if(_isModeReadBack&&showResultBet||_isModeReadBackAutoConfirm){shoppingCart.GetshoppingCart(false);}}
catch(er){alert("GetshoppingReadBack :: "+er.number+" :: "+er.message);}};this.GetshoppingCartBet=function(showResultBet){var notifyUpdateBalance=false;try{var countBet=0;var tableErrorIdJquery='#'+this.TableMessageErrorId;var tlbBetSlip=returnObjById(this.TableId);if(this.TableMessageErrorId!=null&&this.TableMessageErrorId!=""){$(tableErrorIdJquery).hide(500);}
if(tlbBetSlip===null||tlbBetSlip===undefined){return false;}
tlbBetSlip.style.display='';if(this.TableTicketId!=''){returnObjById(this.TableTicketId).style.display='none';}
var aRow,aCell,spanTemp,spanTemp2,spanTem3p,newLine,aDiv,rDiv,tlbBetSlipNewBet,aRowMain,aCellMain,aRowMainContent;var i,col;var isAlternating=false;var classRow;var tempTable;var isEmptyBetSlip=true;for(i=tlbBetSlip.rows.length;i>0;i--){tlbBetSlip.deleteRow(i-1);}
aRowMain=tlbBetSlip.insertRow(-1);aCellMain=aRowMain.insertCell(-1);var value=$('#dvBetSlipTotalLabel').text();if(value.indexOf(this.CurrencyISO)==-1&&value.indexOf(this.CurrencySymbol)==-1){$('#dvBetSlipTotalLabel').text($('#dvBetSlipTotalLabel').text()+' '+this.Currency);}
var realI=0;var totalAmountBetSlip=0;var totalCountBets=0;for(i=0;i<betCollection.length;i++){if(betCollection[i]!=undefined){isEmptyBetSlip=false;aRowMainContent=document.createElement("div");tlbBetSlipNewBet=document.createElement("table");tlbBetSlipNewBet.id="tblBetSlipContenerBet_"+prefixId+i;tlbBetSlipNewBet.className='sTblBetSlipContenerBet';if(showResultBet&&betCollection[i].StatusBet==1){tlbBetSlipNewBet.className='sTblBetSlipContenerBetSuccesfully';}
aRow=tlbBetSlipNewBet.insertRow(-1);aRow.indexId=i;aRow.realIndexId=realI;if(_isModeEdit){aRow.id="trHeaderTicketInformation_"+prefixId+i;}
if(isAlternating){aRow.className=_alternatingCss;}
else{aRow.className=_singleCss;}
isAlternating=!isAlternating;classRow=aRow.className;aCell=aRow.insertCell(-1);aCell.colSpan=2;if(showResultBet&&betCollection[i].StatusBet!=0){if(betCollection[i].StatusBet==2){rDiv=document.createElement("div");rDiv.className='tblBetSlipImageConfirmation';aDiv=document.createElement("div");aDiv.className='imgBetsSlipConfirmationErrorBet';aDiv.innerHTML="<div></div>";rDiv.appendChild(aDiv);aDiv=document.createElement("div");spanTemp=document.createElement("span");spanTemp.innerHTML=messages.lblBetSlipConfirmationErrorSendBet+' '+betCollection[i].ErrorMessage;spanTemp.className="ReadBackRaceLabelError";aDiv.appendChild(spanTemp);rDiv.appendChild(aDiv);aCell.appendChild(rDiv);}
else{rDiv=document.createElement("div");rDiv.className='tblBetSlipImageConfirmation';aDiv=document.createElement("div");aDiv.className='imgBetsSlipConfirmationBet';let aDiv2=document.createElement("div");aDiv2.appendChild(aDiv);rDiv.appendChild(aDiv2);aDiv=document.createElement("div");spanTemp=document.createElement("span");spanTemp.innerHTML=messages.lblBetSlipConfirmationSendBet;spanTemp.className="ReadBackRaceLabel";aDiv.appendChild(spanTemp);rDiv.appendChild(aDiv);aCell.appendChild(rDiv);rDiv=document.createElement("div");aDiv=document.createElement("div");rDiv.className="sDvBetSlipConfirmationNum";spanTemp=document.createElement("span");spanTemp.innerHTML=messages.TicketNumber;spanTemp.className="ReadBackRaceLabelConfirmation";spanTemp2=document.createElement("span");spanTemp2.innerHTML=betCollection[i].TicketConfirmation;spanTemp2.className="ReadBackTicket";aDiv.appendChild(spanTemp);aDiv.appendChild(spanTemp2);rDiv.appendChild(aDiv);aCell.appendChild(rDiv);rDiv=document.createElement("div");rDiv.className="tlbBetSlipConfirmationMiddle";aDiv=document.createElement("div");spanTemp=document.createElement("span");spanTemp.innerHTML=messages.TicketPostTime+" - ";spanTemp.className="ReadBackRaceLabelConfirmation";aDiv.appendChild(spanTemp);spanTemp2=document.createElement("span");spanTemp2.innerHTML=betCollection[i].TicketPostTime;spanTemp2.className="ReadBackInformation";aDiv.appendChild(spanTemp2);rDiv.appendChild(aDiv);aCell.appendChild(rDiv);notifyUpdateBalance=true;}}
else{if(_isModeEdit){rDiv=document.createElement("div");aDiv=document.createElement("div");rDiv.className="sDvBetSlipConfirmationNum";rDiv.id="trPhoneConfirmationInfo_"+prefixId;rDiv.className="sTrPhoneConfirmationInfo";spanTemp=document.createElement("span");spanTemp.innerHTML=messages.TicketNumber;spanTemp.className="ReadBackRaceLabelConfirmation";spanTemp2=document.createElement("span");spanTemp2.innerHTML=betCollection[i].TicketConfirmation;spanTemp2.className="ReadBackTicket";aDiv.appendChild(spanTemp);aDiv.appendChild(spanTemp2);rDiv.appendChild(aDiv);aCell.appendChild(rDiv);rDiv=document.createElement("div");rDiv.className="tlbBetSlipConfirmationMiddle";aDiv=document.createElement("div");spanTemp=document.createElement("span");spanTemp.innerHTML=messages.TicketPostTime+" - ";spanTemp.className="ReadBackRaceLabelConfirmation";aDiv.appendChild(spanTemp);spanTemp2=document.createElement("span");spanTemp2.innerHTML=betCollection[i].TicketPostTime;spanTemp2.className="ReadBackInformation";aDiv.appendChild(spanTemp2);rDiv.appendChild(aDiv);if(_isModeEdit){aDiv=document.createElement("div");var aDivButton=document.createElement("div");aDivButton.className="sTdBtnMinimizeEditBet sTdBtnMinimize sHideElement";aDivButton.title=messages.lblPhoneHideOrignalBet;aDivButton.indexId=i;aDivButton.id='dvBetSlipBetShowBetOriginalIndex_'+prefixId+i;aDivButton.onclick=function(){var indexToCheck=this.indexId;if($(this).hasClass('sTdBtnMinimize')){$(this).addClass('sTdBtnMaximize').removeClass('sTdBtnMinimize');$(this).attr('title',messages.lblPhoneShowOrignalBet);$('#tblBetSlipContenerBet_'+prefixId+indexToCheck+' .sTrRowInformationEdit').hide(0,function(){shoppingCartEdit.ShowHideBlockBetSlip(indexToCheck,true);});}
else{$(this).addClass('sTdBtnMinimize').removeClass('sTdBtnMaximize');$(this).attr('title',messages.lblPhoneHideOrignalBet);$('#tblBetSlipContenerBet_'+prefixId+indexToCheck+' .sTrRowInformationEdit').show(0,function(){shoppingCartEdit.ShowHideBlockBetSlip(indexToCheck,true);});}};aDiv.appendChild(aDivButton);rDiv.appendChild(aDiv);}
aCell.appendChild(rDiv);}}
aRow=tlbBetSlipNewBet.insertRow(-1);if(_isModeEdit){aRow.className=classRow+' sTrRowInformationEdit';}
else{aRow.className=classRow;}
aCell=aRow.insertCell(-1);aCell.colSpan=2;rDiv=document.createElement("div");rDiv.id="dvBetSlipHeaderBet"+prefixId+i;rDiv.className="sDvBetSlipRow sDvBetSlipHeaderBet";aDiv=document.createElement("div");if((betCollection[i].PoolCode==='4'||betCollection[i].PoolCode==='5'||betCollection[i].PoolCode==='6'||betCollection[i].PoolCode==='7')&&betCollection[i].Box=="True"||betCollection[i].BoxWithKey=="True"){aDiv.innerHTML=betCollection[i].InformationBet2+', '+betCollection[i].InformationBet1;aDiv.className="sDvlblBetpSlipNamePoolTypeHeader";}
else{if(parseInt(betCollection[i].PoolCode,10)>=1000){let aDivParlayName=document.createElement("div");let aDivParlayDropDown=document.createElement("div");if(betCollection[i].EditMode&&!_isModeEdit||_isModeEditNewBet){if(betCollection[i].ParlayInformationBet!==null&&betCollection[i].ParlayInformationBet.TotalEntries!==null){aDivParlayName.innerHTML=_messageParlay.replace('{0}',betCollection[i].ParlayInformationBet.TotalEntries);}
else{aDivParlayName.innerHTML=_messageParlay.replace('{0}',0);}}else{if(betCollection[i].ParlayInformationBet!==null&&betCollection[i].ParlayInformationBet.TotalEntries!==null){aDivParlayName.innerHTML=messages.lblParlay.replace('{0}',betCollection[i].ParlayInformationBet.TotalEntries);}
else{aDivParlayName.innerHTML=messages.lblParlay.replace('{0}',0);}}
if(_parlayType==ParlayType.MultiTrackNormal){var options=new Array();options[0]=new Array();options[0][0]='1001';options[0][1]=messages.lblWin;options[1]=new Array();options[1][0]='1002';options[1][1]=messages.lblPlace;options[2]=new Array();options[2][0]='1003';options[2][1]=messages.lblShow;options[3]=new Array();options[3][0]='1004';options[3][1]='W/P';options[4]=new Array();options[4][0]='1005';options[4][1]='W/S';options[5]=new Array();options[5][0]='1006';options[5][1]='P/S';options[6]=new Array();options[6][0]='1007';options[6][1]='W/P/S';var valueSelectDefault=''
if(betCollection[i].PoolCode==='1000'){valueSelectDefault=options[0][0];}
else{valueSelectDefault=betCollection[i].PoolCode;}
if((showResultBet&&betCollection[i].StatusBet==1)||(_isModeEdit)){if(valueSelectDefault=='1001'){aDivParlayDropDown.innerHTML=messages.lblWin+' ';}
if(valueSelectDefault=='1002'){aDivParlayDropDown.innerHTML=messages.lblPlace+' ';}
if(valueSelectDefault=='1003'){aDivParlayDropDown.innerHTML=messages.lblShow+' ';}
if(valueSelectDefault=='1004'){aDivParlayDropDown.innerHTML='W/P'+' ';}
if(valueSelectDefault=='1005'){aDivParlayDropDown.innerHTML='W/S'+' ';}
if(valueSelectDefault=='1006'){aDivParlayDropDown.innerHTML='P/S'+' ';}
if(valueSelectDefault=='1007'){aDivParlayDropDown.innerHTML='W/P/S'+' ';}}
else{createDynamicDropDown('sDvDropDownParlayOption','parlayOption_'+prefixId+i,options,valueSelectDefault,function(result,idPrincipal){if(_isModeEditNewBet){shoppingCartEditNewBet.UpdateParlayType(idPrincipal.replace('parlayOption_'+prefixId,''),result);if(shoppingCartEditNewBet.IsEditMode()&&document.getElementById('dvChdOp_dvPoolParlaySelect_'+result)!=undefined){$('#dvChdOp_dvPoolParlaySelect_'+prefixId+result).click();}
else{if(shoppingCartEditNewBet.IsEditMode()){$('#_hdnParlayPoolTypeSelected').val(result);}}}
else{shoppingCart.UpdateParlayType(idPrincipal.replace('parlayOption_'+prefixId,''),result);if(shoppingCart.IsEditMode()&&document.getElementById('dvChdOp_dvPoolParlaySelect_'+result)!=undefined){$('#dvChdOp_dvPoolParlaySelect_'+prefixId+result).click();}
else{if(shoppingCart.IsEditMode()){$('#_hdnParlayPoolTypeSelected').val(result);}}}},undefined,undefined,undefined,undefined,undefined,undefined,undefined,aDivParlayDropDown);}}
aDivParlayName.className="sDvlblBetpSlipNamePoolTypeHeader";if(_isModeEdit){aDiv.className="sDvParlayLayoutBet sDvParlayLayoutBetEdit";}
else{aDiv.className="sDvParlayLayoutBet";}
aDiv.appendChild(aDivParlayName);aDiv.appendChild(aDivParlayDropDown);}
else{if(_isModeEditNewBet){aDiv.innerHTML=betCollection[i].InformationBet2+', '+betCollection[i].InformationBet1+' ('+messages.lblNewTicket+')';}else{aDiv.innerHTML=betCollection[i].InformationBet2+', '+betCollection[i].InformationBet1;}
aDiv.className="sDvlblBetpSlipNamePoolTypeHeader";}}
if(showResultBet&&betCollection[i].StatusBet==1){aDiv.className="lblBetpSlipNamePoolTypeHeaderConfirmation";}
rDiv.appendChild(aDiv);aDiv=document.createElement("div");if(betCollection[i].StatusBet!=1&&!_isModeEditNewBet){if(!_isModeEdit){aDiv.className="sTblBetSlipDeleteBet";if(!_isModeEdit){aDiv.indexId=i;aDiv.realIndexId=realI;aDiv.id='dvBetSlipBetDeleteIndex_'+prefixId+i;aDiv.onclick=function(){if(shoppingCart.IsEditMode()){if(this.indexId==_editIndexBetId){if(document.getElementById('dvParlayCancel')===null){jconfirm(messages.lblConfirmCancelParlay,function(){shoppingCart.ParlayCancel();$('#_hdnParlayPoolTypeSelected').val('-1');$('.sDvParlayEmpty').addClass('sHideElement');lastSelectPoolTypeWasParlay=false;});}
else{$('#dvParlayCancel').click();}}}
else{shoppingCart.DeleteBetshoppingCart(this);}};}}
else{if(!betCollection[i].EditMode){if(this.HasPermisionAllowDeleteAnySessionPhone||(!this.HasPermisionAllowDeleteAnySessionPhone&&betCollection[i].TicketIsInCurrentSession=="True")){aDiv.className="sTblBetSlipDeleteBet";aDiv.title=messages.lblPhoneDeleteBet;aDiv.indexId=i;aDiv.realIndexId=realI;aDiv.ticketId=betCollection[i].TicketConfirmation;aDiv.id='dvBetSlipBetDeleteIndex_'+prefixId+i;aDiv.setAttribute('onclick',"'shoppingCartEdit.DeleteBetshoppingCartPhone(this);'");aDiv.onclick=function(){shoppingCartEdit.DeleteBetshoppingCartPhone(this);};}}}}
rDiv.appendChild(aDiv);aCell.appendChild(rDiv);if(parseInt(betCollection[i].PoolCode,10)<1000){aRow=tlbBetSlipNewBet.insertRow(-1);if(_isModeEdit){aRow.className=classRow+' sTrRowInformationEdit';}
else{aRow.className=classRow;}
aCell=aRow.insertCell(-1);aCell.className="sTdSpaceBelSlipInformationTicket";aCell=aRow.insertCell(-1);rDiv=document.createElement("div");rDiv.className="sDvBetSlipRow";aDiv=document.createElement("div");aDiv.innerHTML=betCollection[i].InformationBet3;aDiv.className="sTdBetSlipTextInfo";rDiv.appendChild(aDiv);aCell.appendChild(rDiv);aRow=tlbBetSlipNewBet.insertRow(-1);if(_isModeEdit){aRow.className=classRow+' sTrRowInformationEdit';}
else{aRow.className=classRow;}
aCell=aRow.insertCell(-1);aCell.className="sTdSpaceBelSlipInformationTicket";aCell=aRow.insertCell(-1);rDiv=document.createElement("div");rDiv.className="sDvBetSlipRow";aDiv=document.createElement("div");if((betCollection[i].PoolCode==='4'||betCollection[i].PoolCode==='5'||betCollection[i].PoolCode==='6'||betCollection[i].PoolCode==='7')&&betCollection[i].Box=="True"||betCollection[i].BoxWithKey=="True"){if(betCollection[i].Box=="True"){if(_isModeEditNewBet){aDiv.innerHTML=betCollection[i].PoolTypeName+" "+messages.lblBox+' ('+messages.lblNewTicket+')';}
else{aDiv.innerHTML=betCollection[i].PoolTypeName+" "+messages.lblBox;}}
else if(betCollection[i].BoxWithKey=="True"){if(_isModeEditNewBet){aDiv.innerHTML=betCollection[i].PoolTypeName+" "+messages.lblBoxWithKey+' ('+messages.lblNewTicket+')';}
else{aDiv.innerHTML=betCollection[i].PoolTypeName+" "+messages.lblBoxWithKey;}}
else{if(_isModeEditNewBet){aDiv.innerHTML=betCollection[i].PoolTypeName+' ('+messages.lblNewTicket+')';}
else{aDiv.innerHTML=betCollection[i].PoolTypeName;}}
aDiv.className="sDvlblBetpSlipNamePoolTypeHeader";}
else{if(parseInt(betCollection[i].PoolCode,10)>=1000){let aDivParlayName=document.createElement("div");let aDivParlayDropDown=document.createElement("div");if(betCollection[i].EditMode&&!_isModeEdit||_isModeEditNewBet){if(betCollection[i].ParlayInformationBet!==null&&betCollection[i].ParlayInformationBet.TotalEntries!==null){aDivParlayName.innerHTML=_messageParlay.replace('{0}',betCollection[i].ParlayInformationBet.TotalEntries);}
else{aDivParlayName.innerHTML=_messageParlay.replace('{0}',0);}}else{if(betCollection[i].ParlayInformationBet!==null&&betCollection[i].ParlayInformationBet.TotalEntries!==null){aDivParlayName.innerHTML=messages.lblParlay.replace('{0}',betCollection[i].ParlayInformationBet.TotalEntries);}
else{aDivParlayName.innerHTML=messages.lblParlay.replace('{0}',0);}}
if(_parlayType==ParlayType.MultiTrackNormal){let options=new Array();options[0]=new Array();options[0][0]='1001';options[0][1]=messages.lblWin;options[1]=new Array();options[1][0]='1002';options[1][1]=messages.lblPlace;options[2]=new Array();options[2][0]='1003';options[2][1]=messages.lblShow;options[3]=new Array();options[3][0]='1004';options[3][1]='W/P';options[4]=new Array();options[4][0]='1005';options[4][1]='W/S';options[5]=new Array();options[5][0]='1006';options[5][1]='P/S';options[6]=new Array();options[6][0]='1007';options[6][1]='W/P/S';let valueSelectDefault='';if(parseInt(betCollection[i].PoolCode,10)==1000){valueSelectDefault=options[0][0];}
else{valueSelectDefault=betCollection[i].PoolCode;}
if((showResultBet&&betCollection[i].StatusBet==1)||(_isModeEdit)){if(valueSelectDefault=='1001'){aDivParlayDropDown.innerHTML=messages.lblWin+' ';}
if(valueSelectDefault=='1002'){aDivParlayDropDown.innerHTML=messages.lblPlace+' ';}
if(valueSelectDefault=='1003'){aDivParlayDropDown.innerHTML=messages.lblShow+' ';}
if(valueSelectDefault=='1004'){aDivParlayDropDown.innerHTML='W/P'+' ';}
if(valueSelectDefault=='1005'){aDivParlayDropDown.innerHTML='W/S'+' ';}
if(valueSelectDefault=='1006'){aDivParlayDropDown.innerHTML='P/S'+' ';}
if(valueSelectDefault=='1007'){aDivParlayDropDown.innerHTML='W/P/S'+' ';}}
else{createDynamicDropDown('sDvDropDownParlayOption','parlayOption_'+prefixId+i,options,valueSelectDefault,function(result,idPrincipal){if(_isModeEditNewBet){shoppingCartEditNewBet.UpdateParlayType(idPrincipal.replace('parlayOption_'+prefixId,''),result);if(shoppingCartEditNewBet.IsEditMode()&&document.getElementById('dvChdOp_dvPoolParlaySelect_'+result)!=undefined){$('#dvChdOp_dvPoolParlaySelect_'+prefixId+result).click();}
else{if(shoppingCartEditNewBet.IsEditMode()){$('#_hdnParlayPoolTypeSelected').val(result);}}}
else{shoppingCart.UpdateParlayType(idPrincipal.replace('parlayOption_'+prefixId,''),result);if(shoppingCart.IsEditMode()&&document.getElementById('dvChdOp_dvPoolParlaySelect_'+result)!=undefined){$('#dvChdOp_dvPoolParlaySelect_'+prefixId+result).click();}
else{if(shoppingCart.IsEditMode()){$('#_hdnParlayPoolTypeSelected').val(result);}}}},undefined,undefined,undefined,undefined,undefined,undefined,undefined,aDivParlayDropDown);}}
aDivParlayName.className="sDvlblBetpSlipNamePoolTypeHeader";if(_isModeEdit){aDiv.className="sDvParlayLayoutBet sDvParlayLayoutBetEdit";}
else{aDiv.className="sDvParlayLayoutBet";}
aDiv.appendChild(aDivParlayDropDown);aDiv.appendChild(aDivParlayName);}
else{if(_isModeEditNewBet){aDiv.innerHTML=betCollection[i].PoolTypeName+' ('+messages.lblNewTicket+')';}else{aDiv.innerHTML=betCollection[i].PoolTypeName;}
aDiv.className="sDvlblBetpSlipNamePoolTypeHeader";}}
aDiv.className="sTdBetSlipTextInfo";rDiv.appendChild(aDiv);aCell.appendChild(rDiv);aRow=tlbBetSlipNewBet.insertRow(-1);if(_isModeEdit){aRow.className=classRow+' sTrRowInformationEdit';}
else{aRow.className=classRow;}
aCell=aRow.insertCell(-1);if(betCollection[i].PoolCode==='0'){aCell=aRow.insertCell(-1);aCell.innerHTML=showDetailStraight(betCollection[i],isAlternating,false,prefixId+i,(betCollection[i].StatusBet!=1),false);aCell.id="detail_"+prefixId+i;aCell.indexId=i;aCell.realIndexId=realI;if(parseFloat(betCollection[i].TotalTax)!==0||parseFloat(betCollection[i].TotalFee)!==0){aRow=tlbBetSlipNewBet.insertRow(-1);aCell=aRow.insertCell(-1);aCell.colSpan=2;aCell.innerHTML=showTaxInformation(betCollection[i].TotalTax,betCollection[i].TotalFee);}}
else{aCell=aRow.insertCell(-1);aCell.innerHTML=GetDescriptionInformation(betCollection[i].PoolCode,betCollection[i].InformationBet4,betCollection[i].RaceId,false,betCollection[i].BetAmountClient);}
aRow=tlbBetSlipNewBet.insertRow(-1);if(_isModeEdit){aRow.className=classRow+' sTrRowInformationEdit';}
else{aRow.className=classRow;}
aCell=aRow.insertCell(-1);aCell.colSpan=2;rDiv=document.createElement("div");rDiv.className="sDvBetSlipRow ";aDiv=document.createElement("div");if(betCollection[i].PoolCode==='0'){if(parseInt(betCollection[i].TotalCombinations,10)==1){aDiv.innerHTML=betCollection[i].TotalCombinations+" "+messages.lblTotalBetTicketBetSlip;}
else{aDiv.innerHTML=betCollection[i].TotalCombinations+" "+messages.lblTotalBetsTicketBetSlip;}}
else{if(parseInt(betCollection[i].TotalCombinations,10)==1){aDiv.innerHTML=betCollection[i].TotalCombinations+" "+messages.lblTotalBetTicketBetSlip+" @";}
else{aDiv.innerHTML=betCollection[i].TotalCombinations+" "+messages.lblTotalBetsTicketBetSlip+" @";}}
aDiv.className="sDvBetSlipBetAmount";if(showResultBet&&betCollection[i].StatusBet==1){aDiv.className="sDvBetSlipBetAmountConfirmation";}
rDiv.appendChild(aDiv);aDiv=document.createElement("div");if(betCollection[i].PoolCode!=='0'){if(_enableEditAmountToBetInBetslip&&(betCollection[i].StatusBet!=1)){var aInput=document.createElement("input");if(isMobile.any()){aInput.type='number';}else{aInput.type='text';}
aInput.id="inpAmount_"+prefixId+i;$(aInput).attr("value",betCollection[i].BetAmountClient);$(aInput).attr("onblur","inputFocusOutBet(this, false)");aInput.className='TextboxNumeric TextboxRaceStraightsWithAmount';aDiv.appendChild(aInput);}
else{aDiv.innerHTML=betCollection[i].BetAmountClient;}
aDiv.className="sDvBetSlipStraightAmount";}
else{aDiv.className="sDvBetSlipStraightAmountSubTotal";}
rDiv.appendChild(aDiv);aCell.appendChild(rDiv);if(betCollection[i].PoolCode!=='0'){if(parseFloat(betCollection[i].TotalTax)!==0||parseFloat(betCollection[i].TotalFee)!==0){aRow=tlbBetSlipNewBet.insertRow(-1);aCell=aRow.insertCell(-1);aCell.colSpan=2;aCell.innerHTML=showTaxInformation(betCollection[i].TotalTax,betCollection[i].TotalFee);}}
aRow=tlbBetSlipNewBet.insertRow(-1);if(_isModeEdit){aRow.className=classRow+' sTrRowInformationEdit';}
else{aRow.className=classRow;}
aCell=aRow.insertCell(-1);aCell.colSpan=2;rDiv=document.createElement("div");rDiv.className="sDvBetSlipRow sDvBetSlipTotal";aDiv=document.createElement("div");if(betCollection[i].StatusBet!=1){if(betCollection[i].PoolCode!=='0'){var aDivDetail=document.createElement("div");aDivDetail.id="detail_"+prefixId+i;aDivDetail.indexId=i;aDivDetail.realIndexId=realI;aDivDetail.innerHTML=messages.ViewDetailWager;aDivDetail.className="sDvBetSlipDetail";aDivDetail.onmouseover=showDetail;aDivDetail.onmouseleave=hideDetail;aDivDetail.onclick=showDetailClick;aDiv.appendChild(aDivDetail);var aDivDetail2=document.createElement("div");aDivDetail2.id="detailInfo_"+prefixId+i;aDiv.appendChild(aDivDetail2);}}
rDiv.appendChild(aDiv);aDiv=document.createElement("div");aDiv.innerHTML=messages.lblTotalTicket;aDiv.className="sDvBetSlipBetAmount";if(betCollection[i].StatusBet==1){aDiv.className="sDvBetSlipBetAmountConfirmation";}
rDiv.appendChild(aDiv);aDiv=document.createElement("div");aDiv.innerHTML=betCollection[i].TotalWager;aDiv.className="sDvBetSlipStraightAmountSubTotal";rDiv.appendChild(aDiv);aCell.appendChild(rDiv);if(_isModeEdit){aRow=tlbBetSlipNewBet.insertRow(-1);aRow.className=classRow;aCell=aRow.insertCell(-1);aCell.colSpan=2;rDiv=document.createElement("div");rDiv.id="dvBetSlipContenerNewBet_"+prefixId+betCollection[i].TicketConfirmation;rDiv.className="sHideElement sDvTicketEditNewBet";aDiv=document.createElement("div");var aDivTable=document.createElement("table");aDivTable.border=0;aDivTable.cellspacing=0;aDivTable.cellpadding=0;aDivTable.width="100%";aDivTable.id="dtlWagerEditNew_"+betCollection[i].TicketConfirmation;aDivTable.innerText=messages.lblEmptyEditTicket;aDiv.appendChild(aDivTable);rDiv.appendChild(aDiv);aCell.appendChild(rDiv);if(this.HasPermisionAllowEditAnySessionPhone||(!this.HasPermisionAllowEditAnySessionPhone&&betCollection[i].TicketIsInCurrentSession=="True")){aRow=tlbBetSlipNewBet.insertRow(-1);aCell=aRow.insertCell(-1);aCell.colSpan=3;rDiv=document.createElement("div");rDiv.className="sDvBetSlipRow sDvBetSlipOptionsParlay";aDiv=document.createElement("div");aDivDetail=document.createElement("div");aDivDetail.id="dvEditBet_"+prefixId+i;aDivDetail.indexId=i;aDivDetail.realIndexId=realI;aDivDetail.innerText=messages.lblEditRunners;if(betCollection[i].EditMode||!betCollection[i].TicketEnableToEdit){aDivDetail.className="sDvBetSlipDetail sDvBetSlipDetailDisable";}
else{aDivDetail.className="sDvBetSlipDetail";}
if(betCollection[i].TicketEnableToEdit){aDivDetail.onclick=function(){shoppingCartEdit.TicketEdit(this.indexId);};}
if(!betCollection[i].TicketEnableToEdit){aDivDetail.title=betCollection[i].TicketReasonCanNotEdit;}
aDiv.appendChild(aDivDetail);rDiv.appendChild(aDiv);aDiv=document.createElement("div");aDivDetail=document.createElement("div");aDivDetail.id="dvBetFinish_"+prefixId+i;aDivDetail.indexId=i;aDivDetail.realIndexId=realI;aDivDetail.innerText=messages.lblFinishParlay;if(betCollection[i].EditMode){aDivDetail.className="sDvBetSlipDetail";}
else{aDivDetail.className="sDvBetSlipDetail sHideElement";}
aDivDetail.onclick=function(){shoppingCartEdit.EditTicketFinish();};aDiv.appendChild(aDivDetail);rDiv.appendChild(aDiv);aDiv=document.createElement("div");aDivDetail=document.createElement("div");aDivDetail.id="dvBetCancel_"+prefixId+i;aDivDetail.indexId=i;aDivDetail.realIndexId=realI;aDivDetail.innerText=messages.lblCancelParlay;if(betCollection[i].EditMode){aDivDetail.className="sDvBetSlipDetail";}
else{aDivDetail.className="sDvBetSlipDetail sHideElement";}
aDivDetail.onclick=function(){shoppingCartEdit.EditTicketCancel();};aDiv.appendChild(aDivDetail);rDiv.appendChild(aDiv);aCell.appendChild(rDiv);}}}
else{var betCollectionParlay=betCollection[i].ParlayInformationBet;if(betCollectionParlay!==undefined&&betCollectionParlay!==null){betCollection[i].ParlayInformationBet.TotalEntries=0;betCollection[i].ParlayInformationBet.TotalEntriesAdded=0;for(t=0;t<betCollectionParlay.ParlayRunners.length;t++){if(betCollectionParlay.ParlayRunners[t]!=undefined){for(te=0;te<betCollectionParlay.ParlayRunners[t].TrackEvent.length;te++){if(betCollectionParlay.ParlayRunners[t].TrackEvent[te]!=undefined){for(r=0;r<betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races.length;r++){var trackAndRaceNumberIsAdd=false;if(betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r]!=undefined){for(h=0;h<betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses.length;h++){if(betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h]!=undefined){var optionSelectedParlay='';if(_parlayType==ParlayType.MultiTrackCombined){optionSelectedParlay="1000";}
else{optionSelectedParlay=betCollection[i].PoolCode;}
if((optionSelectedParlay=="1001"&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].WinParlay)||(optionSelectedParlay=="1002"&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].PlaceParlay)||(optionSelectedParlay=="1003"&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].ShowParlay)||(optionSelectedParlay=="1004"&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].WinParlay&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].PlaceParlay)||(optionSelectedParlay=="1005"&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].WinParlay&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].ShowParlay)||(optionSelectedParlay=="1006"&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].ShowParlay&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].PlaceParlay)||(optionSelectedParlay=="1007"&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].WinParlay&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].ShowParlay&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].PlaceParlay)||optionSelectedParlay=="1000"){betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].EnableBet=true;betCollection[i].ParlayInformationBet.TotalEntries+=1;}
else{betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].EnableBet=false;betCollection[i].HasAnError=true;}
betCollection[i].ParlayInformationBet.TotalEntriesAdded+=1;if(!trackAndRaceNumberIsAdd){trackAndRaceNumberIsAdd=true;raceNumberIsAdd=true;aRow=tlbBetSlipNewBet.insertRow(-1);if(_isModeEdit){aRow.className=classRow+' sTrRowInformationEdit';}
else{aRow.className=classRow;}
aCell=aRow.insertCell(-1);if(betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].EnableBet){aCell.className="sTdSpaceBelSlipInformationTicket";}
else{aCell.className="sTdSpaceBelSlipInformationTicket sDvBetSlipErrorLineTop";}
aDiv=document.createElement("div");aCell.appendChild(aDiv);aCell=aRow.insertCell(-1);rDiv=document.createElement("div");rDiv.className="sDvBetSlipRow";aDiv=document.createElement("div");aDiv.innerText=betCollectionParlay.ParlayRunners[t].TrackName+', '+betCollectionParlay.ParlayRunners[t].TrackEvent[te].DateTrackEvent;aDiv.className='sTdBetSlipTextInfo sDvlblBetpSlipNamePoolTypeHeaderSecondLevel';rDiv.appendChild(aDiv);aCell.appendChild(rDiv);aRow=tlbBetSlipNewBet.insertRow(-1);if(_isModeEdit){aRow.className=classRow+' sTrRowInformationEdit';}
else{aRow.className=classRow;}
aCell=aRow.insertCell(-1);if(betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].EnableBet){aCell.className="sTdSpaceBelSlipInformationTicket";}
else{aCell.className="sTdSpaceBelSlipInformationTicket sDvBetSlipErrorLineTop";}
aDiv=document.createElement("div");aCell.appendChild(aDiv);aCell=aRow.insertCell(-1);rDiv=document.createElement("div");rDiv.className="sDvBetSlipRow";aDiv=document.createElement("div");aDiv.innerText=betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].RaceNumber;if(betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].EnableBet){if(betCollection[i].EditMode&&!_isModeEdit||_isModeEditNewBet){aDiv.className='sTdBetSlipTextInfo sDvBetSlipRunnerHighLight';aDiv.TrackPositionEntry=t;aDiv.TrackEventPositionEntry=te;aDiv.RacePositionEntry=r;aDiv.HorsePositionEntry=h;aDiv.IndexBet=i;aDiv.onclick=function(){if(_isModeEditNewBet){shoppingCartEditNewBet.ShowTrackInformationEntryParlay(this);}
else{shoppingCart.ShowTrackInformationEntryParlay(this);}};}
else{aDiv.className='sTdBetSlipTextInfo';}}
else{aDiv.className='sTdBetSlipTextInfo sDvBetSlipErrorDetail';}
rDiv.appendChild(aDiv);aCell.appendChild(rDiv);}
aRow=tlbBetSlipNewBet.insertRow(-1);if(_isModeEdit){aRow.className=classRow+' sTrRowInformationEdit';}
else{aRow.className=classRow;}
aCell=aRow.insertCell(-1);aDiv=document.createElement("div");if(betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].EnableBet){aCell.className="";}
else{aCell.className="sDvBetSlipErrorLineButton";}
aDiv=document.createElement("div");aCell.appendChild(aDiv);aCell=aRow.insertCell(-1);rDiv=document.createElement("div");rDiv.className="sDvBetSlipRow";aDiv=document.createElement("div");aDiv.id='dvDetailParlayRunners_'+prefixId+i;if(betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].EnableBet){if(betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].RunnerIsScratch=='true'){aDiv.className='sDvBetSlipRunnerScratched';}
else{aDiv.className='';}
aDiv.innerHTML=showDetailParlay(betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h],isAlternating,false,prefixId+i);}
else{aDiv.className='sDvBetSlipErrorDetail';aDiv.innerText=messages.lblErrorMesssageDoesNotAllowBetType;}
rDiv.appendChild(aDiv);aDiv=document.createElement("div");if((betCollection[i].StatusBet!=1&&!_isModeEdit)||(_isModeEditNewBet&&betCollection[i].EditMode)){aDiv.className="sTblBetSlipDeleteParlayRunner";aDiv.TrackPositionEntry=t;aDiv.TrackEventPositionEntry=te;aDiv.RacePositionEntry=r;aDiv.HorsePositionEntry=h;aDiv.IndexBet=i;aDiv.onclick=function(){if(_isModeEditNewBet){shoppingCartEditNewBet.DeleteBetHorseParlay(this);}
else{shoppingCart.DeleteBetHorseParlay(this);}};if(_isModeEdit||_isModeEditNewBet){if(i==shoppingCartEditNewBet.EditPalayerIndexBetId()){$(aDiv).css('display','unset');}
else{$(aDiv).css('display','none');}}
else{if(i==shoppingCart.EditPalayerIndexBetId()){$(aDiv).css('display','unset');}
else{$(aDiv).css('display','none');}}}
rDiv.appendChild(aDiv);aCell.appendChild(rDiv);}}}}}}}}
aRow=tlbBetSlipNewBet.insertRow(-1);if(_isModeEdit){aRow.className=classRow+' sTrRowInformationEdit';}
else{aRow.className=classRow;}
aCell=aRow.insertCell(-1);aCell.colSpan=2;rDiv=document.createElement("div");rDiv.className="sDvBetSlipRow sDvBetSlipTotal";aDiv=document.createElement("div");if(parseInt(betCollection[i].TotalCombinations,10)==1){aDiv.innerText=betCollection[i].TotalCombinations+" "+messages.lblTotalBetTicketBetSlip+" @";}
else{aDiv.innerText=betCollection[i].TotalCombinations+" "+messages.lblTotalBetsTicketBetSlip+" @";}
aDiv.className="sDvBetSlipBetAmount";if(betCollection[i].StatusBet==1){aDiv.className="sDvBetSlipBetAmountConfirmation";}
rDiv.appendChild(aDiv);aDiv=document.createElement("div");aDiv.className="sDvBetSlipStraightAmountSubTotal";var inputBetAmount=document.createElement("input");inputBetAmount.id="txtAmountParlay_"+prefixId+i;if(betCollection[i].StatusBet!=1){inputBetAmount.className="sTextboxNumericParlayAmount";if(_enableEditAmountToBetInBetslip&&(betCollection[i].StatusBet!=1)){inputBetAmount.className='TextboxNumeric TextboxRaceStraightsWithAmount';}
if(_isModeEdit){inputBetAmount.className="sTextboxNumericParlayAmount sTextboxNumericParlayAmountDisable";}
if(_isModeEditNewBet){inputBetAmount.className="sTextboxNumericParlayAmount sTextboxNumericParlayAmountEnable";}}
else{inputBetAmount.className="sTextboxNumericParlayAmountConfirmation";}
if(isMobile.any()){inputBetAmount.type='number';}
inputBetAmount.value=betCollection[i].BetAmountClient;$(inputBetAmount).on("click",function(){$(this).select();});if(betCollection[i].StatusBet==1||(_isModeEdit&&betCollection[i].EditMode)){inputBetAmount.readOnly=true;}
else{inputBetAmount.onkeypress=function(event){var chCode='charCode'in event?event.charCode:event.keyCode;if(chCode!=="0"){var valuepress=String.fromCharCode(chCode);if(isNaN(valuepress)&&valuepress!=='.'){alert(buildWrongNumberMessage(valuepress));return false;}}};inputBetAmount.onchange=function(){var totalAmount=0;var index=$(this).attr('id').replace('txtAmountParlay_'+prefixId,'');SetAmountToParlay(betCollection[index],$(this).val(),true);SetTotalWagerParlay(betCollection[index],$(this).val(),true);for(var posititioIndexBetRefresh=0;posititioIndexBetRefresh<betCollection.length;posititioIndexBetRefresh++){if(betCollection[posititioIndexBetRefresh]!=undefined){totalAmount+=parseFloat(betCollection[posititioIndexBetRefresh].TotalWager);}}
$('#dvBetSlipParlatTotaWager_'+prefixId+index).text(betCollection[index].TotalWager);UpdateTotalAmount(totalAmount);if(_isModeEditNewBet){shoppingCartEditNewBet.UpdateParlayType(index,betCollection[index].PoolCode);}
else{shoppingCart.UpdateParlayType(index,betCollection[index].PoolCode);}};}
if(betCollection[i].StatusBet==1||(_isModeEdit&&!betCollection[i].EditMode)){inputBetAmount.readOnly=true;}
aDiv.appendChild(inputBetAmount);rDiv.appendChild(aDiv);aCell.appendChild(rDiv);if(parseFloat(betCollection[i].TotalTax)!==0||parseFloat(betCollection[i].TotalFee)!==0){aRow=tlbBetSlipNewBet.insertRow(-1);aCell=aRow.insertCell(-1);aCell.colSpan=2;aCell.innerHTML=showTaxInformation(betCollection[i].TotalTax,betCollection[i].TotalFee);}
aRow=tlbBetSlipNewBet.insertRow(-1);if(_isModeEdit){aRow.className=' sTrRowInformationEdit';}
aCell=aRow.insertCell(-1);aCell.colSpan=3;rDiv=document.createElement("div");rDiv.className="sDvBetSlipRow";aDiv=document.createElement("div");if(betCollection[i].StatusBet!=1){if(betCollection[i].PoolCode!=='0'){let aDivDetail=document.createElement("div");aDivDetail.id="detail_"+prefixId+i;aDivDetail.indexId=i;aDivDetail.realIndexId=realI;aDivDetail.innerText=messages.ViewDetailWager;aDivDetail.className="sDvBetSlipDetail";aDivDetail.onmouseover=showDetail;aDivDetail.onmouseleave=hideDetail;aDivDetail.onclick=showDetailClick;aDiv.appendChild(aDivDetail);let aDivDetail2=document.createElement("div");aDivDetail2.id="detailInfo_"+prefixId+i;aDiv.appendChild(aDivDetail2);}}
rDiv.appendChild(aDiv);aDiv=document.createElement("div");aDiv.className="sDvParlayBetAmount";aDiv.innerText=messages.lblTotalTicket+" ";if(betCollection[i].StatusBet==1){aDiv.className="sDvBetSlipBetAmountConfirmation";}
rDiv.appendChild(aDiv);aDiv=document.createElement("div");aDiv.id="dvBetSlipParlatTotaWager_"+prefixId+i;aDiv.className="sDvBetSlipStraightAmountSubTotal";aDiv.innerText=betCollection[i].TotalWager;rDiv.appendChild(aDiv);aCell.appendChild(rDiv);if(_isModeEdit){aRow=tlbBetSlipNewBet.insertRow(-1);aRow.className=classRow;aCell=aRow.insertCell(-1);aCell.colSpan=2;rDiv=document.createElement("div");rDiv.id="dvBetSlipContenerNewBet_"+prefixId+betCollection[i].TicketConfirmation;rDiv.className="sHideElement sDvTicketEditNewBet";aDiv=document.createElement("div");var aDivTable=document.createElement("table");aDivTable.border=0;aDivTable.cellspacing=0;aDivTable.cellpadding=0;aDivTable.width="100%";aDivTable.id="dtlWagerEditNew_"+betCollection[i].TicketConfirmation;aDivTable.innerText=messages.lblEmptyEditTicket;aDiv.appendChild(aDivTable);rDiv.appendChild(aDiv);aCell.appendChild(rDiv);}
if(betCollection[i].StatusBet!=1&&!_isModeEditNewBet){aRow=tlbBetSlipNewBet.insertRow(-1);aCell=aRow.insertCell(-1);aCell.colSpan=3;rDiv=document.createElement("div");rDiv.className="sDvBetSlipRow sDvBetSlipOptionsParlay";aDiv=document.createElement("div");aDivDetail=document.createElement("div");aDivDetail.id="dvEditBet_"+prefixId+i;aDivDetail.indexId=i;aDivDetail.realIndexId=realI;aDivDetail.innerText=messages.lblEditRunners;if(betCollection[i].EditMode){aDivDetail.className="sDvBetSlipDetail sDvBetSlipDetailDisable";}
else{aDivDetail.className="sDvBetSlipDetail";}
aDivDetail.onclick=function(){if(_isModeEdit){if(_parlayType==ParlayType.MultiTrackNormal){$('#_hdnParlayPoolTypeSelected').val(betCollection[this.indexId].PoolId);}
lastSelectPoolTypeWasParlay=true;shoppingCartEdit.TicketEdit(this.indexId);}
else{shoppingCart.ParlayEdit(this.indexId);}};aDiv.appendChild(aDivDetail);rDiv.appendChild(aDiv);aDiv=document.createElement("div");aDivDetail=document.createElement("div");aDivDetail.id="dvBetFinish_"+prefixId+i;aDivDetail.indexId=i;aDivDetail.realIndexId=realI;aDivDetail.innerText=messages.lblFinishParlay;if(betCollection[i].EditMode){aDivDetail.className="sDvBetSlipDetail";}
else{aDivDetail.className="sDvBetSlipDetail sHideElement";}
aDivDetail.onclick=function(){if(document.getElementById('dvParlayCancel')===null){if(_isModeEdit){shoppingCartEdit.EditTicketFinish();}
else{shoppingCart.ParlayFinish();}}
else{$('#dvParlayFinish').click();}};aDiv.appendChild(aDivDetail);rDiv.appendChild(aDiv);aDiv=document.createElement("div");aDivDetail=document.createElement("div");aDivDetail.id="dvBetCancel_"+prefixId+i;aDivDetail.indexId=i;aDivDetail.realIndexId=realI;aDivDetail.innerText=messages.lblCancelParlay;if(betCollection[i].EditMode){aDivDetail.className="sDvBetSlipDetail";}
else{aDivDetail.className="sDvBetSlipDetail sHideElement";}
aDivDetail.onclick=function(){if(_isModeEdit){shoppingCartEdit.EditTicketCancel();}
else{if(document.getElementById('dvParlayCancel')===null){$('#dvBetSlipBetDeleteIndex_'+prefixId+this.indexId).click();}
else{$('#dvParlayCancel').click();}}};aDiv.appendChild(aDivDetail);}
rDiv.appendChild(aDiv);aCell.appendChild(rDiv);}}
if(!_isModeEditNewBet){var divBlock=document.createElement("div");divBlock.className='sTblBetSlipContenerBetDisable sHideElement';aRowMainContent.appendChild(divBlock);}
aRowMainContent.appendChild(tlbBetSlipNewBet);aCellMain.appendChild(aRowMainContent);if((showResultBet&&betCollection[i].StatusBet==2)||!showResultBet){countBet=countBet+1;totalAmountBetSlip+=parseFloat(betCollection[i].TotalWager);totalCountBets+=parseInt(betCollection[i].TotalCombinations,10);}}
realI+=1;UpdateBetReadyToPlace(betCollection,i);if(showResultBet&&betCollection[i]!=undefined&&betCollection[i].StatusBet==1){this.DeleteBetshoppingCartById(i);}}
UpdateDescriptionBetSlip(countBet,totalCountBets,totalAmountBetSlip);this.CountBetEnable=countBet;this.SetCountBet(0,"true");this.ResetDivInformation(showResultBet);if(notifyUpdateBalance){try{if(!window.isTop){window.parent.postMessage("boss.updatebalance","*");}}
catch(e){console.log("Problem notifying update balance to parent windows. "+e);}}
if(this.IsEditMode()){this.RefreshOptionParlays(this.EditPalayerIndexBetId());}}
catch(er){alert("GetshoppingCart :: "+er.number+" :: "+er.message);}};this.LoadNewTicketToEditing=function(){var editIndex=shoppingCartEdit.EditPalayerIndexBetId();if(editIndex!=-1){var tableToSet='dtlWagerEditNew_'+shoppingCartEdit.GetInformaionTicketEdit().TicketConfirmation;$('#'+tableToSet).html('');shoppingCartEditNewBet.TableId=tableToSet;shoppingCartEditNewBet.GetshoppingCart(false);shoppingCartEditNewBet.GetInformaionTicket(0).TicketConfirmationReference=shoppingCartEdit.GetInformaionTicketEdit().TicketConfirmation;$('#dvBetFinish_'+prefixId+editIndex).removeClass('sDvBetSlipDetailDisable');}};this.ClearTicketToEditing=function(){var editIndex=shoppingCartEdit.EditPalayerIndexBetId();var tableToSet='dtlWagerEditNew_'+shoppingCartEdit.GetInformaionTicketEdit().TicketConfirmation;$('#'+tableToSet).html('');$('#dvBetFinish_'+prefixId+editIndex).addClass('sDvBetSlipDetailDisable');$('#_hdnParlayPoolTypeSelected').val('-1');};function UpdateBetReadyToPlace(collection,index){if(collection[index]!=undefined){if(betCollection[index].EnableToPlace){if(betCollection[index].BetAmountClient<=0&&betCollection[index].PoolId!=0){betCollection[index].EnableToPlace=false;}}
if(collection[index].StatusBet==0&&collection[index].EnableToPlace){$('#dvBetSlipHeaderBet'+prefixId+index).addClass('sDvBetSlipHeaderBetReady');}else{$('#dvBetSlipHeaderBet'+prefixId+index).removeClass('sDvBetSlipHeaderBetReady');}}}
function UpdateDescriptionBetSlip(countBetTicket,totalCountBets,totalAmountBetSlip,totalCountBetsEdited){if(!_autoConfirmMode||(_autoConfirmMode&&_isModeReadBackAutoConfirm)||_isNewParlay){var resumenText=messages.lblResumeTicketBetInformation;var resumenTextEdit=messages.lblResumeEditTicketBetInformation;if(_isModeReadBack||_isModeReadBackAutoConfirm){resumenText=resumenText.replace('{0}',countBetTicket);if(countBetTicket==1){resumenText=resumenText.replace('{1}',messages.lblTicketBetSlipReadback);}
else{resumenText=resumenText.replace('{1}',messages.lblTicketsBetSlipReadback);}
resumenText=resumenText.replace('{2}',totalCountBets);if(totalCountBets==1){resumenText=resumenText.replace('{3}',messages.lblTotalBetTicketBetSlip);}
else{resumenText=resumenText.replace('{3}',messages.lblTotalBetsTicketBetSlip);}
$('#spResumenInformationBetslipReadback').text(resumenText);$('#spBetSlipTotalAmountReadback').text(totalAmountBetSlip);}
else{resumenText=resumenText.replace('{0}',countBetTicket);if(countBetTicket==1){resumenText=resumenText.replace('{1}',messages.lblTicketBetSlip);}
else{resumenText=resumenText.replace('{1}',messages.lblTicketsBetSlip);}
resumenText=resumenText.replace('{2}',totalCountBets);if(totalCountBets==1){resumenText=resumenText.replace('{3}',messages.lblTotalBetTicketBetSlip);}
else{resumenText=resumenText.replace('{3}',messages.lblTotalBetsTicketBetSlip);}
$('#spResumenInformationBetslip').text(resumenText);$('#spBetSlipTotalAmount').text(precisionRound(totalAmountBetSlip,2));}
if(totalCountBetsEdited!=undefined){resumenTextEdit=resumenTextEdit.replace('{0}',totalCountBetsEdited);if(totalCountBetsEdited==1){resumenTextEdit=resumenTextEdit.replace('{1}',messages.lblTicketBetSlip);}
else{resumenTextEdit=resumenTextEdit.replace('{1}',messages.lblTicketsBetSlip);}
$('#dvEditBetBetSlipTextReadback').text(resumenTextEdit);}}}
this.UpdateAmountToBetStraight=function(indexCartTicket,indexBet,positionBet,newAmount){if(betCollection[indexCartTicket]!=undefined){var tempValue=betCollection[indexCartTicket].CombinationsArray[indexBet][1].split(" ");var tempNewValue="";var tempNewHorseListValue="";var indexToApplyChange=0;switch(positionBet){case "0":indexToApplyChange=2;break;case "1":indexToApplyChange=4;break;case "2":indexToApplyChange=6;break;}
var amountDiff=parseFloat(newAmount)-parseFloat(tempValue[indexToApplyChange]);tempValue[indexToApplyChange]=newAmount;for(var positionTemp=0;positionTemp<tempValue.length;positionTemp++){if(tempNewValue=="")
tempNewValue=tempValue[positionTemp];else
tempNewValue+=" "+tempValue[positionTemp];}
betCollection[indexCartTicket].CombinationsArray[indexBet][1]=tempNewValue;var tempValueHorseList=betCollection[indexCartTicket].HorseList.split(",");for(let positionTemp=0;positionTemp<tempValueHorseList.length;positionTemp++){var tempValuePN=tempValueHorseList[positionTemp].split(':')[0];if(tempValuePN.trim()==tempValue[0]){var newValueHorseList=tempValuePN+": "+tempValue[2]+"/"+tempValue[4]+"/"+tempValue[6]+" ";if(tempNewHorseListValue==""){tempNewHorseListValue=newValueHorseList;}
else{tempNewHorseListValue+=","+newValueHorseList;}}
else{if(tempNewHorseListValue==""){tempNewHorseListValue=tempValueHorseList[positionTemp];}
else{tempNewHorseListValue+=","+tempValueHorseList[positionTemp];}}}
betCollection[indexCartTicket].HorseList=tempNewHorseListValue;betCollection[indexCartTicket].TotalWager=" "+(parseFloat(betCollection[indexCartTicket].TotalWager)+parseFloat(amountDiff)).toString();}};this.UpdateAmountToBetExotics=function(indexCartTicket,newAmount){if(betCollection[indexCartTicket]!=undefined){var amountDiff=parseFloat(newAmount)-parseFloat(betCollection[indexCartTicket].BetAmountClient);betCollection[indexCartTicket].BetAmountClient=newAmount;betCollection[indexCartTicket].TotalWager=" "+(parseFloat(betCollection[indexCartTicket].TotalCombinations)*parseFloat(newAmount)).toString();}};function GenerateNewRiskByTaxOrByFee(amountBet,tax,fee){if(tax!=0)
return((amountBet-fee)/(1+tax)).toFixed(2);else
return((amountBet-fee),2).toFixed(2);}
function SetAmountToParlay(col,value,isEdit){if(isEdit){if(col.ParlayInformationBet.RefFee!="0"||col.ParlayInformationBet.RefTax!="0"){if(parseFloat(col.TotalTax)!=0&&parseFloat(col.TotalFee)!=0){col.BetAmountClient=col.TotalWager/col.TotalCombinations;col.TotalTax=0;col.TotalFee=0;}
else{col.BetAmountClient=parseFloat(value).toFixed(2);}}
else{col.BetAmountClient=value;}}
else{if((col.ParlayInformationBet.RefFee!="0"||col.ParlayInformationBet.RefTax!="0")&&(col.ParlayInformationBet.RefFee!==undefined||col.ParlayInformationBet.RefTax!==undefined)){col.BetAmountClient=GenerateNewRiskByTaxOrByFee(parseFloat(value),parseFloat(col.ParlayInformationBet.RefTax),parseFloat(col.ParlayInformationBet.RefFee));col.TotalFee=col.ParlayInformationBet.RefFee*col.TotalCombinations;col.TotalTax=((parseFloat(value)*col.TotalCombinations)-(parseFloat(col.ParlayInformationBet.RefFee)*col.TotalCombinations)-(col.BetAmountClient*col.TotalCombinations)).toFixed(2);}
else{col.BetAmountClient=value;}}}
function SetTotalWagerParlay(col,value,isEdit){if(isEdit){col.TotalWager=0;}
else{if((col.ParlayInformationBet.RefFee!="0"||col.RefTax!="0")&&(col.ParlayInformationBet.RefFee!==undefined||col.RefTax!==undefined)){col.TotalWager=((col.TotalCombinations*col.BetAmountClient)+parseFloat(col.TotalFee)+(parseFloat(col.TotalTax))).toFixed(2);}
else{col.TotalWager=col.TotalCombinations*col.BetAmountClient;}}}
function UpdateTotalAmount(totalAmountBetSlip){$('#spBetSlipTotalAmount').text(precisionRound(totalAmountBetSlip,2));}
this.UpdateParlayType=function(indexBet,newParlayType){$('#dvErrorAskConfirmation').addClass('sHideElement');betCollection[indexBet].PoolCode=newParlayType;betCollection[indexBet].HasAnError=false;betCollection[indexBet].EnableToPlace=true;var betCollectionParlay=betCollection[indexBet].ParlayInformationBet;var totalCombinations=1;if(betCollectionParlay!=undefined&&betCollectionParlay.ParlayRunners!=undefined){if(_parlayType==ParlayType.MultiTrackNormal){betCollection[indexBet].ParlayInformationBet.TotalEntries=0;betCollection[indexBet].TotalEntriesAdded=0;for(t=0;t<betCollectionParlay.ParlayRunners.length;t++){if(betCollectionParlay.ParlayRunners[t]!=undefined){for(te=0;te<betCollectionParlay.ParlayRunners[t].TrackEvent.length;te++){for(r=0;r<betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races.length;r++){for(h=0;h<betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses.length;h++){if(newParlayType=="1001"){betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition="1";totalCombinations=1;}
if(newParlayType=="1002"){betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition="2";totalCombinations=1;}
if(newParlayType=="1003"){betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition="3";totalCombinations=1;}
if(newParlayType=="1004"){betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition="1/2";totalCombinations=2;}
if(newParlayType=="1005"){betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition="1/3";totalCombinations=2;}
if(newParlayType=="1006"){betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition="2/3";totalCombinations=2;}
if(newParlayType=="1007"){betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition="1/2/3";totalCombinations=3;}
if((newParlayType=="1001"&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].WinParlay)||(newParlayType=="1002"&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].PlaceParlay)||(newParlayType=="1003"&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].ShowParlay)||(newParlayType=="1004"&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].WinParlay&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].PlaceParlay)||(newParlayType=="1005"&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].WinParlay&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].ShowParlay)||(newParlayType=="1006"&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].ShowParlay&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].PlaceParlay)||(newParlayType=="1007"&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].WinParlay&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].ShowParlay&&betCollectionParlay.ParlayRunners[t].TrackEvent[te].Races[r].PlaceParlay)||newParlayType=="1000"){betCollection[indexBet].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].EnableBet=true;betCollection[indexBet].ParlayInformationBet.TotalEntries+=1;}
else{betCollection[indexBet].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].EnableBet=false;betCollection[indexBet].HasAnError=true;betCollection[indexBet].EnableToPlace=false;}
betCollection[indexBet].ParlayInformationBet.TotalEntriesAdded+=1;}}}}}}}
if(!betCollection[indexBet].EditMode){SetAmountToParlay(betCollection[indexBet],betCollection[indexBet].BetAmountClient,true);}
betCollection[indexBet].PoolId=parseInt(newParlayType,10);betCollection[indexBet].ParlayInformationBet=betCollectionParlay;betCollection[indexBet].TotalCombinations=totalCombinations;if(betCollection[indexBet].TotalFee===undefined){betCollection[indexBet].TotalFee=0;}
if(betCollection[indexBet].TotalTax===undefined){betCollection[indexBet].TotalTax=0;}
if(!betCollection[indexBet].EditMode){SetAmountToParlay(betCollection[indexBet],betCollection[indexBet].BetAmountClient,false);}
SetTotalWagerParlay(betCollection[indexBet],betCollection[indexBet].BetAmountClient,false);betCollectionParlay=null;var addInformation=GetAddInformationBetSessionStorage();Racebook.UpdateParlayInformationRememberBet(indexBet,newParlayType,betCollection[indexBet].BetAmountClient,_sessionSSC,_token,addInformation);this.GetshoppingCart(false);};this.UpdateParlayTypeAmount=function(indexBet,amount){betCollection[indexBet].BetAmountClient=amount;};this.SetAvailableAmount=function(amount){try{if(listControlsId.AvailableId!=''){var availableIdJquery='#'+listControlsId.AvailableId;if($(availableIdJquery)[0]){$(availableIdJquery)[0].textContent=amount;}}
if($('#AvailableBetSlip')){$('#AvailableBetSlip').text(amount);}
if(BLRPersonalization==personalization){if($('#AvailableField')){$('#AvailableField').text(amount);}}
if(sportsInteractionPersonalization==personalization){if($('#balanceAmount',window.parent.document)){$('#balanceAmount',window.parent.document).text(amount);}}
if(window.parent){window.parent.postMessage("balance:"+amount,"*");}}
catch(e){}};this.SetBalanceAmount=function(amount){try{if(listControlsId.BalanceId!==''){var balanceIdJquery='#'+listControlsId.BalanceId;if($(balanceIdJquery)[0]){$(balanceIdJquery)[0].textContent=amount;}}}catch(e){}};this.SetPendingAmount=function(amount){try{if(listControlsId.PendingId!==''){var pendingIdJquery='#'+listControlsId.PendingId;if($(pendingIdJquery)[0]){$(pendingIdJquery)[0].textContent=amount;}}}catch(e){}};this.DeleteBetshoppingCart=function(tdObject,confirmDelete){tdObjectDeleteCart=tdObject;if(confirmDelete==undefined){jconfirm(messages.lblRemoveBetConfirm,function(){DeleteBet(tdObjectDeleteCart);});if(isMobile.any()){scrollToTop();}}
else{DeleteBet(tdObjectDeleteCart);}
if($('#dvOpenConfirmationBet').css('display')=='block'){LoadReadBackInformation();}};this.DeleteBetshoppingCartPhone=function(tdObject){if(this.HasPermisionDeletePhone){tdObjectDeleteCart=tdObject;jconfirm(messages.lblRemoveTicketConfirm,function(){DeleteBetPhone(tdObjectDeleteCart);});}
else{alert(messages.ErrorPermissionDelete);}};function DeleteBet(tdObject){var addInformation=GetAddInformationBetSessionStorage();var response=Racebook.RemoveBetToCart(tdObject.realIndexId,betCollection[tdObject.indexId].TotalWager,_sessionSSC,_token,addInformation);if(response.error!==null){alert("ClearBet"+response.error);return;}
try{eval(response.value);shoppingCart.DeleteBetshoppingCartById(tdObject.indexId);shoppingCart.SetCountBet(1,"false");if(shoppingCart.CountBetEnable!=0){shoppingCart.GetshoppingCart(false);setTimeout(function(){if(shoppingCart.CountBetEnable==0&&_autoConfirmMode){shoppingCart.RestartBetList();}
$('#dvTblBetSplipCart').click();},200);}
else{shoppingCart.DeleteAllBetInBetSlip();}}
catch(er){window.status="ClearBet :: "+er.name+er.message;}}
function DeleteBetPhone(tdObject){var ticketIdToDelete=tdObject.ticketId;var addInformation=GetAddInformationBetSessionStorage();var response=Racebook.DeleteTicketPhone(ticketIdToDelete,betCollection[tdObject.indexId].TotalWager,_sessionSSC,_token,addInformation);if(response.error!==null){alert("DeleteTicketPhone: "+response.error);return;}
try{eval(response.value);$('#dvTblBetSlipOpenBets').click();}
catch(er){window.status="DeleteTicketPhone :: "+er.name+er.message;}}
this.DeleteBetshoppingCartById=function(id){delete betCollection[id];};this.EnableBet=function(chkObject){var addInformation=GetAddInformationBetSessionStorage();var id=chkObject.id;id=id.replace("chk","");if(betCollection[id].EnableToPlace){betCollection[id].EnableToPlace=false;shoppingCart.SetCountBet(1,"false");this.CountBetEnable=this.CountBetEnable-1;Racebook.ChangeBalancePlayer(betCollection[id].TotalWager,"0",_sessionSSC,_token,addInformation,ChangeAvailablePlayer_CallBack);}
else{if(betCollection[id].TotalWager<parseFloat($('#_availableAmount').val())){betCollection[id].EnableToPlace=true;shoppingCart.SetCountBet(1,"true");this.CountBetEnable=this.CountBetEnable+1;Racebook.ChangeBalancePlayer(betCollection[id].TotalWager,"1",_sessionSSC,_token,addInformation,ChangeAvailablePlayer_CallBack);}
else{alert(messages.ErrorNoFundAllowed);}}};this.ResetDivInformation=function(showResultBet){var tRButtonSendBet=returnObjById(this.TRButtonSendBet);var tlbBetSlipParlay=returnObjById(this.TableIdParlay);var tlbBetSlip=returnObjById(this.TableId);var dvMessageIdJquery='#'+this.DivMessageEmptyId;var dvImportantMessageIdJquery='#'+this.ImportantMessage;var dvHelpMessageIdJquery='#'+this.DivHelpMessageId;var dvClearAllBet='#dvClearAllBet';var tdCountBets='.spCountBets';var countBet=parseInt($('.spCountBets').text(),10);var tdParlayHeaderIdJquery='#tdParlayHeader';var tdParlayHeaderImageIdJquery='#tdParlayHeaderImage';var contBet='';if(!countBet){countBet=0;}
if(CheckBetPlacedToClearInformation()&&!showResultBet){if(tRButtonSendBet!=''&&tRButtonSendBet!=null){tRButtonSendBet.style.display='none';}
$(dvClearAllBet).addClass('sHideElement');if(this.HaveImportantMessage){if(_autoConfirmMode){$(dvImportantMessageIdJquery).slideDown(0);}
else{$(dvImportantMessageIdJquery).slideDown(1000);}
ShowExternatURLBetSlip();}
if(sportsInteractionPersonalization==personalization){if(dvHelpMessageIdJquery!="#"){$(dvHelpMessageIdJquery).slideDown(1000);}
if(dvMessageIdJquery!="#"){$(dvMessageIdJquery).hide();}}
else{if(_autoConfirmMode){if(dvMessageIdJquery!="#"){$(dvMessageIdJquery).slideDown(0);}}
else{if(dvMessageIdJquery!="#"){$(dvMessageIdJquery).slideDown(1000);}}
if(dvHelpMessageIdJquery!="#"){$(dvHelpMessageIdJquery).hide();}}}
else{if(tRButtonSendBet!=''&&tRButtonSendBet!=null){tRButtonSendBet.style.display='';}
$(dvClearAllBet).removeClass('sHideElement');if(this.HaveImportantMessage){if(dvImportantMessageIdJquery!="#"){$(dvImportantMessageIdJquery).hide();}
HideExternatURLBetSlip();}
if(sportsInteractionPersonalization==personalization){if(dvHelpMessageIdJquery!="#"){$(dvHelpMessageIdJquery).hide();}
if(dvMessageIdJquery!="#"){$(dvMessageIdJquery).hide();}}
else{if(dvMessageIdJquery!="#"){$(dvMessageIdJquery).hide();}
if(dvHelpMessageIdJquery!="#"){$(dvHelpMessageIdJquery).hide();}}}
if(showResultBet){$(dvClearAllBet).addClass('sHideElement');}};this.DeleteBetHorseParlay=function(chkObjectRequest){chkObjectParlay=chkObjectRequest;if(chkObjectParlay.IndexBet==this.EditPalayerIndexBetId()){jconfirm($('#_MessageDeleteAllBet').val(),function(){var id=$(chkObjectParlay);var trackPosition=$(chkObjectParlay)[0].TrackPositionEntry;var trackEventPosition=$(chkObjectParlay)[0].TrackEventPositionEntry;var racePosition=$(chkObjectParlay)[0].RacePositionEntry;var horsePosition=$(chkObjectParlay)[0].HorsePositionEntry;var response;var optionSelectedParlay=$('#'+this.DropDownParlay).val();var findOtherRace=false;var betCollectionParlayTemp;betCollection[$(chkObjectParlay)[0].IndexBet].ParlayInformationBet.TotalEntries=0;betCollection[$(chkObjectParlay)[0].IndexBet].ParlayInformationBet.TotalEntriesAdded=0;delete betCollection[$(chkObjectParlay)[0].IndexBet].ParlayInformationBet.ParlayRunners[trackPosition].TrackEvent[trackEventPosition].Races[racePosition].Horses[horsePosition];if(AllValuesArrayAreUndefined(betCollection[$(chkObjectParlay)[0].IndexBet].ParlayInformationBet.ParlayRunners[trackPosition].TrackEvent[trackEventPosition].Races[racePosition].Horses)){delete betCollection[$(chkObjectParlay)[0].IndexBet].ParlayInformationBet.ParlayRunners[trackPosition].TrackEvent[trackEventPosition].Races[racePosition];}
if(AllValuesArrayAreUndefined(betCollection[$(chkObjectParlay)[0].IndexBet].ParlayInformationBet.ParlayRunners[trackPosition].TrackEvent[trackEventPosition].Races)){delete betCollection[$(chkObjectParlay)[0].IndexBet].ParlayInformationBet.ParlayRunners[trackPosition].TrackEvent[trackEventPosition];}
if(AllValuesArrayAreUndefined(betCollection[$(chkObjectParlay)[0].IndexBet].ParlayInformationBet.ParlayRunners[trackPosition].TrackEvent)){delete betCollection[$(chkObjectParlay)[0].IndexBet].ParlayInformationBet.ParlayRunners[trackPosition];}
if(AllValuesArrayAreUndefined(betCollection[$(chkObjectParlay)[0].IndexBet].ParlayInformationBet.ParlayRunners)){betCollection[$(chkObjectParlay)[0].IndexBet].ParlayInformationBet.ParlayRunners=new Array();}
betCollectionParlayTemp=betCollection[$(chkObjectParlay)[0].IndexBet].ParlayInformationBet.ParlayRunners;betCollection[$(chkObjectParlay)[0].IndexBet].ParlayInformationBet.ParlayRunners=new Array();for(tt=0;tt<betCollectionParlayTemp.length;tt++){if(betCollectionParlayTemp[tt]!=undefined){for(tet=0;tet<betCollectionParlayTemp[tt].TrackEvent.length;tet++){if(betCollectionParlayTemp[tt].TrackEvent[tet]!=undefined){for(rt=0;rt<betCollectionParlayTemp[tt].TrackEvent[tet].Races.length;rt++){if(betCollectionParlayTemp[tt].TrackEvent[tet].Races[rt]!=undefined){for(ht=0;ht<betCollectionParlayTemp[tt].TrackEvent[tet].Races[rt].Horses.length;ht++){if(betCollectionParlayTemp[tt].TrackEvent[tet].Races[rt].Horses[ht]!=undefined){if(_isModeEditNewBet){shoppingCartEditNewBet.AddBetshoppingCartParlay(betCollectionParlayTemp[tt].TrackId,betCollectionParlayTemp[tt].TrackName,betCollectionParlayTemp[tt].TrackEvent[tet].Races[rt].RaceNumber,betCollectionParlayTemp[tt].TrackEvent[tet].DateTrackEvent,betCollectionParlayTemp[tt].TrackEvent[tet].Races[rt].Horses[ht].ProgramNumber,betCollectionParlayTemp[tt].TrackEvent[tet].Races[rt].Horses[ht].HorseName,betCollectionParlayTemp[tt].TrackEvent[tet].Races[rt].WinParlay,betCollectionParlayTemp[tt].TrackEvent[tet].Races[rt].PlaceParlay,betCollectionParlayTemp[tt].TrackEvent[tet].Races[rt].ShowParlay,betCollectionParlayTemp[tt].TrackTimeZone,betCollectionParlayTemp[tt].TrackEvent[tet].Races[rt].RaceNumberId,betCollectionParlayTemp[tt].TrackEvent[tet].Races[rt].Horses[ht].IndexId,betCollectionParlayTemp[tt].TrackEvent[tet].TrackEventId,betCollectionParlayTemp[tt].TrackEvent[tet].Races[rt].Horses[ht].HorsePosition,$(chkObjectParlay)[0].IndexBet,betCollectionParlayTemp[tt].TrackEvent[tet].Races[rt].Horses[ht].RunnerIsScratch);}
else{shoppingCart.AddBetshoppingCartParlay(betCollectionParlayTemp[tt].TrackId,betCollectionParlayTemp[tt].TrackName,betCollectionParlayTemp[tt].TrackEvent[tet].Races[rt].RaceNumber,betCollectionParlayTemp[tt].TrackEvent[tet].DateTrackEvent,betCollectionParlayTemp[tt].TrackEvent[tet].Races[rt].Horses[ht].ProgramNumber,betCollectionParlayTemp[tt].TrackEvent[tet].Races[rt].Horses[ht].HorseName,betCollectionParlayTemp[tt].TrackEvent[tet].Races[rt].WinParlay,betCollectionParlayTemp[tt].TrackEvent[tet].Races[rt].PlaceParlay,betCollectionParlayTemp[tt].TrackEvent[tet].Races[rt].ShowParlay,betCollectionParlayTemp[tt].TrackTimeZone,betCollectionParlayTemp[tt].TrackEvent[tet].Races[rt].RaceNumberId,betCollectionParlayTemp[tt].TrackEvent[tet].Races[rt].Horses[ht].IndexId,betCollectionParlayTemp[tt].TrackEvent[tet].TrackEventId,betCollectionParlayTemp[tt].TrackEvent[tet].Races[rt].Horses[ht].HorsePosition,$(chkObjectParlay)[0].IndexBet,betCollectionParlayTemp[tt].TrackEvent[tet].Races[rt].Horses[ht].RunnerIsScratch);}}}}}}}}}
ShowWaitDialog(false);if(_isModeEditNewBet){shoppingCartEditNewBet.GetshoppingCart(false);shoppingCartEditNewBet.ResetDivInformation(false);}
else{shoppingCart.GetshoppingCart(false);shoppingCart.ResetDivInformation(false);}});}};this.SetCountBet=function(value,isAdd){if(!_isModeEdit&&!_isModeEditNewBet&&!_isModeReadBack&&!_isModeReadBackAutoConfirm){var currentCountBets=this.CountBetEnable;if(!currentCountBets){currentCountBets=0;}
if(isAdd=="true"){currentCountBets=currentCountBets+parseInt(value,10);}
else{currentCountBets=currentCountBets-parseInt(value,10);}
$('.spCountBets').text(currentCountBets);if(this.IsAnonymous){this.CheckDisplayAskLoginMessage(currentCountBets);}}};this.CheckDisplayAskLoginMessage=function(currentCountBets){if(currentCountBets>0){$("#dvAskLogin").show();$("#divLoginMsgErr").hide();$("#trErrorMessage").hide();}
else{$("#dvAskLogin").hide();}};this.AddTicketConfirmationAutoConfirm=function(ticketId,tickedPostTime,isEdit){if(isEdit){var informationBet=shoppingCartEditNewBet.GetInformaionTicket(0);if(informationBet!=undefined){var positionBet=0;var informationBetEdit=shoppingCartEdit.GetInformaionTicket(positionBet);var informationBetReadbackAuto=this.GetIndexTicketByTicketId(informationBet.TicketConfirmationReference);if(informationBetReadbackAuto!=-1){var informationBetReadbackAutoRef=this.GetIndexTicketByTicketId(this.GetInformaionTicket(informationBetReadbackAuto).TicketConfirmationReference);if(informationBetReadbackAuto!=-1){this.DeleteBetshoppingCartById(informationBetReadbackAutoRef);}
this.DeleteBetshoppingCartById(informationBetReadbackAuto);}
let newObject;while(informationBetEdit!=undefined){if(informationBetEdit.TicketConfirmation==informationBet.TicketConfirmationReference){newObject=jQuery.extend(true,{},informationBetEdit);newObject.TicketWasEditedRefered=true;newObject.StatusBet=3;this.AddBetshoppingCartObject(newObject);informationBetEdit=undefined;}
else{positionBet++;informationBetEdit=shoppingCartEdit.GetInformaionTicket(positionBet);}}
newObject=jQuery.extend(true,{},informationBet);newObject.StatusBet=1;newObject.NewTicketFromTicketToChange=true;newObject.TicketConfirmation=ticketId;newObject.TicketPostTime=tickedPostTime;this.AddBetshoppingCartObject(newObject);}}
else{var infoToClone=shoppingCart.GetInformaionTicket(0);let newObject=jQuery.extend(true,{},infoToClone);newObject.TicketIsNew=true;newObject.StatusBet=1;newObject.TicketConfirmation=ticketId;newObject.TicketPostTime=tickedPostTime;this.AddBetshoppingCartObject(newObject);}
shoppingCartEditNewBet=new shoppingCartClass('','',2);};this.AddTicketConfirmation=function(ticketId,tickedPostTime,indexId){if(betCollection[indexId]!=undefined){betCollection[indexId].StatusBet=1;betCollection[indexId].TicketConfirmation=ticketId;betCollection[indexId].TicketPostTime=tickedPostTime;this.CountBetEnable=this.CountBetEnable-1;if(_isModeReadBack&&betCollection[indexId].NewTicketFromTicketToChange){betCollection[(indexId-1)].StatusBet=3;}}};this.AddTicketConfirmationPhone=function(ticketId,tickedPostTime,indexId,ticketIsInCurrentSession){if(betCollection[indexId]!=undefined){betCollection[indexId].TicketConfirmation=ticketId;betCollection[indexId].TicketPostTime=tickedPostTime;betCollection[indexId].TicketIsInCurrentSession=ticketIsInCurrentSession;}};this.betDescription=function(indexId){var bet=betCollection[indexId];var strDescrip="";var runner;var trackEvent;var race;var horse;if(bet.PoolTypeName=="Parlay"){strDescrip+=bet.PoolTypeName+" ";strDescrip+=bet.ParlayInformationBet.TotalEntries+" ";strDescrip+=bet.BetAmountClient+" **xx** ";for(var i=0;i<bet.ParlayInformationBet.ParlayRunners.length;i++){runner=bet.ParlayInformationBet.ParlayRunners[i];for(var j=0;j<runner.TrackEvent.length;j++){trackEvent=runner.TrackEvent[j];for(var k=0;k<trackEvent.Races.length;k++){race=trackEvent.Races[k];for(var m=0;m<race.Horses.length;m++){horse=race.Horses[m];strDescrip+=runner.TrackName+" "+trackEvent.DateTrackEvent+" "+race.RaceNumber+" \ ";strDescrip+=horse.ProgramNumber+" "+horse.HorseName+" *x* ";}}}}}
else{strDescrip=bet.InformationBet1+" \ "+bet.InformationBet2+" \ "+bet.InformationBet3+" \ "+bet.InformationBet4+" \ TotalWager:"+bet.TotalWager;}
return strDescrip;}
this.ErrorMessage=function(textErrorMessage,indexId){try{if(_insertFailedBetLog){var addInformation=GetAddInformationBetSessionStorage();Racebook.InsertFailedBetLog(textErrorMessage,this.betDescription(indexId),_sessionSSC,_token,addInformation);}}
catch(er){}
if(_isModeReadBack){alert(textErrorMessage);}
else{if(_isModeReadBackAutoConfirm){if(typeof shoppingCart!=="undefined"){if(shoppingCart.CountBetEnable>0){shoppingCart.ErrorMessage(textErrorMessage,0);}}
alert(textErrorMessage);}
else{if(_isModeReadBack&&betCollection[indexId].NewTicketFromTicketToChange){betCollection[indexId-1].StatusBet=2;betCollection[indexId-1].ErrorMessage=textErrorMessage;}
else{if(!_isModeEditNewBet){betCollection[indexId].StatusBet=2;betCollection[indexId].ErrorMessage=textErrorMessage;if(_autoConfirmMode){this.GetshoppingCart(true);}
else{this.GetshoppingCart(false);}}
else{shoppingCartEdit.EditTicketCancel();alert(textErrorMessage);}}}}};this.AddTicketEditionInformation=function(ticketId,reasonMsg){for(i=0;i<betCollection.length;i++){if(betCollection[i]!=undefined){if(betCollection[i].TicketConfirmation==ticketId){betCollection[i].TicketEnableToEdit=false;betCollection[i].TicketReasonCanNotEdit=reasonMsg;}}}};this.ShowBetResult=function(){if(_autoConfirmMode){this.GetshoppingCart(false);}
else{this.GetshoppingCart(true);}};this.PlaceBetsCart=function(btnControl){ShowWaitDialog(true,$(btnControl).offset().top,$(btnControl).offset().left+($(btnControl).width()/2));var totalSelectParlay=0;var tableErrorIdJquery='#'+this.TableMessageErrorId;var allBetsAreCorrent=true;btnControl.disable=true;if(_isModeEdit){shoppingCart.HaveValidationError="false";}
else{if(typeof shoppingCartEdit!=="undefined"){shoppingCartEdit.HaveValidationError="false";}}
if(tableErrorIdJquery!="#"){$(tableErrorIdJquery).hide(500);}
if(!_betPlacedShopping){var trackName=$('#_trackNameSelect').text();_betPlacedShopping=true;var txtHour=returnObjById("txtHour");var txtMin=returnObjById("txtMin");var txtSec=returnObjById("txtSec");var ddlTime=returnObjById("ddlTime");var hours,minutes,seconds,dayTime;var trackIdGroup="",trackTimeZoneGroup="",trackEventGroup="",horseListGroup="",raceListGroup="",poolCodeGroup="",poolIdGroup="",ticketIdEditGroup="",ticketAmountEditGroup="";var trackIdParlayGroup="",trackTimeZoneParlayGroup="",trackEventParlayGroup="",horseListParlayGroup="",raceListParlayGroup="",poolCodeParlayGroup="",poolIdParlayGroup="";var betAmountOnClientGroup="",winAmountOnClientGroup="",placeAmountOnClientGroup="",showAmountOnClientGroup="";var boxGroup="",boxWithKeyGroup="",indexId="",indexIdParlay="";var totalParlayEntries="";var totalBet=0;if(txtHour){hours=txtHour.value;}
if(txtMin){minutes=txtMin.value;}
if(txtSec){seconds=txtSec.value;}
if(ddlTime){dayTime=ddlTime.value;}
for(i=0;i<betCollection.length;i++){if(betCollection[i]!=undefined){if(betCollection[i].EnableToPlace&&!betCollection[i].TicketWasEditedRefered){if(betCollection[i].StatusBet!=1){if(betCollection[i].PoolId>=1000){trackIdParlayGroup="";trackTimeZoneParlayGroup="";trackEventParlayGroup="";raceListParlayGroup="";horseListParlayGroup="";for(t=0;t<betCollection[i].ParlayInformationBet.ParlayRunners.length;t++){if(betCollection[i].ParlayInformationBet.ParlayRunners[t]!=undefined){for(te=0;te<betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent.length;te++){if(betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te]!=undefined){for(r=0;r<betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races.length;r++){if(betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r]!=undefined){for(h=0;h<betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses.length;h++){if(betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h]!=undefined){if(betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].EnableBet){var position="";if(betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition=="1"){position="W";}
if(betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition=="2"){position="P";}
if(betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].HorsePosition=="3"){position="S";}
if(_parlayType==ParlayType.MultiTrackNormal||_parlayType==ParlayType.MultiTrackCombined){totalSelectParlay=totalSelectParlay+1;trackIdParlayGroup+=betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackId+"/pa/";trackTimeZoneParlayGroup+=betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackTimeZone+"/pa/";trackEventParlayGroup+=betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].TrackEventId+"/pa/";raceListParlayGroup+=betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].RaceNumberId+"/pa/";horseListParlayGroup+=position+betCollection[i].ParlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].ProgramNumber+"/pa/";indexIdParlay+="p"+"/pa/";}}}}}}}}}}
trackIdGroup+=trackIdParlayGroup+"/n/";trackTimeZoneGroup+=trackTimeZoneParlayGroup+"/n/";trackEventGroup+=trackEventParlayGroup+"/n/";horseListGroup+=horseListParlayGroup+"/n/";raceListGroup+=raceListParlayGroup+"/n/";poolCodeGroup+=betCollection[i].PoolCode+"/n/";poolIdGroup+=betCollection[i].PoolId+"/n/";betAmountOnClientGroup+=betCollection[i].BetAmountClient+"/n/";winAmountOnClientGroup+="/n/";placeAmountOnClientGroup+="/n/";showAmountOnClientGroup+="/n/";boxGroup+="/n/";boxWithKeyGroup+="/n/";indexId+=i+"/n/";ticketIdEditGroup+=betCollection[i].TicketConfirmationReference+"/n/";if(betCollection[i].TicketConfirmationReference!=""){ticketAmountEditGroup+=betCollection[i].TotalWager+"/n/";}
else{ticketAmountEditGroup+="0/n/";}
totalParlayEntries+=betCollection[i].ParlayInformationBet.TotalEntries+"/n/";}
else{trackIdGroup+=betCollection[i].TrackId+"/n/";trackTimeZoneGroup+=betCollection[i].TrackTimeZone+"/n/";trackEventGroup+=betCollection[i].TrackEvent+"/n/";horseListGroup+=betCollection[i].HorseList+"/n/";raceListGroup+=betCollection[i].RaceList+"/n/";poolCodeGroup+=betCollection[i].PoolCode+"/n/";poolIdGroup+=betCollection[i].PoolId+"/n/";betAmountOnClientGroup+=betCollection[i].BetAmountClient+"/n/";winAmountOnClientGroup+=betCollection[i].WinAmounClient+"/n/";placeAmountOnClientGroup+=betCollection[i].PlaceAmountClient+"/n/";showAmountOnClientGroup+=betCollection[i].ShowAmounClient+"/n/";ticketIdEditGroup+=betCollection[i].TicketConfirmationReference+"/n/";if(betCollection[i].TicketConfirmationReference!=""){ticketAmountEditGroup+=betCollection[i].TotalWager+"/n/";allBetsAreCorrent=true;}
else{ticketAmountEditGroup+="0/n/";}
boxGroup+=betCollection[i].Box+"/n/";boxWithKeyGroup+=betCollection[i].BoxWithKey+"/n/";indexId+=i+"/n/";totalParlayEntries+="/n/";}
totalBet=totalBet+1;}}}}
if(!allBetsAreCorrent){alert(messages.lblErrorBetWithError);}
else{var addInformation=GetAddInformationBetSessionStorage();Racebook.PlaceBetGroup(trackIdGroup,trackTimeZoneGroup,trackEventGroup,horseListGroup,raceListGroup,poolCodeGroup,poolIdGroup,betAmountOnClientGroup,winAmountOnClientGroup,placeAmountOnClientGroup,showAmountOnClientGroup,boxGroup,boxWithKeyGroup,'','','','',indexId,totalBet,trackName,totalParlayEntries,indexIdParlay,ticketIdEditGroup,ticketAmountEditGroup,_sessionSSC,_token,addInformation,PlaceBetGroup_CallBack);}}};this.IsEmptyBetSlip=function(){for(i=0;i<betCollection.length;i++){if(betCollection[i]!=undefined){return false;}}
return true;};this.HaveTicketWithSomeError=function(){for(i=0;i<betCollection.length;i++){if(betCollection[i]!=undefined){if(betCollection[i].StatusBet==2){return true;}}}
return false;};this.DeleteAllBetInBetSlip=function(){var addInformation=GetAddInformationBetSessionStorage();var response=Racebook.RemoveAllBetToCart(_sessionSSC,_token,addInformation,DeleteBetshoppingCart_CallBack);};this.CheckBetSplitEmpty=function(){if(betCollection){for(i=0;i<betCollection.length;i++){if(betCollection[i]!=undefined){return true;}}
return false;}
return false;};this.EraseWagerBetSplip=function(){jconfirm($('#_MessageDeleteAllBet').val(),function(){var wasEdit=_editTicket;shoppingCart.RestartBetList();shoppingCart.CountLastBetEnable=0;shoppingCart.CheckDisplayAskLoginMessage(0);$('.spCountBets').text(0);shoppingCart.GetshoppingCart(false);shoppingCart.EditParlay=false;$('#_hdnParlayPoolTypeSelected').val('-1');shoppingCart.GetshoppingCart(false);if(wasEdit){$('#rblPools_0').click();$('#dvParlayFinish').addClass('sHideElement');$('#dvParlayCancel').addClass('sHideElement');}
var addInformation=GetAddInformationBetSessionStorage();Racebook.RemoveAllBetToCart(_sessionSSC,_token,addInformation,DeleteBetshoppingCart_CallBack);});if(isMobile.any()){scrollToTop();}};function CheckBetPlacedToClearInformation(){if(shoppingCart.HaveValidationError=="True"){return false;}
else{for(i=0;i<betCollection.length;i++){if(betCollection[i]!=undefined){if(betCollection[i].StatusBet==2||betCollection[i].StatusBet==0){return false;}}}
return true;}}
this.ClearBetPlaced=function(){var betPlaceIndexId=new Array();for(i=0;i<betCollection.length;i++){if(betCollection[i]!=undefined){if(betCollection[i].StatusBet==1){var index=betPlaceIndexId.length;betPlaceIndexId[index]=new Object();betPlaceIndexId[index].IndexId=i;}}}
for(i=0;i<betPlaceIndexId.length;i++){delete betCollection[betPlaceIndexId[i].IndexId];}};function showTaxInformation(tx,tf){if(tx!==0||tf!==0){var tableHorses=new TableRendererClass();tableHorses.SetAlternateStyle(false);var positionCollection=0;var configuration=new Object();var collection=new Array();configuration.Cells=new Array();configuration.Cells[0]=new Object();configuration.Cells[0].ClassName="sDvBetSlipStraightPN";configuration.Cells[1]=new Object();configuration.Cells[1].ClassName="sDvBetSlipStraightHorseName";configuration.Cells[2]=new Object();configuration.Cells[2].ClassName="sDvBetSlipStraightPosition";configuration.Cells[3]=new Object();configuration.Cells[3].ClassName="sDvBetSlipStraightAmount";if(tx!==undefined&&tx!==0){collection[positionCollection]=new Array();collection[positionCollection][0]='';collection[positionCollection][1]='';collection[positionCollection][2]='Tax';collection[positionCollection][3]=tx.toString();collection[positionCollection][4]='';positionCollection++;}
if(tx!==undefined&&tf!==0){collection[positionCollection]=new Array();collection[positionCollection][0]='';collection[positionCollection][1]='';collection[positionCollection][2]='Fee';collection[positionCollection][3]=tf.toString();collection[positionCollection][4]='';}
if((tx!==undefined&&tx!==0)||(tx!==undefined&&tf!==0)){return tableHorses.LoadTableInformationSource('dtlTaxDetail',collection,configuration,false,false);}
else{return "";}}
else{return "";}}
function showDetailStraight(betCollection,isAlternating,isError,idInput,showEditAmount,isReadback,currencySymbol){var configuration=new Object();if(isReadback){configuration.Cells=new Array();configuration.Cells[0]=new Object();configuration.Cells[0].ClassName="sDvBetSlipStraightAmountReadback";configuration.Cells[1]=new Object();configuration.Cells[1].ClassName="sDvBetSlipStraightPositionReadback";configuration.Cells[2]=new Object();configuration.Cells[2].ClassName="sDvBetSlipStraightPNReadback";configuration.Cells[3]=new Object();configuration.Cells[3].ClassName="sDvBetSlipStraightHorseNameReadback";}
else{configuration.Cells=new Array();configuration.Cells[0]=new Object();configuration.Cells[0].ClassName="sDvBetSlipStraightPN";configuration.Cells[1]=new Object();configuration.Cells[1].ClassName="sDvBetSlipStraightHorseName";configuration.Cells[2]=new Object();configuration.Cells[2].ClassName="sDvBetSlipStraightPosition";configuration.Cells[3]=new Object();configuration.Cells[3].ClassName="sDvBetSlipStraightAmount";}
var tableHorses=new TableRendererClass();tableHorses.SetAlternateStyle(false);var collection=new Array();var positionCollection=0;for(var count=0;count<betCollection.CombinationsArray.length;count++){var arrayInformation=betCollection.CombinationsArray[count][1].split("  ");var programNumber=arrayInformation[0];var arrayStraight=arrayInformation[1].split("/");var labelStraight="";var betAmount="";if(isReadback){var lastBetAmount='-';for(var count2=0;count2<arrayStraight.length;count2++){if($.trim(arrayStraight[count2])!="X"){var findRunner=false;var positionCollectionFindRunner=0;betAmount=$.trim(arrayStraight[count2]);for(positionCollectionFindRunner=0;positionCollectionFindRunner<collection.length;positionCollectionFindRunner++){if(collection[positionCollectionFindRunner][2]==programNumber.trim()&&collection[positionCollectionFindRunner][0]==currencySymbol+(betCollection.TotalWager.split(" ")[0]+" "+betAmount).trim()){findRunner=true;break;}}
if(findRunner){labelStraight=collection[positionCollectionFindRunner][1];switch(count2){case 0:labelStraight=labelStraight==""?"Win":labelStraight+", Win";break;case 1:labelStraight=labelStraight==""?"Place":labelStraight+", Place";break;case 2:labelStraight=labelStraight==""?"Show":labelStraight+", Show";break;default:break;}
collection[positionCollectionFindRunner][1]=labelStraight.trim();}
else{switch(count2){case 0:labelStraight="Win";break;case 1:labelStraight="Place";break;case 2:labelStraight="Show";break;default:break;}
collection[positionCollection]=new Array();collection[positionCollection][0]=currencySymbol+(betCollection.TotalWager.split(" ")[0]+" "+betAmount).trim();collection[positionCollection][1]=labelStraight.trim();collection[positionCollection][2]=programNumber.trim();collection[positionCollection][3]='-'+(betCollection.HorsesArray[count][1]).trim();collection[positionCollection][4]=count+"_"+count2;positionCollection++;}}}}
else{for(var count3=0;count3<arrayStraight.length;count3++){if($.trim(arrayStraight[count3])!="X"){betAmount=$.trim(arrayStraight[count3]);collection[positionCollection]=new Array();switch(count3){case 0:labelStraight="Win";break;case 1:labelStraight="Place";break;case 2:labelStraight="Show";break;default:break;}
collection[positionCollection][0]=programNumber.trim();collection[positionCollection][1]=(betCollection.HorsesArray[count][1]).trim();collection[positionCollection][2]=labelStraight.trim();collection[positionCollection][3]=(betCollection.TotalWager.split(" ")[0]+" "+betAmount).trim();collection[positionCollection][4]=count+"_"+count3;positionCollection++;}}}}
tableHorses.SetUseStyleBetSlip(true);tableHorses.SetDefaultAlternateStyle(!isAlternating);tableHorses.SetIsError(isError);return tableHorses.LoadTableInformationSource('dtlWagerDetail',collection,configuration,idInput,showEditAmount);}
function showDetailParlay(betCollection,isAlternating,isError,idInput){var configuration=new Object();configuration.Cells=new Array();configuration.Cells[0]=new Object();configuration.Cells[0].ClassName="sDvBetSlipStraightPN";configuration.Cells[1]=new Object();configuration.Cells[1].ClassName="sDvBetSlipStraightHorseName";if(_parlayType==ParlayType.MultiTrackCombined){configuration.Cells[2]=new Object();configuration.Cells[2].ClassName="sDvBetSlipStraightPosition";}
var tableHorses=new TableRendererClass();tableHorses.SetAlternateStyle(false);var collection=new Array();var positionCollection=0;var programNumber=betCollection.ProgramNumber;var labelStraight="";collection[positionCollection]=new Array();switch(betCollection.HorsePosition){case "1":labelStraight=messages.lblWin;break;case "2":labelStraight=messages.lblPlace;break;case "3":labelStraight=messages.lblShow;break;default:break;}
collection[positionCollection][0]=programNumber.trim();if(betCollection.RunnerIsScratch=='true'){collection[positionCollection][1]=(betCollection.HorseName).trim()+' - '+messages.lblRunnerScratched;}
else{collection[positionCollection][1]=(betCollection.HorseName).trim();}
if(_parlayType==ParlayType.MultiTrackCombined){collection[positionCollection][2]=labelStraight.trim();}
tableHorses.SetUseStyleBetSlip(true);tableHorses.SetDefaultAlternateStyle(!isAlternating);tableHorses.SetIsError(isError);return tableHorses.LoadTableInformationSource('dtlWagerDetail',collection,configuration,idInput,false);}
function showDetail(){var controlHover=this;setTimeout(function(){if($("#"+controlHover.id+":hover").length>0){ShowWaitDialog(true,$(controlHover).offset().top,$(controlHover).offset().left+($(controlHover).width()));}
setTimeout(function(){if($("#"+controlHover.id+":hover").length>0){showDetailInformation(controlHover);setTimeout(function(){resizeHeightFancyDetailBet();ShowWaitDialog(false);},200);}
ShowWaitDialog(false);},200);},300);}
function hideDetail(){var control=this;var tdId=control.id;var indexId=control.indexId;var tdIdJquery='#'+tdId;var dvIdJquery='#detailInfo_'+prefixId+indexId;var tblId='tbl'+tdId;setTimeout(function(){if($(dvIdJquery).find('.sDvPopupBetDetail:hover').length==0){$(dvIdJquery).find('.sDvPopupBetDetail').hide();setTimeout(function(){resizeHeightFancyDetailBet();},200);}},500);}
function showDetailClick(){showDetailInformation(this);}
function showDetailInformation(controlHover){var control=this;if(controlHover!=undefined){control=controlHover;}
var tdId=control.id;var indexId=control.indexId;var tdIdJquery='#'+tdId;var dvIdJquery='#detailInfo_'+prefixId+indexId;var tblId='tbl'+tdId;var table="<div class='sDvPopupBetDetail'><div class='sDvArrowPopup sPositionArrowBetDetail'></div><div class='sDvBetDetailHeader'><table id='tbHeader"+tblId+"' border='0' cellspacing='0'></table></div><div class='sDvBetDetail'><table id='"+tblId+"' border='0' cellspacing='0'></table></div></div>";if($(dvIdJquery).html()==''){$(dvIdJquery).html(table);$(dvIdJquery).find('.sDvPopupBetDetail').mouseleave(function(){$(this).hide();});if(prefixId=='enr_'||prefixId==''){var firstParent=$(dvIdJquery).closest(".fancybox-wrap");var addTop=0;if(firstParent!=null&&firstParent.offset()!==undefined){addTop=firstParent.offset().top;}
$(dvIdJquery).find('.sDvPopupBetDetail').css('top',$($(dvIdJquery)[0].parentElement).offset().top-addTop+10);$(dvIdJquery).find('.sDvPopupBetDetail').css('top',$(dvIdJquery).offset().top-addTop-7);}
else{$(dvIdJquery).find('.sDvPopupBetDetail').css('top',$(dvIdJquery).offset().top+5);}
$(dvIdJquery).find('.sDvPopupBetDetail').show();var configuration=new Object();configuration.Cells=new Array();configuration.Cells[0]=new Object();configuration.Cells[0].ClassName="sTdBetDetailNumberCombination";configuration.Cells[0].HeaderName=messages.lblBetSlipDetailNumberCombination;configuration.Cells[1]=new Object();configuration.Cells[1].ClassName="sTdBetDetailCombination";configuration.Cells[1].HeaderName=messages.lblBetSlipDetailCombination;var tableHorses=new TableRendererClass();var positionCollection=0;var numberCombination=0;var countHorseArray=0;var collection=new Array();switch(betCollection[indexId].PoolId){case 0:positionCollection=0;for(var count=0;count<betCollection[indexId].CombinationsArray.length;count++){var arrayInformation=betCollection[indexId].CombinationsArray[count][1].split("  ");var programNumber=arrayInformation[0];var arrayStraight=arrayInformation[1].split("/");var labelStraight="";var betAmount="";for(let count2=0;count2<arrayStraight.length;count2++){if($.trim(arrayStraight[count2])!="X"){betAmount=$.trim(arrayStraight[count2]);collection[positionCollection]=new Array();switch(count2){case 0:labelStraight=messages.lblFirst;break;case 1:labelStraight=messages.lblSecond;break;case 2:labelStraight=messages.lblThird;break;default:break;}
collection[positionCollection][0]=positionCollection+1;collection[positionCollection][1]=betCollection[indexId].TotalWager.split(" ")[0]+betAmount+" "+labelStraight+" "+" "+messages.ProgramNumber+" "+programNumber+" "+betCollection[indexId].HorsesArray[count][1];positionCollection++;}}}
tableHorses.LoadTableInformation(tblId,collection,configuration,dvIdJquery);break;case 1000:case 1001:case 1002:case 1003:case 1004:case 1005:case 1006:case 1007:configuration=new Object();configuration.Cells=new Array();configuration.Cells[0]=new Object();configuration.Cells[0].ClassName="";configuration.Cells[1]=new Object();configuration.Cells[1].ClassName="sTdBetDetailParlayPositioName";positionCollection=0;numberCombination=0;var totalParlay=0;var positionCollectionRunner=0;switch(betCollection[indexId].PoolId){case 1004:case 1005:case 1006:totalParlay=2;break;case 1007:totalParlay=3;break;default:totalParlay=1;break;}
var parlayInformationBet=betCollection[indexId].ParlayInformationBet;for(let count=0;count<totalParlay;count++){positionCollectionRunner=0;for(t=0;t<parlayInformationBet.ParlayRunners.length;t++){if(parlayInformationBet.ParlayRunners[t]!=undefined){for(te=0;te<parlayInformationBet.ParlayRunners[t].TrackEvent.length;te++){for(r=0;r<parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races.length;r++){for(h=0;h<parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses.length;h++){var htmlToInsert="<div class='sDvDetailParlayInformation'><div class='sTdBetDetailParlayTrackName'>"+parlayInformationBet.ParlayRunners[t].TrackName+"</div>";htmlToInsert+="<div>, R"+parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].RaceNumberId+", ";htmlToInsert+="PN"+parlayInformationBet.ParlayRunners[t].TrackEvent[te].Races[r].Horses[h].ProgramNumber+"</div>";var _parlayPoolTypeSelected=parseInt(betCollection[indexId].PoolId,10);var poolTypeName=''
switch(_parlayPoolTypeSelected){case PoolType.WinPlaceParlay:if(count==0){poolTypeName=messages.lblWinParlay;}
if(count==1){poolTypeName=messages.lblPlaceParlay;}
break;case PoolType.WinShowParlay:if(count==0){poolTypeName=messages.lblWinParlay;}
if(count==1){poolTypeName=messages.lblShowParlay;}
break;case PoolType.PlaceShowParlay:if(count==0){poolTypeName=messages.lblPlaceParlay;}
if(count==1){poolTypeName=messages.lblShowParlay;}
break;case PoolType.WinPlaceShowParlay:if(count==0){poolTypeName=messages.lblWinParlay;}
if(count==1){poolTypeName=messages.lblPlaceParlay;}
if(count==2){poolTypeName=messages.lblShowParlay;}
break;default:poolTypeName=betCollection[indexId].PoolTypeName;break;}
if(collection[positionCollection]===undefined){collection[positionCollection]=new Array();}
collection[positionCollection][positionCollectionRunner]=new Array();collection[positionCollection][positionCollectionRunner][0]=htmlToInsert;collection[positionCollection][positionCollectionRunner][1]="<div>"+poolTypeName+"</div>";positionCollectionRunner++;}}}}}
positionCollection++;}
tableHorses.LoadTableInformationParlay(tblId,collection,configuration,dvIdJquery);break;default:positionCollection=0;numberCombination=0;countHorseArray=0;for(let count=0;count<betCollection[indexId].CombinationsArray.length&&count<1000;count++){var arrayProgramaNumber=betCollection[indexId].CombinationsArray[count][1].split(",");let labelStraight="";let betAmount="";var raceIndexId=0;var raceInitialNumberPick=parseInt(betCollection[indexId].RaceList);var combinationDetail=""
for(var count2=0;count2<arrayProgramaNumber.length;count2++){if(combinationDetail==""){combinationDetail=arrayProgramaNumber[count2];}
else{combinationDetail+=" - "+arrayProgramaNumber[count2];}}
collection[positionCollection]=new Array();collection[positionCollection][0]=numberCombination+1;collection[positionCollection][1]=combinationDetail;positionCollection++;numberCombination++;}
if(betCollection[indexId].CombinationsArray.length>=1000){collection[positionCollection]=new Array();collection[positionCollection][0]='';collection[positionCollection][1]=messages.lblMaxCombinationViewDetail.replace('{0}',betCollection[indexId].CombinationsArray.length);}
tableHorses.LoadTableInformation(tblId,collection,configuration,dvIdJquery);break;}}
else{$(dvIdJquery).find('.sDvPopupBetDetail').show();}}
function ReplacePositionNumberToLetter(value){if(value==1){return 'W';}
if(value==2){return 'P';}
if(value==3){return 'S';}
return '';}
function GetDescriptionInformation(poolType,description,raceId,isModeReadback,runnerInfo,amountBetClient,poolTypeName,currencySymbol,showTaxFeeInformation){let newDescription='';let descriptionSlip=description.substring(description.indexOf('(')+1,description.indexOf(')')).split('/');let descriptionSlipRunner='';switch(poolType.toString()){case "0":return poolTypeName;case "4":case "5":case "6":case "7":if(isModeReadback){descriptionSlipRunner=description.substring(description.indexOf('(')+1,description.indexOf(')'));newDescription+=currencySymbol+amountBetClient+" "+poolTypeName+" ("+descriptionSlipRunner+")";}
else{for(let positionInformation=0;positionInformation<descriptionSlip.length;positionInformation++){var labelPosition=messages.lblFirst;switch(positionInformation){case 0:labelPosition=messages.lblFirst;break;case 1:labelPosition=messages.lblSecond;break;case 2:labelPosition=messages.lblThird;break;case 3:labelPosition=messages.lblFourth;break;}
if(newDescription==''){newDescription+=labelPosition+'['+descriptionSlip[positionInformation].trim()+']';}
else{newDescription+=' - '+labelPosition+'['+descriptionSlip[positionInformation].trim()+']';}}}
return newDescription;case "8":case "9":case "10":case "11":case "41":if(isModeReadback){descriptionSlipRunner=description.substring(description.indexOf('(')+1,description.indexOf(')'));newDescription+=currencySymbol+amountBetClient+" "+poolTypeName+" ("+descriptionSlipRunner+")";}
else{var raceNumber=parseInt(raceId,10);{for(let positionInformation=0;positionInformation<descriptionSlip.length;positionInformation++){if(newDescription==''){newDescription+=messages.lblHorseRace+' '+raceNumber+' '+messages.lblFirst+' ['+descriptionSlip[positionInformation].trim()+']';}
else{newDescription+=' - '+messages.lblHorseRace+' '+raceNumber+' '+messages.lblFirst+' ['+descriptionSlip[positionInformation].trim()+']';}
raceNumber++;}}}
return newDescription;default:return '';}}
function GetPoolTypeName(value){switch(value.toString()){case "0":return messages.lblPoolTypeNameStraight;case "4":return messages.lblPoolTypeNameQuinella;case "5":return messages.lblPoolTypeNameExacta;case "6":return messages.lblPoolTypeNameTrifecta;case "7":return messages.lblPoolTypeNameSuperfecta;case "8":return messages.lblPoolTypeNameDailyDouble;case "9":return messages.lblPoolTypeNamePick3;case "10":return messages.lblPoolTypeNamePick4;case "11":return messages.lblPoolTypeNamePick5;case "41":return messages.lblPoolTypeNamePick6;case "1000":case "1001":case "1002":case "1003":return messages.lblPoolTypeNameParlay;default:return '';}}
function AllValuesArrayAreUndefined(arrayValue){var allAreUndefined=true;for(v=0;v<arrayValue.length;v++){if(arrayValue[v]!=undefined){allAreUndefined=false;}}
return allAreUndefined;}
this.ShowAskLoginMessage=function ShowAskLoginMessage(anonymousType,ssc,token,applicationId){$("#dvAskLogin").show();$("#divLoginMsgErr").hide();$("#trErrorMessage").hide();if(anonymousType==1){$("#dvInternalLogin").show();}
if(anonymousType==2){var strURL=$("#loginURL").val();if(strURL==""){strURL="./Login.aspx";}
if(strURL.indexOf("?",0)==-1){strURL+="?";}
if(strURL.toLowerCase().indexOf("ssc=",0)==-1){if(strURL[strURL.length-1]=="?"){strURL+="&";}
strURL+="ssc="+ssc;}
strURL+="&stoken="+token;strURL+="&applicationId="+applicationId;window.location=strURL;}};function PlaceBetGroup_CallBack(response){if($('#_modeBetting').val()=='0'){if(_isModeReadBack||_autoConfirmMode){shoppingCartEdit.RestoreLabelButton();}}
if(response.error!=null){alert("PlaceBetsCart"+response.error);return;}
try{eval(response.value);}
catch(er){window.status="PlaceBetsCart :: "+er.name+er.message;console.log(er);}
ShowWaitDialog(false);_betPlacedShopping=false;if(CheckBetPlacedToClearInformation()){returnObjById(shoppingCart.TRButtonSendBet).style.display='none';betCollection=new Array();}
resizeHeightFancyMyAccountPopup();if(_externalInformationBetSlipNoLoaded){LoadExternalInformationBetSlip();}
if($('#_modeBetting').val()=='0'){if(!_autoConfirmMode){$('#dvOpenConfirmationBet .sTblBetSlipButtons').hide();$('#dvOpenConfirmationBet .sTblBetSlipButtonsContinue').show();}
else{_someTicketHasSaved=true;}
if(_autoConfirmMode){if(!(typeof shoppingCartEdit!=="undefined"&&shoppingCartEdit.IsEditMode())&&!shoppingCart.HaveTicketWithSomeError()){var addInformation=GetAddInformationBetSessionStorage();Racebook.LoadPendingTicket(_sessionSSC,_token,addInformation,LoadPendingTicket_CallBack);}}
$('#rblPools_0').click();}}
this.RemoveTicketSubmited=function(intenerId){var indexTicketToRemove=-1;for(var positionToDelete=0;positionToDelete<betCollection.length;positionToDelete++){if(betCollection[positionToDelete]!=undefined){if(betCollection[positionToDelete].InternalReference==intenerId){indexTicketToRemove=positionToDelete;break;}}}
if(indexTicketToRemove!=-1){delete betCollection[indexTicketToRemove];}}
function DeleteBetshoppingCart_CallBack(response){if(response.error!=null){alert("DeleteBetshoppingCart_CallBack"+response.error);return;}
try{eval(response.value);resizeHeightFancyMyAccountPopup();if($('#_modeBetting').val()=='0'){CloseConfirmationBet();}}
catch(er){window.status="DeleteBetshoppingCart_CallBack :: "+er.name+er.message;}}
function ChangeAvailablePlayer_CallBack(response){if(response.error!=null){alert("ChangeAvailablePlayer_CallBack"+response.error);return;}
try{eval(response.value);}
catch(er){window.status="ChangeAvailablePlayer_CallBack :: "+er.name+er.message;}}}
function showBetSlipCart(){$('#dvTblBetSplipCart').click();}